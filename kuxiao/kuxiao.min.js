var module=angular.module("RCP",["ngRoute","ngCookies","ngSanitize","LocalStorageModule"]);!function(){function e(e){l=e,c.removeClass("active").eq(e).addClass("active"),s.removeClass("active").eq(e).addClass("active")}function a(){l++,l%=c.length,e(l)}function t(){clearInterval(i)}function n(){t(),i=setInterval(a,o)}var i,r=$("#index-banner"),c=r.find(".mban-container .mban-item"),s=r.find(".mban-key .key"),o=3500,l=0;n(),r.on({mouseenter:t,mouseleave:n}),s.each(function(a){$(this).on({click:function(){e(a)}})})}(),function(){function e(e){m=e,o.css({transform:"translate("+-(m*u)+"px, 0px)"})}function a(){m++,m%=s.length-6,e(m)}function t(){m--,m=0>m?s.length-7:m,e(m)}function n(){clearInterval(r)}function i(){n(),r=setInterval(a,g)}var r,c=$("#by-school"),s=c.find(".sw-school-item"),o=c.find(".scroll-list"),l=c.find(".before"),d=c.find(".after"),g=3500,m=0;if(s.length&&!(s.length<8)){var u=s.eq(0).outerWidth(!0);o.css({width:u*s.length}),i(),c.on({mouseenter:n,mouseleave:i}),l.on({click:t}),d.on({click:a})}}(),module.factory("course",["request",function(e){var a=DYCONFIG.course.rUrl;return{getCourseDetail:function(t,n){t.token=rcpAid.getToken();var i={method:"GET",url:a+"pub/api/loadCourse",params:t};return e(angular.extend(i,n||{}))},getTeacherCourses:function(t,n){t.token=rcpAid.getToken(),t.isSelf=1;var i={method:"GET",url:a+"pub/api/searchCourse",params:t};return e(angular.extend(i,n||{}))},joinFreeCourse:function(t,n){t.token=rcpAid.getToken();var i={method:"GET",url:a+"usr/api/joinCourse",params:t};return e(angular.extend(i,n||{}))},searchCourse:function(t,n){var i={method:"GET",url:a+"pub/api/searchCourse",params:t};return e(angular.extend(i,n||{}))},verifyCourse:function(t,n){t.token=rcpAid.getToken();var i={method:"GET",url:a+"usr/api/verifyCourse",params:t};return e(angular.extend(i,n||{}))},createCourse:function(t,n,i){t.token=rcpAid.getToken();var r={method:"POST",url:a+"usr/api/createCourse",params:t,data:i};return e(angular.extend(r,n||{}))},getStudentCourse:function(t,n){t.token=rcpAid.getToken(),t.isSelf=10;var i={method:"GET",url:a+"pub/api/searchCourse",params:t};return e(angular.extend(i,n||{}))},releaseCourse:function(t,n){t.token=rcpAid.getToken();var i={method:"GET",url:a+"usr/api/releaseCourse",params:t};return e(angular.extend(i,n||{}))},saveCourseData:function(t,n){var i={};i.token=rcpAid.getToken();var r={method:"POST",url:a+"usr/api/updateCourse",params:i,data:t};return e(angular.extend(r,n||{}))},cancelCourse:function(t,n){t.token=rcpAid.getToken();var i={method:"POST",url:a+"usr/api/cancelCourse",params:t};return e(angular.extend(i,n||{}))},getListGroup:function(t,n){t.token=rcpAid.getToken();var i={method:"GET",url:a+"pub/api/listGroup",params:t};return e(angular.extend(i,n||{}))},getAllTags:function(a,t){a.token=rcpAid.getToken();var n={method:"POST",url:DYCONFIG.pes.rUrl+'pub/api/page/GetPage?keys=[{"key":"p_classifi"}]',params:a};return e(angular.extend(n,t||{}))}}}]),module.run(["service","course",function(e,a){e.expand("course",function(){return a})}]),module.factory("headSearch",["request",function(e){var a=g_conf.pes.rUrl;return{SearchIntelligent:function(t,n){var i={method:"GET",url:a+"pub/api/SearchIntelligent",params:t,option:{loading:!1}};return e(angular.extend(i,n||{}))}}}]),module.run(["service","headSearch",function(e,a){e.expand("headSearch",function(){return a})}]),module.directive("headnav",function(){return{template:'<header><div ng-class="headMaximizeLock ? \'head-maximize\' : \'head-minimize\'"><div ng-class="param.style"><div class="image-head-rainbow decoration-ic"></div><section class="g-m-w header-area"><div class="minimize-logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.small}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><nav class="minimize-nav"><ul><li ng-repeat="item in navList track by $index" ng-class="item.class"><a ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}">{{item.name}}</a><div ng-if="item.child.length"><ul><li ng-repeat="c in item.child"><a ng-href="{{c.href || \'\'}}" target="{{c.target || \'_self\'}}">{{c.name}}</a></li></ul></div></li></ul></nav><div class="logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.large}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><div class="top-user-menu-bar" ng-class="{clearminw: user.account}"><top-user-menu user="user" item-list="itemList"></top-user-menu></div><div class="h-sc" ng-controller="headSearchCtrl"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index, \'资源\')"><div class="text-of pd-r10"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a class="item-name" ng-bind-html="item.name | titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a ng-href="javascript:void(0);" ng-click="goToSort(item.name)" class="mg-r20" ng-repeat="item in scHotWord">{{item.name}}</a></div></div></section><section class="nav-area"><div class="g-m-w"><div class="n-categories" ng-controller="categoriesCtrl" ng-mouseenter="service.mouseenter(hover)" ng-mouseleave="service.mouseleave(hover)"><div class="dt">全部课程</div><div class="dd" id="by-categories" ng-show="categoriesUnfoldLock || hover.mouseEnterLock"><div class="image-giraffe giraffe-icon"></div><div class="dd-inner"><div class="item" ng-repeat="item in categoriesListStyle1 track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)" ng-show="$index<5 || hover.mouseEnterLock"><div class="layer"><h3><a ng-href="goToCategory(item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><div class="hot-word"><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="text-of" ng-repeat="child in item.child track by $index" ng-show="$index<3" title="{{child.name}}">{{child.name}}</a></div><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<3"><dt><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<15" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>3"><a ng-href="goToCategory(item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div><div ng-repeat="list in categoriesListStyle2 track by $index"><div class="big-sort"><a ng-href="goToCategory(item.name)" target="_blank" title="{{list.name}}">{{list.name}}</a></div><div class="item" ng-repeat="item in list.child track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)"><div class="layer"><h3><a ng-href="goToCategory(list.name,item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<4"><dt><a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(list.name,item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<10" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>4"><a ng-href="goToCategory(list.name,item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div></div></div></div></div><nav class="nav"><a ng-repeat="item in navList track by $index" ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}" ng-class="item.class">{{item.name}}</a></nav><div class="extra" ng-show=""><a href="javascript:void(0);" class="icf t-icf">名师认证</a> <a href="javascript:void(0);" class="icf e-icf">真实评价</a> <a href="javascript:void(0);" class="icf r-icf">随时退</a></div></div></section></div></div></header>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user",nav:"="},controller:["$rootScope","$scope","$element","$attrs","service",function(e,a,t,n,i){a.service=i,a.catType=parseInt(rcpAid.getCourseCat()),e.$watch("headMaximizeLock",function(e){e&&(a.headMaximizeLock=e)}),e.$watch("categoriesUnfoldLock",function(e){e&&(a.categoriesUnfoldLock=e)}),e.$watch("catDomain",function(e){if(e)switch(e){case"aikexue.com":a.init(2)}}),a.$on("login",function(e,t){t&&a.loginInit()}),a.loginInit=function(){3===a.catType&&(a.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:a.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}])},a.init=function(e){if("order"===a.nav)return a.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"个人空间",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],void(a.param={logo:{small:"/rcp-common/imgs/order/head-icon.png",large:"/rcp-common/imgs/icon/head-icon.png",href:"/my-order.html",msg:"我的酷校"},style:""});switch(a.catType){case 3:a.isLogin?a.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:a.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}]:a.navList=[{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}],a.param={logo:{small:"/rcp-common/imgs/icon/gzmooc-logo.png",large:"/rcp-common/imgs/icon/gzmooc-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校 - 首页"},style:""};break;case 2:a.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"全部课程",href:rcpAid.getUrl("分类"),"class":"key",target:"_blank"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],a.param={logo:{small:"/rcp-common/imgs/icon/aikexue-logo-2.png",large:"/rcp-common/imgs/icon/aikexue-logo.png",href:DYCONFIG.rcp.rUrl,msg:"爱科学"},style:"aikexue-head"};break;default:a.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"我要吐槽",href:rcpAid.getUrl("我要吐槽"),"class":"key",target:"_blank"}],a.param={logo:{small:"/rcp-common/imgs/icon/book-logo-2.png",large:"/rcp-common/imgs/icon/book-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校LOGO·让学习更Cool"},style:""}}},a.init()}]}}),module.directive("topUserMenu",function(){return{template:'<div class="top-user-menu"><div style="font-size:14px;line-height:40px" ng-show="!currentUser.uid"><a ng-href="{{link.login}}" id="login" class="color-cyan pd-l20"><i class="image-login-user-ic"></i>马上登录 </a><span style="color:#ececec;margin:0 8px">| </span><a ng-href="{{link.register}}" class="color-cyan">注册</a></div><div class="menber-link" ng-show="currentUser.uid"><a href="" class="u-info" rel="member_link"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <span class="name" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></span> <i class="x-arrow-dowm">&gt;</i></a><div class="u-panel"><div class="tup-box"><div class="tup-info" rel="user_info_box"><div class="user-head" rel="user_face_box"><a ng-href="{{link.setting}}"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"></a></div><div class="user-identity"><p class="user-name text-of"><a href="" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></a></p><p class="attestation-un" ng-class="{\'attestation\':attestation==\'已认证\'}"><i class="image-attestation-yellow"></i> <span>{{attestation}}</span></p></div><div class="clear"></div></div><div class="tup-operate"><div class="card-sets"><a href="{{link.applySpaceUrl}}" class="key f-l"><i class="image-attestation"></i> <span class="text-4f">认证管理</span> </a><a href="{{link.setting}}" target="_blank" class="key f-l"><i class="image-settings"></i> <span class="text-4f">设置</span> </a><a href="" class="key f-r" ng-click="logout()"><i class="image-logout"></i> <span class="text-4f">退出</span></a></div><div class="card-links"><a ng-repeat="item in itemList" ng-href="{{item.href || \'\'}}" ng-class="item.name == \'...\' ? \'disabled key \'+item.icon : \'key \'+item.icon"><i></i> <span>{{item.name}}</span></a></div></div></div></div></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user"},controller:["$rootScope","$scope","$timeout","$location","service",function(e,a,t,n,i){a.$watch("itemList",function(e){if(e){var t=a.itemList.length,n=t%3;if(n)for(var i=3-t%3+t,r=t;i>r;r+=1)e.push({name:"..."})}},!0),a.logout=function(){var e=rcpAid.getUrl("首页");location.href=rcpAid.getUrl("退出",{url:encodeURIComponent(e)})},a.$on("login",function(e,t){t.uid&&a.loginInit()}),a.loginInit=function(){a.currentUser=e.currentUser,a.currentUser.certification&&(a.attestation="已认证")},a.init=function(){var e=rcpAid.getNoTokenUrl();a.link={login:rcpAid.getUrl("登录",{url:encodeURIComponent(e)}),register:rcpAid.getUrl("注册",{url:encodeURIComponent(e)}),applySpaceUrl:rcpAid.getUrl("实名认证"),setting:rcpAid.getUrl("个人设置",{url:window.location.href})},a.attestation="未认证"},a.init()}]}}),module.controller("categoriesCtrl",["$rootScope","$scope","service",function(e,a,t){function n(e){switch(e){case 2:a.categoriesListStyle2=i||[];break;default:a.categoriesListStyle1=i||[]}}a.service=t,a.hover={},a.catType=rcpAid.getCourseCat(),a.byCategories=function(){a.byCategoriesLoading=!0,n(a.catType)},a.listenerMember={byCategories:{node:"#by-categories",callback:a.byCategories}};var i;a.goToCategory=function(){var e=[].slice;return rcpAid.getUrl("分类",{tags:e.call(arguments,0).join(",")})}}]),module.directive("searchDir",function(){return{template:'<div class="h-sc"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-repeat="item in mcCategoryList track by $index" ng-if="$index < lMaxLen" ng-class="{hover: $index == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'类\')" ng-click="matchGoToCategory(item.tag,scText)"><div class="text-of"><a href="javascript:;">{{text}}</a> 在 <a href="javascript:;" class="item-name color-cyan">{{item.tag}}</a> 分类中搜索</div></li></ul><div style="margin:0 10px;border-top:1px solid #dfdfdf" ng-if="mcCourseList.length && mcCategoryList.length"></div><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'资源\')"><div class="text-of"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a href="javascript:;" class="item-name" ng-bind-html="item.name|titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a href="" class="mg-r20" ng-repeat="item in scHotWord" ng-click="goToSort(item.name)">{{item.name}}</a></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{hot:"="},controller:"headSearchCtrl"}}),module.controller("headSearchCtrl",["$rootScope","$scope","$document","$element","service","headSearch",function(e,a,t,n,i,r){function c(){a.scText="",g()}function s(){x=!0,a.KeyDownIndex=a.moveKeyIndex,d()}function o(){"number"!=typeof a.moveKeyIndex?a.moveKeyIndex=0:a.moveKeyIndex=(a.moveKeyIndex+1)%a.aMaxLen,s()}function l(){"number"!=typeof a.moveKeyIndex?a.moveKeyIndex=a.aMaxLen-1:a.moveKeyIndex=a.moveKeyIndex<0?a.aMaxLen-1:a.moveKeyIndex-1,s(),p(a.scText.length)}function d(){var e,t=a.KeyDownIndex,n=a.lMaxLen;return a.scTag=void 0,n>t&&(a.scText=a.text),t>=n&&(e=a.mcCourseList[t-a.lMaxLen],e&&(a.scText=e.name)),e}function g(e){a.matchReadyLock=!1,e&&(t.unbind("click"),a.$digest())}function m(){t.unbind("click").bind("click",function(){g("digest")}),a.matchReadyLock=!0}function u(){a.matchReadyLock&&(clearTimeout(b),b=setTimeout(function(){g("digest")},300))}function p(e){var a=n.find('input[ng-model="scText"]').get(0);if("selectionStart"in a&&(a.selectionStart=e,a.selectionEnd=e),"createTextRange"in a){var t=a.createTextRange();t.moveStart("character",e),t.collapse(!0),t.select()}}function h(e,t){a.inSort&&!angular.isArray(e)||angular.forEach(e,function(e){return a.inSort?!1:void(t(e)||angular.isArray(e.child)&&e.child.length&&(h(e.child,t),f("push",e.name)))})}function v(e,t){switch(a.inSort=!1,f("clear"),h(e,function(e){return a.inSort=e.name===t,a.inSort&&f("push",e.name),a.inSort}),a.inSort){case!0:f("splice",t);break;default:f("clear")}return a.categorySelect}function f(e,t){var n=a.categorySelect;switch(e){case"clear":n.splice(0,n.length);break;case"push":n.push(t);break;case"splice":n.splice(0,$.inArray(t,n))}}function k(e,a){i.dialog.alert(a),console[e](a)}function y(e){var a=[];if(e.length)for(var t=0,n=e.length;n>t;t++)a.push({id:e[t].hasOwnProperty("id")?e[t].id:"",name:e[t].hasOwnProperty("title")?e[t].title:"",t:e[t].hasOwnProperty("type")?e[t].type:""});return a}a.scHotWord=[],a.scSelect=[{name:"所有分类",value:"",fixLock:!0},{name:"课程",value:10},{name:"题库",value:20}],a.scSelectVal=a.scSelect[0],a.onkeydown=function(e){switch(e.stopPropagation(),e.keyCode){case 13:a.scText||(a.scText=$(".head-search-bar input").eq(0).val());var t=a.KeyDownIndex,n=a.lMaxLen;"number"==typeof t&&t>=0&&n>t&&a.scTag?a.matchGoToCategory(a.scTag,a.scText):t>=0&&a.matchReadyLock?location.href=rcpAid.getUrl("课程详情",{cid:a.mcCourseList[t].id}):a.goToSearch(a.scSelectVal.value,a.scText);break;case 38:l();break;case 40:o();break;default:x=!1,a.moveKeyIndex=void 0,a.KeyDownIndex=void 0,a.scTag=void 0}};var x,b;n.find('input[ng-model="scText"]').unbind("focus").bind("focus",m),n.find('input[ng-model="scText"]').unbind("blur").bind("blur",u),a.mouseenter=function(e,t){switch(t){case"类":a.moveKeyIndex=e;break;case"资源":a.moveKeyIndex=e+a.lMaxLen}},a.goToSearch=function(e,a){c(),location.href=rcpAid.getUrl("搜索",{type:e,query:a?encodeURIComponent(a):a})},a.goToSort=function(e){c(),location.href=rcpAid.getUrl("分类",{tags:e})},a.stopPropagation=function(e){e.stopPropagation()},a.matchChange=function(e,t){if(!x){if(g(),!t)return a.mcCategoryList=[],void(a.mcCourseList=[]);a.text=t,r.SearchIntelligent({key:t,courseType:e||null,limit:10}).then(function(e){a.scText&&(a.matchReadyLock=!0,a.mcCourseList=y(e.data.courses||[]),a.mcCategoryList=[],a.lMaxLen=a.mcCategoryList.length>3?3:a.mcCategoryList.length,a.cMaxLen=a.mcCourseList.length-a.lMaxLen,a.aMaxLen=a.lMaxLen+a.cMaxLen,a.mcCourseList.length||a.mcCategoryList.length||g())},function(e){k("错误代码："+e.data.data.code)})}},a.$watch("scSelectVal.value",function(){a.matchChange(a.scSelectVal.value,a.scText)}),a.matchGoToCategory=function(a,t){if(!e.allTagCategroy||!e.allTagCategroy.length)return void k("error","获取分类数据失败");var n=v(e.allTagCategroy,a).reverse().join(",");n?(c(),location.href=rcpAid.getUrl("分类",{tags:n,query:t})):k("error","找不到这个分类，请检查接口数据")},a.categorySelect=[],a.intoDetail=function(e){e.hasOwnProperty("id")&&(location.href=rcpAid.getUrl("课程详情",{cid:e.id}))}}]),module.directive("tailnav",function(){return{template:'<footer><section class="footer" id="footer"><div class="g-m-w"><div class="copyright"><p>广州市大洋信息技术股份有限公司 版权所有</p><p>Copyright © 2015 ITDAYANG. All Rights Reserved.</p><p>{{caseNumber}}</p></div><div class="footer-link"><a href="http://www.itdayang.com/about.html" target="_blank">关于我们</a> <span>- </span><a href="http://www.itdayang.com/contact.html" target="_blank">联系我们</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">法律条款</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">帮助中心</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">学校申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">机构申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">意见反馈</a></div><div class="clear"></div></div></section></footer>',restrict:"E",replace:!0,transclude:!0,scope:{data:"=data"},controller:["$scope","service",function(e,a){e.catType=rcpAid.getCourseCat();var t=DYCONFIG.domain||[];angular.forEach(t,function(a){a.domain===location.host&&(e.caseNumber=a.domainNum)}),e.atBuilding=function(){a.dialog.alert("正在建设中...")}}]}}),module.filter("titleMatchKw",["$sce",function(e){return function(a,t){var n="<b>"+t+"</b>",i=/([\[\]\(\)\{\}\*\?\+\^\$\.\|\\])/gi,r=t.replace(i,"\\$1");return a=a.replace(new RegExp(r,"ig"),n),e.trustAsHtml(a)}}]),function(){function e(){var i=document.getElementById("footer");if(i){var r=document.documentElement.scrollHeight-1||document.body.scrollHeight-1,c=document.documentElement.clientHeight||document.body.clientHeight;n=c>=r?1:2,n!==t&&(c>=r?(a(i.parentNode,{height:i.offsetHeight+"px"}),a(i,{position:"absolute",width:"100%",bottom:0,left:0})):(a(i.parentNode,{height:i.offsetHeight+"px"}),a(i,{position:"",width:"100%",bottom:0,left:0}))),t=c>=r?1:2}setTimeout(e)}if(!window.fixedFooterFlag){window.fixedFooterFlag=!0;var a=function(e,a){for(k in a)e.style[k]=a[k]},t=0,n=1;e()}}(),module.directive("fixedToolbar",function(){return{template:'<div ng-class="\'fixed-toolbar \'+param.style"><div class="grid tab-top" title="回到顶部" onclick=\'$("html,body").stop().animate({scrollTop:0},"fast")\'><i class="ic"></i></div><div class="grid d-app"><i class="ic"></i><p class="font">App 下载</p><div ng-class="panelAmit ? \'panel panel-amit\' : \'panel\'"><div class="inner"><div class="img"><img ng-src="{{data.qr.src}}" width="122" height="122" rel="download_kuxiao_app_qr_code"></div><p>{{data.qr.name}}</p></div></div></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{data:"=data"},controller:["$scope","$rootScope","$timeout",function(e,a,t){function n(){var e=$(".tab-top"),a=$(window).scrollTop();a>300?e.addClass("visible"):e.removeClass("visible")}n(),$(window).bind("scroll",n),$(window).bind("resize",n),e.param={},e.init=function(a){switch(a){case 2:e.param.style="aikexue-fixed-toolber"}},e.init(rcpAid.getCourseCat()),a.$watch("catDomain",function(a){if(a)switch(a){case"aikexue.com":e.init(2)}}),t(function(){e.panelAmit=!0},300)}]}});