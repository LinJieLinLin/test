function QueryStringByName(e){var t=window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));return null==t||t.length<0?"":decodeURIComponent(t[1])}function GetCookie(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var a=t[n].split("=");if(e==a[0])return a[1]?unescape(a[1]||""):QueryStringByName("token")}return null}function GetToken(){try{return UINFO.token}catch(e){var t=QueryStringByName("token");return t||(t=GetCookie("token")),t}}!function(e,t){function n(e,t){var n,a=window.navigator.userAgent.toLowerCase();if(-1!=a.indexOf("msie")){var i=a.match(/msie\s([0-9]*)/);n=0==arguments.length?i[1]:1==arguments.length?parseInt(i[1])==e:i[1]>=e&&i[1]<=t?i[1]:!1}return n}var a;$(function(){n()||(e.addEventListener("beforeunload",function(){a=!0},!1),e.addEventListener("mousedown",function(){a=!1},!1))});var i=/hp-tablet/gi.test(navigator.appVersion),s="ontouchstart"in window&&!i,o=s?"touchstart":"mousedown",r=s?"touchmove":"mousemove",c=s?"touchend":"mouseup",l="touchcancel";this._Tween={Linear:function(e,t,n,a){return n*e/a+t},Quad:{easeIn:function(e,t,n,a){return n*(e/=a)*e+t},easeOut:function(e,t,n,a){return-n*(e/=a)*(e-2)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}},Cubic:{easeIn:function(e,t,n,a){return n*(e/=a)*e*e+t},easeOut:function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}},Quart:{easeIn:function(e,t,n,a){return n*(e/=a)*e*e*e+t},easeOut:function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t}},Quint:{easeIn:function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},easeOut:function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t}},Sine:{easeIn:function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},easeOut:function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},easeInOut:function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t}},Expo:{easeIn:function(e,t,n,a){return 0==e?t:n*Math.pow(2,10*(e/a-1))+t},easeOut:function(e,t,n,a){return e==a?t+n:n*(-Math.pow(2,-10*e/a)+1)+t},easeInOut:function(e,t,n,a){return 0==e?t:e==a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t}},Circ:{easeIn:function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOut:function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOut:function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},Elastic:{easeIn:function(e,t,n,a,i,s){if(0==e)return t;if(1==(e/=a))return t+n;if(s||(s=.3*a),!i||i<Math.abs(n)){i=n;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(n/i);return-(i*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/s))+t},easeOut:function(e,t,n,a,i,s){if(0==e)return t;if(1==(e/=a))return t+n;if(s||(s=.3*a),!i||i<Math.abs(n)){i=n;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(n/i);return i*Math.pow(2,-10*e)*Math.sin((e*a-o)*(2*Math.PI)/s)+n+t},easeInOut:function(e,t,n,a,i,s){if(0==e)return t;if(2==(e/=a/2))return t+n;if(s||(s=a*(.3*1.5)),!i||i<Math.abs(n)){i=n;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(n/i);return 1>e?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/s))+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/s)*.5+n+t}},Back:{easeIn:function(e,t,n,a,i){return void 0==i&&(i=1.70158),n*(e/=a)*e*((i+1)*e-i)+t},easeOut:function(e,t,n,a,i){return void 0==i&&(i=1.70158),n*((e=e/a-1)*e*((i+1)*e+i)+1)+t},easeInOut:function(e,t,n,a,i){return void 0==i&&(i=1.70158),(e/=a/2)<1?n/2*(e*e*(((i*=1.525)+1)*e-i))+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t}},Bounce:{easeIn:function(e,t,n,a){return n-_Tween.Bounce.easeOut(a-e,0,n,a)+t},easeOut:function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOut:function(e,t,n,a){return a/2>e?.5*_Tween.Bounce.easeIn(2*e,0,n,a)+t:.5*_Tween.Bounce.easeOut(2*e-a,0,n,a)+.5*n+t}}},this.jf=this.jf||{isIE:n,browseCheck:function(){var e,t={},n={},a=navigator.userAgent.toLowerCase();(e=a.match(/msie ([\d.]+)/))?n.ie=e[1]:(e=a.match(/firefox\/([\d.]+)/))?n.firefox=e[1]:(e=a.match(/chrome\/([\d.]+)/))?n.chrome=e[1]:(e=a.match(/opera.([\d.]+)/))?n.opera=e[1]:(e=a.match(/version\/([\d.]+).*safari/))?n.safari=e[1]:0;for(var i in n)t.edition=i+":"+n[i],t.name=i;return t},detectOS:function(){var e={};return e.ua=navigator.userAgent,e.uaTLC=e.ua.toLowerCase(),e.platform=navigator.platform,e.isLinux=String(e.platform).indexOf("Linux")>-1,e.isWin="Win32"===e.platform,e.isMac="Mac68K"===e.platform,e.isUnix="X11"===e.platform&&!e.isWin&&!e.isMac,e.isSymbian="SymbianOS"===e.platform,e.bIsCE=e.uaTLC.match(/windows ce/i),e.bIsWM=e.uaTLC.match(/windows mobile/i),e.bIsAndroid=e.uaTLC.match(/android/i),e.bIsIpad=e.uaTLC.match(/ipad/i),e.bIsIphoneOs=e.uaTLC.match(/iphone os/i),e.bIsMidp=e.uaTLC.match(/midp/i),e.bIsUc7=e.uaTLC.match(/rv:1.2.3.4/i),e.bIsUc=e.uaTLC.match(/ucweb/i),e.mobile=!!(e.bIsIpad||e.bIsIphoneOs||e.bIsMidp||e.bIsUc7||e.bIsUc||e.bIsAndroid||e.bIsCE||e.bIsWM||e.isSymbian),e.pc=!e.mobile,e.name=e.bIsIpad?"iPad":e.bIsIphoneOs?"iPhone":e.bIsMidp?"midp":e.bIsUc7?"Uc7":e.bIsUc?"Ucweb":e.isMac?"Mac":e.isLinux?e.bIsAndroid?"Android":"Linux":e.isSymbian?"SymbianOS":e.bIsCE||e.bIsWM?"wm":"other",e.isWin&&(e.isWin2K=e.ua.indexOf("Windows NT 5.0")>-1||e.ua.indexOf("Windows 2000")>-1,e.isWinXP=e.ua.indexOf("Windows NT 5.1")>-1||e.ua.indexOf("Windows XP")>-1,e.isWin2003=e.ua.indexOf("Windows NT 5.2")>-1||e.ua.indexOf("Windows 2003")>-1,e.isWinVista=e.ua.indexOf("Windows NT 6.0")>-1||e.ua.indexOf("Windows Vista")>-1,e.isWin7=e.ua.indexOf("Windows NT 6.1")>-1||e.ua.indexOf("Windows 7")>-1,e.isWin8=e.ua.indexOf("Windows NT 6.2")>-1||e.ua.indexOf("Windows 8")>-1,e.name=e.isWin2K?"Win2000":e.isWinXP?"WinXP":e.isWin2003?"Win2003":e.isWinVista?"WinVista":e.isWin7?"Win7":e.isWin8?"Win8":"other"),e},winScaleData:function(){var e={},t=this.detectOS();return e.sT=document.documentElement.scrollTop||document.body.scrollTop,e.sL=document.documentElement.scrollLeft||document.body.scrollLeft,e.sH=document.documentElement.scrollHeight||document.body.scrollHeight,e.cH=document.documentElement.clientHeight||document.body.clientHeight,e.sW=document.documentElement.scrollWidth||document.body.scrollWidth,e.cW=document.documentElement.clientWidth||document.body.clientWidth,e.minW=t.mobile?parseInt(jf.getStyle(document.body,"minWidth")):e.cW,e.minH=t.mobile?Math.ceil(e.cH+-(e.cW-e.minW)/e.cW*e.cH):e.cH,e.scale=e.cW/e.minW,e},css3Check:function(){for(var e=document.createElement("div"),t=new String("webkitTransition mozAnimation oAnimation msAnimation animation").split(" "),n=0;n<t.length;n++)if(t[n]in e.style)return!0;return!1},css3CallBack:function(e,t,n){function a(){n();for(var i=0;i<t.length;i++)e.removeEventListener(t[i],a,!1)}for(var i=0;i<t.length;i++)e.addEventListener(t[i],a,!1)},css3AnimatedEnd:function(e,t){this.css3CallBack(e,["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"],t)},css3TransitionEnd:function(e,t){this.css3CallBack(e,["webkitTransitionEnd","mozTransitionEnd","MSTransitionEnd","otransitionend","transitionend"],t)},stopDefault:function(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1},stopBubble:function(e){return e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,!1},domElemBit:function(e,t,n){function a(){d=new Date,s=d-l,s>=o?s=o:null,document.documentElement.scrollTop=document.body.scrollTop=Math.ceil(_Tween[t.mode][t.effect](s,r,c,o)),s>=o&&clearInterval(e.domElemBitTimer)}clearInterval(e.domElemBitTimer);var i=jf.pageY(e)-("negNum"in t?t.negNum:0),s=0,o=n,r=document.documentElement.scrollTop||document.body.scrollTop,c=-(r-i),l=new Date,d=new Date;e.domElemBitTimer=setInterval(a,1)},jsonExtend:function(e,t,n){if(t instanceof Array)for(var a=0,i=t.length;i>a;a++)this.jsonExtend(e,t[a],n);for(var a in t)!n&&a in e||(e[a]=t[a]);return e},getQueryString:function(e){var t=new RegExp(e+"=([^&]*)"),n=window.location.href.match(t);return null!=n?decodeURI(n[1]):null},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:getComputedStyle(e,!1)[t]},animate:function(e,t,n,a,i){clearInterval(e.timer);var s={};s.startTime=new Date,s.nowTime=new Date,s.mode=t.mode,s.effect=t.effect,s.t=0,s.d="fast"==a?300:"slow"==a?800:"normal"==a?500:a||500,s.b=[],s.c=[],s.tagVal=[],s.attr=[];for(key in n){var o="opacity"==key?100*parseFloat(jf.getStyle(e,key)):parseFloat(jf.getStyle(e,key));s.b.push(o),s.c.push(-(o-n[key])),s.tagVal.push(n[key]),s.attr.push(key)}s.offLen=s.attr.length;var r=function(t,n){var a=n?s.tagVal[t]:c(t);switch(s.attr[t]){case"opacity":e.style[s.attr[t]]=a/100,e.style.filter="alpha(opacity="+a+")";break;default:e.style[s.attr[t]]=a+"px"}},c=function(e){return Math.ceil(_Tween[s.mode][s.effect](s.t,s.b[e],s.c[e],s.d))},l=function(){s.nowTime=new Date,s.t=s.nowTime-s.startTime,s.t>=s.d?s.t=s.d:null;for(var t=0;t<s.offLen;t++)r(t);if(s.t>=s.d){clearInterval(e.timer);for(var n=0;n<s.offLen;n++)r(n,"end");s.t==s.d&&i&&i.call(e)}};e.timer=setInterval(l,1)},setCookie:function(e,t,n){var a=new Date;a.setDate(a.getDate()+n),document.cookie=e+"="+t+";expires="+a},getCookie:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var a=t[n].split("=");if(a[0]==e)return a[1]}return""},removeCookie:function(e){this.setCookie(e,"",-1)},window:function(){!function(e){e.fn.window=function(t,n){t=t||{};var a=e(this)[0];a.comein=function(){e(a).is(":visible")||(t.mask&&jf.mask(a,t.maskOpts||{}),jf.drag(a,{range:t.range}),a.keydown=function(e){13==(e||window.event).keyCode&&a.off(n)},e(a).show().css({zIndex:parseInt(e(a.oMask).css("z-index"))+1,left:"50%",top:"50%",marginTop:-(e(a).height()/2),marginLeft:-(e(a).width()/2)}),jf.css3Animate(a,"scaleIn animated"),e(a).find(".define").each(function(){function t(){a.off(n)}e(this).unbind("click",t).bind("click",t)}),e(a).find(".close").each(function(){function t(){a.off()}e(this).unbind("click",t).bind("click",t)}))},a.off=function(t){jf.css3Animate(a,"scaleOut animated",function(){a.oMask&&(e(a.oMask).remove(),delete a.oMask),e(a).hide().css({marginTop:"",marginLeft:""}),t&&t()})},a.comein()}}(jQuery)}(),confirm:function(e,t,n,a){this.tipsList("confirm",e,t,n,a)},alert:function(e,t){this.tipsList("alert",e,t)},tipsList:function(e,t,n,i,s){if(!a){var o=jf.tips.$events[e],r=o.guid++;o[r]={},o[r].str=t,o[r].opts=n||{},o[r].defineCallback=i,o[r].cancelCallback=s,jf.tips.handler(e,r,i,s)}},tips:this.tips||{$events:{alert:{guid:0,passFlag:!0},confirm:{guid:0,passFlag:!0}},handler:function(e,t,n,a){var i=jf.tips.$events[e];jf.tips.forEvent(e,i[t].str,i[t].opts,function(){delete i[t],i.passFlag=!0;var n=t+1;n in i&&jf.tips.handler(e,n,i[n].defineCallback,i[n].cancelCallback)},function(){},n,a)},forEvent:function(e,t,n,a,i,s,o){function r(){n.mask&&jf.mask(d,n.maskOpts||{}),s?(jf.drag(d),$(d.oMask).addClass("ie-block-bg"),d.keydown=function(e){13==(e||window.event).keyCode&&l(s)},$(document).bind("keydown",d.keydown),jf.css3Animate(d,"scaleIn animated"),$(d).find(".jf-tips-define").each(function(){$(this).bind("click",function(){l(s)})}),$(d).find(".jf-tips-cancel").each(function(){$(this).bind("click",function(){l(o)})})):jf.animate(d,{mode:"Back",effect:"easeOut"},{top:-120},"normal",function(){c()})}function c(){jf.tips.offTimer=setTimeout(function(){d.oMask&&jf.animate(d.oMask,{mode:"Quint",effect:"easeIn"},{opacity:0},"normal"),jf.animate(d,{mode:"Back",effect:"easeIn"},{top:g},"normal",function(){d.oMask&&$(d.oMask).remove(),$(d).empty().remove(),a&&a()})},1500)}function l(e){$(document).unbind("keydown",d.keydown),jf.css3Animate(d,"scaleOut animated",function(){d.oMask&&$(d.oMask).remove(),$(d).empty().remove(),e&&e(),a&&a()})}if(jf.tips.$events[e].passFlag){i&&i(),jf.tips.$events[e].passFlag=!1;var d=document.createElement("div"),u='<div class="jf-tips-c">'+t+'</div><div class="jf-tips-ic"></div><div class="jf-tips-ic2"></div><div class="jf-tips-ic3"></div>';s&&(u='<div class="jf-drag"><div class="jf-tips-h"><b>'+(n.confirmTitle||"操作确认")+'</b><a href="javascript:;" class="jf-tips-cancel">X</a></div><div class="jf-tips-c">'+t+'</div><div class="jf-tips-f"><a href="'+(n.open?n.open+'" target="_blank"':'javascript:;"')+' class="jf-tips-define">确定</a><a href="javascript:;" class="jf-tips-cancel">取消</a></div></div>'),$(d).addClass(s?"jf-tips":"jf-tips-t").html(u),$("body").append(d);var g=s?"50%":-($(d).outerHeight(!0)+38),p=-(s?$(d).outerHeight(!0)/2:0);$(d).css({left:0}),$(d).show().css({top:g,marginTop:p,marginLeft:-($(d).outerWidth(!0)/2),left:"50%"}),r()}}},drag:function(e,t){t=t||{};var n,a,i,d,u=function(s){if(i=s.clientX-n,d=s.clientY-a,t.range){var o=jf.winScaleData(),r="minX"in t?t.minX:-parseInt($(e).css("margin-left")),c="maxX"in t?t.maxX:o.minW-$(e).outerWidth(!0),l="minY"in t?t.minY:-parseInt($(e).css("margin-top")),u="maxY"in t?t.maxY:o.cH-$(e).outerHeight(!0);i=new Number(i)._range(r,c),d=new Number(d)._range(l,u)}$(e).css({left:i,top:d,WebkitUserSelect:"none",UserSelect:"none"}),document.body.onselectstart=function(){return!1}},g=function(t){document.body.onselectstart=function(){return!0},$(e).css({webkitUserSelect:"",userSelect:""}),$(document).unbind(r,u),$(document).unbind(c,g),s&&$(document).unbind(l,g)},p=function(t){n=t.clientX-$(e).position().left,a=t.clientY-$(e).position().top,$(document).bind(r,u),$(document).bind(c,g),s&&$(document).bind(l,g),t.stopPropagation()};$(e).find(".jf-drag").unbind(o,p).bind(o,p),$(e).find("img,a,input,select,textarea,button,.stopPropagation").each(function(){function e(e){e.stopPropagation()}$(this).unbind(o,e).bind(o,e)})},css3Animate:function(e,t,n){jf.css3Check()?($(e).addClass(t),jf.css3AnimatedEnd(e,function(){$(e).removeClass(t),n&&n.call(e)})):n&&n.call(e)},mask:function(e,n){if(e.oMask=t.createElement("div"),e.parentNode.insertBefore(e.oMask,e),e.oMask.className="jf-mask",n=n||{},n.animate=n.animate||{},n.css)for(var a in n.css)e.oMask.style[a]=n.css[a];n.animate&&this.animate(e.oMask,n.animate.tween||{mode:"Quint",effect:"easeOut"},n.animate.css||{opacity:30},n.animate.speed||"fast")},loadingIn:function(e,n){this.laddingDB=this.laddingDB||{};var a=this.laddingDB;a.o||(a.o=t.createElement("div"),a.o.className="jf-full-screen-loading",t.body.appendChild(a.o),e=e||{},e.text&&(e.css={width:"86px",height:"70px",backgroundPosition:"center 10px"},e.innerHTML='<div style="text-align:center;color:#efefef;padding-top:46px;line-height:14px;font-size:14px;">加载中...</div>'),this.mask(a.o,e.maskOpts||{css:{zIndex:99998}}),e.css&&$(a.o).css(e.css),e.innerHTML&&$(a.o).html(e.innerHTML),this.css3Animate(a.o,"scaleIn animated",function(){n&&n()}))},loadingOut:function(e){this.laddingDB=this.laddingDB||{};var t=this.laddingDB;if(t.o){var n=0;this.animate(t.o.oMask,{mode:"Quint",effect:"easeIn"},{opacity:0},318,function(){$(t.o.oMask).remove(),n++,n>=2&&(delete t.o,e&&e())}),this.css3Animate(t.o,"scaleOut animated",function(){$(t.o).remove(),n++,n>=2&&(delete t.o,e&&e())})}}},$("head").append('<style>.animated{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;}.animated.infinite {-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;}@-webkit-keyframes scaleIn{0%{opacity:0;-webkit-transform:scale(.3);}100%{opacity:1;-webkit-transform:scale(1);}}@keyframes scaleIn{0%{opacity:0;transform:scale(.3);}100%{opacity:1;transform:scale(1);}}.scaleIn{-webkit-animation-name:scaleIn;animation-name:scaleIn;}@-webkit-keyframes scaleOut {0%{opacity:1;-webkit-transform:scale(1);}100%{opacity:0;-webkit-transform:scale(.3);}}@keyframes scaleOut {0%{opacity:1;transform:scale(1);}100%{opacity:0;transform:scale(.3);}}.scaleOut{-webkit-animation-name:scaleOut;animation-name:scaleOut;}.jf-mask { width:100%;height:100%;left:0;top:0;background:black;opacity:0;filter:alpha(opacity=0);position:fixed;z-index:98888;}.ie-block-bg {background:url(img/ie7-block.gif);}.jf-tips {left: 50%;top:0;margin:0;min-width:280px;max-width:98%;height:auto;line-height:21px;text-align:center;box-shadow:1px 1px 0 white,-1px -1px 0 white,0 2px 15px rgba(35,35,35,.5);border-radius:5px;background:#fff;border: 5px solid #eaeaea;color:#606060;font-size:14px;font-weight: normal;position:fixed;z-index:99888;}.jf-tips-t { position:fixed;z-index:99888;left: 50%;top:0;margin:0;min-width:280px;max-width:98%;height:auto;line-height:21px;text-align: center;box-shadow:1px 1px 0 white,-1px -1px 0 white,0 2px 15px rgba(35,35,35,.5);border-radius:0 0 10px 10px;background:#fff;border:5px solid #eddcbf;border-top:0;color:#606060;font-size:14px;font-weight: normal;display:none;}.jf-tips-c {padding:35px 25px;line-height:21px;cursor:default;}.jf-tips .jf-tips-c {border: 1px solid #ccc;border-width:0 1px 0 1px;}.jf-tips-t .jf-tips-c { padding:135px 60px 15px;}.jf-tips-f { padding:5px 5px 0;background-color: #eaeaea;border-top:1px solid #ccc;box-shadow:0 1px 0 #fff inset;}.jf-tips-f a { margin:0 8px;border:1px solid #c1c1c1;display:inline-block;color:#606060;line-height:100%;padding:4px 20px 5px;border-radius:3px;background:white;background: -webkit-linear-gradient(90deg, #ebebeb , white);background: -moz-linear-gradient(90deg, #ebebeb, white);background: -o-linear-gradient(90deg, #ebebeb, white);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="white", endColorstr="#ebebeb", GradientType="0");}.jf-tips-f a:hover { text-decoration: none;border-color:#90d2ed;color:#007fb0;background:#dff4fc;background:-webkit-linear-gradient(90deg, #dff4fc, white);background:-moz-linear-gradient(90deg, #dff4fc, white);background:-o-linear-gradient(90deg, #dff4fc, white);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="white", endColorstr="#dff4fc", GradientType="0");text-shadow:1px 1px 0 white;}.jf-tips-h {text-indent:10px;text-align:left;line-height:26px;padding-bottom:3px;background-color: #eaeaea;border-bottom:1px solid #ccc;box-shadow:0 -1px 0 #fff inset;color:#333;}.jf-tips-h .jf-tips-cancel {text-indent:0;position:absolute;right:5px;top:2px;line-height:100%;padding:3px 5px;display:block;border-radius:3px;color:#b1b1b1;font:12px/1 "lucida Grande",Verdana,Arial;}.jf-tips-h .jf-tips-cancel:hover { text-decoration: none;background:#ccc;color:white;text-shadow:-1px -1px 0 #c1c1c1;}.jf-drag { cursor: move;}.jf-tips-ic{width:32px;height:32px;position:absolute;left:0;bottom:0;background:url(../rcp-common/imgs/icon/icon-msg.png) no-repeat;}.jf-tips-ic2,.jf-tips-ic3{width:8px;height:8px;border-radius:50%;position:absolute;left:5px;top:122px;background:#b3bc9a;}.jf-tips-ic3{left:auto;right:5px;}.jf-full-screen-loading {width:68px;height:68px;margin:-34px 0 0 -34px;left:50%;top:50%;background:#101010 url(img/loading.gif) no-repeat center center;border-radius:8px;position:fixed;z-index:99999;}</style>')}(window,document),String.prototype._trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype._resetBlank=function(){var e=/\s+/g;return this.replace(e," ")},String.prototype._getNum=function(){var e=/[^\d]/g;return this.replace(e,"")},String.prototype._getCN=function(){var e=/[^\u4e00-\u9fa5\uf900-\ufa2d]/g;return this.replace(e,"")},String.prototype._getLen=function(){var e=this.match(/[\x00-\xff]/g),t=2*this.length;return e&&(t-=e.length),t},String.prototype._limitLen=function(e,t){if(this._getLen()<e)return this.toString();for(var n="",a=0;a<this.length&&(n+=this.charAt(a),!(n._getLen()>=e));a++);return(n+t).toString()},String.prototype._getFileName=function(){var e=/^.*\/([^\/\?]*).*$/;return this.replace(e,"$1")},String.prototype._getExtensionName=function(){var e=/^.*\/[^\/]*(\.[^\.\?]*).*$/;return this.replace(e,"$1")},Number.prototype._range=function(e,t){return parseFloat(this)>t?t:parseFloat(this)<e?e:parseFloat(this)},Number.prototype._lenWithZero=function(e){for(var t=this.toString();t.length<e;)t="0"+t;return t},Number.prototype._chrW=function(){return String.fromCharCode(this)},Number.prototype._dateFormat=function(e){var t=new Date(parseInt(this.toString())),n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e},Date.prototype._format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},Array.prototype._indexOf=function(e){for(var t,n=0;n<this.length;n++)e==this[n]&&(t=n);return t};var module=angular.module("RCP",["ngCookies","LocalStorageModule","ngSanitize"]);module.filter("sanitize",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),module.controller("resolveCtrl",["$rootScope","$scope","$timeout","$anchorScroll","$location","dialog","examReq","service",function(e,t,n,a,i,s,o,r){function c(){t.readyloading=!1,t.readyStyle={}}function l(){var e={aid:t.aid};return o.publishAns(e)}function d(){l().then(function(e){},function(e){console.error(e)})}function u(){var e={aid:t.aid,ret_items:1,ret_score:1,ret_answers:1,eid:"C_SUBMITED"};return o.getListGroup(e)}function g(){u().then(function(e){c(),t.QuestionGroups=e.data.iteml||[],0!==t.QuestionGroups.length&&(e.data.title&&(t.examTitle=e.data.title),e.data.desc&&(t.examDesc=e.data.desc),e.data.ext&&e.data.ext.advise_cost&&(t.examDoTime=e.data.ext.advise_cost),e.data.scores&&e.data.scores[t.currentUser.uid]&&(e.data.scores[t.currentUser.uid].score||0===e.data.scores[t.currentUser.uid].score?t.userAllScore=e.data.scores[t.currentUser.uid].score:console.log("scores 中没有score字段")),angular.forEach(t.QuestionGroups,function(n,a){t.examSectionNum++,t.questionAnswerList[a]=[],angular.forEach(n.items,function(n,i){n.c&&n.c.score?t.examScore+=n.c.score:console.log("没有items.c.score"),n.index=t.examQueNum,n.questionIndex=i,n.groupIndex=a,t.examQueNum++,t.questionAnswerList[a][i]={qid:n.i,qtype:n.t,answer:[]},p(e.data,n.i,n.t,t.questionAnswerList[a][i]),"e_sel"===n.t?n.result=m(t.questionAnswerList[a][i].answer,n.c.answer):"e_fill"===n.t?n.result=h(t.questionAnswerList[a][i].answer,n.c.answer):"e_text"===n.t?n.result="nor":console.error("没有这个题目类型"),"correct"===n.result?n.useScore=n.c.score:n.useScore=0})}),v())},function(e){console.error(e)})}function p(e,n,a,i){if(!e.answers)return void console.log("当前用户没有提交过答案");try{var s=e.answers[t.currentUser.uid];if(!(s[n]&&s[n].answer&&s[n].answer.answer))return;if("e_text"===a)i.answer[0]=s[n].answer.answer;else if("e_sel"===a){angular.forEach(s[n].answer.answer,function(e){i.answer[e]=!0})}else{if("e_fill"!==a)return void console.error("没有这个类型的题目");i.answer=s[n].answer.answer,angular.forEach(i.answer,function(e){e&&console.log(e)})}}catch(o){return void console.log("answers中没有"+t.currentUser.uid)}}function f(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e,t){if(f(e)){if(0===e.length)return"noAnswer";if(e.length!==t.length)return"error";var n=!0;return angular.forEach(t,function(t){e[t]||(n=!1)}),n?e.length===t.length?"correct":void 0:"error"}}function h(e,t){if(f(e)){if(0===e.length)return"noAnswer";var n=!1;return angular.forEach(e,function(e,a){return console.log(e),-1===t[a].indexOf(e)?void(n=!0):void 0}),n?"error":"correct"}}function v(){var e=0;angular.forEach(t.questionAnswerList,function(t){angular.forEach(t,function(t){t.answer.length&&e++})}),t.aProgress={percent:e+"/"+t.examQueNum,ansLen:e}}function x(){t.curToken?(d(),g()):(r.common.toLogin(),c())}t.curToken=rcpAid.getToken(),t.cid="",t.aid=rcpAid.queryString("aid"),t.tid=rcpAid.queryString("tid"),t.eid="",t.logined=!1,t.readyloading=!0,t.errorPaper=!1,t.paperInfo="",t.QuestionGroups="",e.curQuestion=void 0,t.questionAnswerList=[],t.rightSectionFloat=!1,t.examTitle="",t.examSectionNum=0,t.examQueNum=0,t.examStartTime="",t.examDoTime="",t.examScore=0,t.examDesc="",angular.element(document).on("scroll",function(){var e=angular.element(".exam-right-section"),n=e.offset().top,a=angular.element(".exam-left-section"),i=a.offset().top;$(document).scrollTop()>=n&&$(document).scrollTop()>=i?t.rightSectionFloat=!0:t.rightSectionFloat=!1;try{t.$digest()}catch(s){console.log(s)}}),t.$on("login",function(e,n){return n?void(t.logined=!0):void(t.logined=!1)}),t.readyStyle={height:0,overflow:"hidden"},t.changeGroup=function(e,n){t.curQuestionGroup=e,t.curPageList=t.QuestionGroups[e].items},t.toLocationGroup=function(e){n(function(){$("html,body").stop(!0,!0).animate({scrollTop:$("#groupTitle-"+e).offset().top},"normal")},200)},t.toLocationQuestion=function(e){console.log(e),n(function(){$("html,body").stop(!0,!0).animate({scrollTop:$("#question-"+e.index).offset().top},"normal")},200),console.log(t.questionAnswerList)},t.totalOvClass=function(e){var n=t.questionAnswerList[e.groupIndex][e.questionIndex].done;return n?"visited":void 0},t.doAgain=function(){window.location.href=rcpAid.getUrl("做题页",{aid:t.aid})},x()}]),module.factory("examReq",["request",function(e){var t=DYCONFIG.course.rUrl;return{getListGroup:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"pub/api/listGroup",params:n};return e(angular.extend(i,a||{}))},getListItemL:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"pub/api/listItemL",params:n};return e(angular.extend(i,a||{}))},answerPaper:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"usr/api/answer",params:n,option:{loading:!1}};return e(angular.extend(i,a||{}))},startAnswer:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"usr/api/startAnswer",params:n};return e(angular.extend(i,a||{}))},doneAnswer:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"usr/api/doneAnswer",params:n};return e(angular.extend(i,a||{}))},listExam:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"usr/api/listExam",params:n};return e(angular.extend(i,a||{}))},publishAns:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"usr/api/publish",params:n};return e(angular.extend(i,a||{}))},correctPaper:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"usr/api/correct",params:n};return e(angular.extend(i,a||{}))},listCourseRef:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"pub/api/listRef",params:n};return e(angular.extend(i,a||{}))},createPaper:function(n,a){n.token=rcpAid.getToken();var i={method:"GET",url:t+"art/api/create",params:n};return e(angular.extend(i,a||{}))},insertTest:function(n,a){n.params.token=rcpAid.getToken();var i={method:"POST",url:t+"usr/api/upsertTest",params:n.params,data:n.data};return e(angular.extend(i,a||{}))}}}]),module.run(["service","examReq",function(e,t){e.expand("examReq",function(){return t})}]),module.config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate",function(e){return function(t,n){e(t,n),console.error({origin:"AngularJS Error",msg:t.message,stack:t.stack}),document.runErrorCallUpgrade()}}])}]),module.controller("mainCtrl",["$scope","$rootScope","$http","service","$cookies","$timeout",function(e,t,n,a,i,s){function o(){var e=localStorage.getItem("anonymousLoginUsr");return e&&"error"!==e?(t.anonymousUser=JSON.parse(e),void(i.stoken=t.anonymousUser.token)):void n({method:"GET",url:"http://"+g_conf.SSO+"/sso/api/anonymousLogin"}).then(function(e){if(0!==e.data.code)return console.error(e.data.msg,"匿名登录失败"),void localStorage.setItem("anonymousLoginUsr","error");var n=e.data.data;n.usr.token=n.token,localStorage.setItem("anonymousLoginToken",n.token),delete n.usr.BAttr,delete n.usr.attrs,localStorage.setItem("anonymousLoginUsr",JSON.stringify(n.usr)),t.anonymousUser=n.usr,i.stoken=n.usr.token},function(e){localStorage.setItem("anonymousLoginUsr","error"),console.error(e,"匿名登录失败")})}function r(n){R.token=rcpAid.getToken(),e.setUserData(UINFO),l(t.currentUser.role),console.log("checkLogin by token")}function c(e){console.log("未登陆",e),rcpAid.isLogin=0,l({}),s(function(){t.$broadcast("login","")},0)}function l(t){function n(t){angular.forEach(t,function(t){var n=!1;angular.forEach(e.itemList,function(e){t.name===e.name&&(n=!0)}),n||e.itemList.push(t)})}function a(){var e=rcpAid.getUrl,t=[];return angular.forEach(arguments,function(n){switch(n){case"学习中心":t.push({ic:"L2",name:n,href:e(n)});break;case"教学中心":t.push({ic:"L2",name:n,href:e(n)});break;case"助学中心":"undefined"==typeof isIE||isIE(9,9)||t.push({ic:"L2",name:n,href:e(n)});break;case"管理中心":t.push({ic:"L1",name:n,href:e(n)});break;case"创建新课程":t.push({ic:"L4",name:n,href:e("创建课程",{type:10})})}}),t}e.itemList=[],angular.forEach(t,function(t,i){switch(i){case"default":break;case"student":e.user.schoolId&&n(a("学校空间")),e.user.classId&&n(a("班级空间"));break;case"parent":n(a("家长空间"));break;case"teacher":e.user.schoolId&&n(a("学校空间")),e.user.classId&&n(a("班级空间"));break;case"help":n(a("助学中心"));break;case"class":n(a("班级空间","学校空间"));break;case"school":n(a("学校空间"));break;case"UCS_ADMIN":n(a("管理中心"));break;case"COURSE_VERIFY_ADMIN":n(a("管理中心"));break;case"PAGE_EDIT_ADMIN":n(a("管理中心"))}}),n(a("学习中心","教学中心","创建新课程","创建新题库"))}function d(){return t.currentUser={},$("body").show(),a.common.checkLogin(r,c),rcpAid.isLogin?void 0:(console.log("未登陆"),void o())}$("body").show();try{R=new ars.ARS,R.args={},R.delay=1e3,R.pushDelay=1e4,R.url=DYCONFIG.ars.rUrl+"pub/api/record",R.token=rcpAid.getToken(),R.start()}catch(u){R={}}e.setUserData=function(e){try{if(console.log(e),!e.uid)return;t.currentUser={uid:e.usr.id,nickName:e.usr.attrs.basic.nickName,avatar:e.usr.attrs.basic.avatar,desc:e.usr.attrs.basic.desc,role:e.usr.attrs.role||""},e.usr.attrs.pass&&(t.currentUser.certification=e.usr.attrs.pass.certification),console.log("发广播",t.currentUser),s(function(){t.$broadcast("login",t.currentUser)},0)}catch(n){console.log(n)}},d()}]),module.directive("examQuestions",function(){return{template:'<div ng-class=" (data.result === \'error\' || data.result === \'noAnswer\') && resolvestatus===1 ? \'a-q error\' : resolvestatus ? \'a-q\' : \'a-q has-border\'" id="question-{{data.index}}" q-type="{{qType}}"><div class="inw"><span class="k-num">{{data.index+1}}. <span ng-show="qIType === \'e_sel\' && qCType === \'single\'">【单选题】</span> <span ng-show="qIType === \'e_sel\' && qCType === \'multi\'">【多选题】</span> <span ng-show="qIType === \'e_sel\' && qCType === \'judge\'">【判断题】</span> <span ng-show="qIType === \'e_fill\'">【填空题】</span> <span ng-show="qIType === \'e_text\' ">【简答题】</span></span><div class="question-style" ng-bind-html="data.c.text | sanitize" ng-show="qIType !== \'e_fill\'"></div><div class="question-style" ng-bind-html="data.mytext | sanitize" ng-show="qIType=== \'e_fill\'"></div><div class="choose" ng-if="qIType === \'e_sel\'"><ul><li ng-repeat="d in option track by $index" ng-click="select(d,$index)" ng-class="{\'option-hover\':!resolvestatus ,\'option\':true}"><div ng-hide="resolvestatus" class="hover-bg"></div><div class="label"><label class="my-single-input" ng-show="qCType === \'single\'"><label ng-class="{\'single-checked\':isClicked[$index]}"></label><label ng-class="optionClass(data,$index)"></label></label><label class="my-judge-input" ng-class="{\'judge-checked-t\': isClicked[$index],\'{{optionClass(data,$index)}}\': resolvestatus}" ng-show="qCType ===\'judge\'"><label ng-class="{\'judge-checked-r\':isClicked[$index],\'judge-unchecked-r\':!isClicked[$index]}" ng-show="$index === 0"></label><label ng-class="{\'judge-checked-e-up\':isClicked[$index],\'judge-unchecked-e-up\':!isClicked[$index]}" ng-show="$index === 1"></label><label ng-class="{\'judge-checked-e-dw\':isClicked[$index],\'judge-unchecked-e-dw\':!isClicked[$index]}" ng-show="$index === 1"></label></label><label class="my-multi-input" ng-show="qCType === \'multi\'"><label ng-class="{\'multi-checked\':isClicked[$index]}"></label><label ng-class="optionClass(data,$index)"></label></label><span width="20" style="white-space:nowrap;float:left;margin:0 0 0 10px" ng-hide="qIType === \'e_text\'" ng-bind="toChar($index)+\' .\'"></span><div style="padding-left:55px"><span ng-bind-html="d | sanitize"></span></div></div></li></ul></div><div class="choose" ng-if="!resolvestatus && qIType === \'e_fill\'"><ul><li ng-repeat="d in data.fill track by $index" class="option"><span class="mg-r10 gray-c">( {{$index+1}} )</span> <input type="text" id="q-input-{{data.index}}-{{$index}}" class="fill-input" ng-model="data.fill[$index]" ng-focus="setFillAnswer($index)" ng-blue="setFillAnswer($index)" ng-keyup="setFillAnswer($index)" placeholder="请输入你的答案"></li></ul></div><div class="answer" ng-if="!resolvestatus && qIType === \'e_text\' " style="border:none"><div class="answerIntro">答题区:</div><textarea id="ck-{{data.index}}" width="100%" height="230" ng-model="data.answerContent" ng-click="setText()"></textarea></div><div style="margin-top:20px" ng-show="seeanddo"><button style="background-color:transparent;border:0 solid;font-size:14px;color:#999;text-align:center;cursor:pointer" ng-click="seeanddoTemp = !seeanddoTemp">查看解析 |</button> <i class="fa fa-star-o" style="color:#999"></i> <button style="background-color:transparent;border:0 solid;font-size:14px;color:#999;text-align:center">收藏</button></div></div><div ng-show="resolvestatus" ng-class="\'resolve \'"><div class="top-triangle"></div><div class="inw" ng-show="qIType != \'e_text\'"><i ng-class="{\'fa fa-meh-o noanswer\':data.result === \'noAnswer\',\'fa fa-frown-o error\': data.result === \'error\',\'fa fa-smile-o correct\':data.result === \'correct\'}" class="face-image"></i> <span ng-show="data.result === \'noAnswer\'" class="noanswer">未作答</span> <span ng-show="data.result === \'error\'" class="error">回答错误</span> <span ng-show="data.result === \'correct\'" class="correct">回答正确</span><p ng-show="qCType == \'single\' || qCType == \'multi\' || qCType == \'judge\'">正确答案是 <span ng-repeat="ans in data.c.answer track by $index" ng-bind="toChar(ans)" class="correctspan"></span></p><p ng-show="data.result === \'error\' && qIType === \'e_sel\'">您的答案是 <span ng-bind="toNum(answerlist[data.groupIndex][data.questionIndex].answer)" class="errorspan"></span></p><div ng-show="qIType == \'e_fill\'"><p>正确答案是</p><span ng-show="!data.c.answer">空</span><div ng-repeat="d in data.c.answer track by $index" class="answer-position"><span class="gray-c f-l">( {{$index+1}} )</span> <span class="f-l" ng-repeat="ans in d track by $index" style="color:#2bc866"><span ng-bind="ans+\'/\'" ng-show="$index !== (d.length-1)"></span> <span ng-show="$index === (d.length-1)" ng-bind="ans"></span></span><div class="clear"></div></div><div class="clear"></div><div ng-show="data.result === \'error\'"><p>您的答案是</p><span ng-repeat="d in answerlist[data.groupIndex][data.questionIndex].answer track by $index" class="answer-position"><span class="gray-c f-l">( {{$index+1}} ) </span><span class="f-l" ng-bind="d" ng-class="{\'correctspan\':data.c.answer[$index].indexOf(d) !== -1,\'errorspan\':data.c.answer[$index].indexOf(d) === -1}"></span></span></div><div class="clear"></div></div><p>本题被作答<span>555</span>次 , 正确率为<span>80%</span> <button class="resolve-show" ng-click="showResolveTemp = !showResolveTemp" ng-show="!showResolveTemp">试题解析 <i class="fa fa-angle-down"></i></button> <button class="resolve-show" ng-click="showResolveTemp = !showResolveTemp" ng-show="showResolveTemp">试题解析 <i class="fa fa-angle-up"></i></button></p><div class="resolve-info-div" ng-show="!showResolveTemp"><span class="span1">【解析】</span><div class="desc" ng-bind-html="data.c.analyze | sanitize"></div></div><div style="border-top:1px solid #bcbcbc;font-size:16px;color:#535353;padding-top:23px" ng-show="resolvestatus === 2"><span class="f-l">得分：</span><div style="float:left;width:180px;height:30px;background-color:#ededed;position:relative;top:-3px;left:15px;text-align:center;color:#ff6159;font-size:16px"><span ng-bind="data.c.score" ng-show="data.result === \'correct\'" style="vertical-align:middle"></span> <span ng-show="data.result !== \'correct\'" style="vertical-align:middle">0</span></div><span style="position:relative;left:30px">(本题共<span ng-bind="data.c.score"></span>分)</span></div></div><div class="inw" ng-show="qIType == \'e_text\'"><div class="cyan-c mg-b10">您的答案是： <span ng-show="!data.answer.aItem[0]">空</span><div class="max" ng-bind-html="data.answer.aItem[0] | sanitize"></div></div><div class="resolve-info-div"><span class="span1">【解析】</span><div class="desc" ng-bind-html="data.c.analyze | sanitize"></div></div><button class="add-button" ng-click="textResolveTemp = !textResolveTemp" ng-show="resolvestatus === 2">补充解析</button><div ng-show="textResolveTemp && resolvestatus === 2"><div class="resolve-text"><dyeditor class="my-dyedit" model="resolveContent" exceed="circle.exceed" config="{id:\'reply-circle-\'+$index,len:150,style:{minHeight:80,overflow:\'auto\'},placeholder:\'请输入内容\'}"></dyeditor><button ng-click="correctPaper()">提交</button></div></div><div class="gain-score" ng-show="resolvestatus === 2"><span class="f-l">得分：</span> <input class="gain-input" ng-model="inputscore" ng-blur="correctPaper()"> <span class="gain-span">(本题共<span ng-bind="data.c.score"></span>分)</span></div></div></div><div ng-show="seeanddo && seeanddoTemp" ng-class="\'resolve \'"><div class="top-triangle"></div><div class="inw" ng-show="qIType != \'e_text\'"><p ng-show="qCType == \'single\' || qCType == \'multi\' || qCType == \'judge\'">正确答案是 <span ng-repeat="ans in data.c.answer track by $index" ng-bind="toChar(ans)" class="correctspan"></span></p><div ng-show="qIType == \'e_fill\'"><p>正确答案是</p><span ng-show="!data.c.answer">空</span><div ng-repeat="d in data.c.answer track by $index" class="answer-position"><span class="gray-c f-l">( {{$index+1}} )</span> <span class="f-l" ng-repeat="ans in d track by $index" style="color:#2bc866"><span ng-bind="ans+\'/\'" ng-show="$index !== (d.length-1)"></span> <span ng-show="$index === (d.length-1)" ng-bind="ans"></span></span><div class="clear"></div></div><div class="clear"></div></div><p>本题被作答<span>555</span>次 , 正确率为<span>80%</span> <button class="resolve-show" ng-click="showResolveTemp = !showResolveTemp" ng-show="!showResolveTemp">试题解析 <i class="fa fa-angle-down"></i></button> <button class="resolve-show" ng-click="showResolveTemp = !showResolveTemp" ng-show="showResolveTemp">试题解析 <i class="fa fa-angle-up"></i></button></p><div class="resolve-info-div" ng-show="!showResolveTemp"><span class="span1">【解析】</span><div class="desc" ng-bind-html="data.c.analyze | sanitize"></div></div></div><div class="inw" ng-show="qIType == \'e_text\'"><div class="resolve-info-div"><span class="span1">【解析】</span><div class="desc" ng-bind-html="data.c.analyze | sanitize"></div></div></div></div></div>',
restrict:"E",replace:!0,transclude:!0,scope:{data:"=data",answerlist:"=",resolvestatus:"=",seeanddo:"=",correctingarg:"="},controller:["$scope","$rootScope","$element","$attrs","examQuestionsFactory","$timeout",function(e,t,n,a,i,s){console.log(e.curquestion),e.qIType="",e.qCType="",e.toChar=function(e){return String.fromCharCode(65+e)},e.toNum=function(e){var t="";return angular.forEach(e,function(e,n){e&&(t+=String.fromCharCode(65+n))}),t},e.$watch("data",function(a,s){e.data&&(e.qIType=e.data.t,e.qCType=e.data.c.type),e.resolvestatus?i.resolve(e.qIType,e.qCType,e):i.doTitle(e.qIType,e.qCType,e,t,n)},!0)}]}}),module.factory("examQuestionsFactory",["$timeout","$interval","$log","dialog","examReq",function(e,t,n,a,i){var s={resolveContrastEvent:{single:function(e,t,n){return e.c&&e.c.answer&&null!==e.c.answer?e.c.answer.length?t===e.c.answer[0]?"correct":n.answerlist[e.groupIndex][e.questionIndex].answer[t]?"error":"":(console.log("没有标准答案"),""):void 0},multi:function(e,t,n){return e.c&&e.c.answer&&null!==e.c.answer?e.c.answer.length?-1===e.c.answer.indexOf(t)||n.answerlist[e.groupIndex][e.questionIndex].answer[t]?-1!==e.c.answer.indexOf(t)&&"error"===e.result&&n.answerlist[e.groupIndex][e.questionIndex].answer[t]?"middle":-1!==e.c.answer.indexOf(t)?"correct":-1===e.c.answer.indexOf(t)&&n.answerlist[e.groupIndex][e.questionIndex].answer[t]?"error":"":"correct":(console.log("没有标准答案"),""):void 0},fill:function(e,t){var n=/__/g,a=/__/;if(t.answerlist)try{var i=t.data.c.text.match(n)||[];if(console.log(i),i.length||i[0]){var s=t.data.c.text;console.log(t.data.c.text),angular.forEach(i,function(e,t){s=s.replace(a," <span class='fill-val' style='text-decoration:underline;' >　<span>("+(t+1)+")</span>　</span> ")}),t.data.mytext=s}else t.data.mytext=t.data.c.text.replace(n," <span class='fill-val' style='color:#f17008;text-decoration:underline;'>　<span></span>　</span> ")}catch(o){console.error(o)}}},resolve:function(e,t,n){function a(e,a){var i;switch(e){case"e_sel":switch(t){case"judge":case"single":i=s.resolveContrastEvent.single(a.q,a.d,n);break;case"multi":i=s.resolveContrastEvent.multi(a.q,a.d,n)}break;case"e_fill":i=s.resolveContrastEvent.fill(a.q,n)}return i}function o(){if(2===n.resolvestatus){var e=!0;n.$watch("inputscore",function(t,a){return void 0===t&&(t=0),void 0===a&&(a=0),isNaN(t)||isNaN(a)?(console.log("输入非法"),void(n.inputscore="")):(0!==t&&e&&(n.correctingarg.leftQuestion--,e=!1),t||e||(e=!0,n.correctingarg.leftQuestion++),n.correctingarg.userScore=n.correctingarg.userScore-Number(a),void(n.correctingarg.userScore=n.correctingarg.userScore+Number(t)))})}}function r(){switch(console.log(e),e){case"e_sel":n.data.c&&n.data.c.options&&(n.option=n.data.c.options);break;case"e_fill":a(e,{q:n.data});break;case"e_text":o();break;default:console.error("不存在当前类型")}}n.optionClass=function(i,s){if(!n.resolvestatus)return"";var o=a(e,{q:i,d:s});if("e_sel"===e)switch(t){case"single":if("correct"===o)return"my-single-input-right";if("error"===o)return"my-single-input-wrong";break;case"judge":if("correct"===o)return"my-judge-input-right";if("error"===o)return"my-judge-input-wrong";break;case"multi":if("correct"===o)return"my-multi-input-right";if("error"===o)return"my-multi-input-wrong";if("middle"===o)return"my-multi-input-middle"}},n.correctPaper=function(){if(""!==n.inputscore&&void 0!==n.inputscore){var e={asid:n.data.answerId,score:n.inputscore,analyze:n.resolveContent};i.correctPaper(e).then(function(e){},function(e){console.error(e)})}},r()},doTitleEvent:{choice:function(e,t,n,a){function i(e){for(var t=0;t<n.isClicked.length;t++)e===t?n.isClicked[t]=!0:n.isClicked[t]=!1;n.answerlist[n.data.groupIndex][n.data.questionIndex].done=!0}var s=0;n.isClicked=n.answerlist[n.data.groupIndex][n.data.questionIndex].answer,n.option=[],angular.forEach(n.data.c.options,function(e,t){n.option.push(e.slice(3,e.length-4)),n.isClicked[t]?s++:n.isClicked[t]=!1}),n.select=function(e,a,o){if(!n.resolvestatus){"multi"!==t?i(a):(n.isClicked[a]=!n.isClicked[a],n.isClicked[a]?s++:s--,0==s?n.answerlist[n.data.groupIndex][n.data.questionIndex].done=!1:n.answerlist[n.data.groupIndex][n.data.questionIndex].done=!0),o&&o.stopPropagation()}}},fill:function(e,t,n){function a(){var e=/__/g,n=/__/,a=t.data.c.text.match(e)||[];if(t.data.fill){var o=t.data.c.text;angular.forEach(a,function(e,a){o=t.data.fill&&""!==t.data.fill[a]?o.replace(n," <span class='fill-val' style='text-decoration:underline;' >　<span>"+t.data.fill[a]+"</span>　</span> "):o.replace(n," <span class='fill-val' style='text-decoration:underline;' >　<span>("+(a+1)+")</span>　</span> ")}),t.data.mytext=o}else t.data.mytext=t.data.c.text.replace(e," <span  style='text-decoration:underline;' > 　</span>"),t.data.fill=[],angular.forEach(a,function(e,n){t.answerlist[i][s].answer[n]?t.data.fill.push(t.answerlist[i][s].answer[n]):t.data.fill.push("")})}var i=t.data.groupIndex,s=t.data.questionIndex;t.myfilltest=function(){console.log("This is myfilltest")},t.setFillAnswer=function(){for(var e=!1,n=0;n<t.data.fill.length;n++)t.answerlist[i][s].answer[n]=t.data.fill[n],t.data.fill[n]&&""!=t.data.fill[n]&&(e=!0);e?t.answerlist[i][s].done=!0:t.answerlist[i][s].done=!1},a()},text:function(e,t,n,a){var i=t.data.groupIndex,s=t.data.questionIndex;console.log("this is text "+t.data.answerContent),t.answerlist[i][s].answer[0]&&void 0===t.data.answerContent&&(t.data.answerContent=t.answerlist[i][s].answer[0]),t.answerlist[i][s].answer[0]=t.data.answerContent,t.data.answerContent?t.answerlist[i][s].done=!0:t.answerlist[i][s].done=!1,t.setText=function(){}}},doTitle:function(e,t,n,a,i){function o(){switch(e){case"e_sel":s.doTitleEvent.choice(e,t,n,a);break;case"e_fill":s.doTitleEvent.fill(e,n,a);break;case"e_text":s.doTitleEvent.text(e,n,a,i)}}o()}};return s}]),module.factory("headSearch",["request",function(e){var t=g_conf.pes.rUrl;return{SearchIntelligent:function(n,a){var i={method:"GET",url:t+"pub/api/SearchIntelligent",params:n,option:{loading:!1}};return e(angular.extend(i,a||{}))}}}]),module.run(["service","headSearch",function(e,t){e.expand("headSearch",function(){return t})}]),module.directive("headnav",function(){return{template:'<header><div ng-class="headMaximizeLock ? \'head-maximize\' : \'head-minimize\'"><div ng-class="param.style"><div class="image-head-rainbow decoration-ic"></div><section class="g-m-w header-area"><div class="minimize-logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.small}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><nav class="minimize-nav"><ul><li ng-repeat="item in navList track by $index" ng-class="item.class"><a ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}">{{item.name}}</a><div ng-if="item.child.length"><ul><li ng-repeat="c in item.child"><a ng-href="{{c.href || \'\'}}" target="{{c.target || \'_self\'}}">{{c.name}}</a></li></ul></div></li></ul></nav><div class="logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.large}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><div class="top-user-menu-bar" ng-class="{clearminw: user.account}"><top-user-menu user="user" item-list="itemList"></top-user-menu></div><div class="h-sc" ng-controller="headSearchCtrl"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index, \'资源\')"><div class="text-of pd-r10"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a class="item-name" ng-bind-html="item.name | titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a ng-href="javascript:void(0);" ng-click="goToSort(item.name)" class="mg-r20" ng-repeat="item in scHotWord">{{item.name}}</a></div></div></section><section class="nav-area"><div class="g-m-w"><div class="n-categories" ng-controller="categoriesCtrl" ng-mouseenter="service.mouseenter(hover)" ng-mouseleave="service.mouseleave(hover)"><div class="dt">全部课程</div><div class="dd" id="by-categories" ng-show="categoriesUnfoldLock || hover.mouseEnterLock"><div class="image-giraffe giraffe-icon"></div><div class="dd-inner"><div class="item" ng-repeat="item in categoriesListStyle1 track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)" ng-show="$index<5 || hover.mouseEnterLock"><div class="layer"><h3><a ng-href="goToCategory(item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><div class="hot-word"><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="text-of" ng-repeat="child in item.child track by $index" ng-show="$index<3" title="{{child.name}}">{{child.name}}</a></div><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<3"><dt><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<15" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>3"><a ng-href="goToCategory(item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div><div ng-repeat="list in categoriesListStyle2 track by $index"><div class="big-sort"><a ng-href="goToCategory(item.name)" target="_blank" title="{{list.name}}">{{list.name}}</a></div><div class="item" ng-repeat="item in list.child track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)"><div class="layer"><h3><a ng-href="goToCategory(list.name,item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<4"><dt><a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(list.name,item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<10" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>4"><a ng-href="goToCategory(list.name,item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div></div></div></div></div><nav class="nav"><a ng-repeat="item in navList track by $index" ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}" ng-class="item.class">{{item.name}}</a></nav><div class="extra" ng-show=""><a href="javascript:void(0);" class="icf t-icf">名师认证</a> <a href="javascript:void(0);" class="icf e-icf">真实评价</a> <a href="javascript:void(0);" class="icf r-icf">随时退</a></div></div></section></div></div></header>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user",nav:"="},controller:["$rootScope","$scope","$element","$attrs","service",function(e,t,n,a,i){t.service=i,t.catType=parseInt(rcpAid.getCourseCat()),e.$watch("headMaximizeLock",function(e){e&&(t.headMaximizeLock=e)}),e.$watch("categoriesUnfoldLock",function(e){e&&(t.categoriesUnfoldLock=e)}),e.$watch("catDomain",function(e){if(e)switch(e){case"aikexue.com":t.init(2)}}),t.$on("login",function(e,n){n&&t.loginInit()}),t.loginInit=function(){3===t.catType&&(t.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:t.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}])},t.init=function(e){if("order"===t.nav)return t.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"个人空间",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],void(t.param={logo:{small:"/rcp-common/imgs/order/head-icon.png",large:"/rcp-common/imgs/icon/head-icon.png",href:"/my-order.html",msg:"我的酷校"},style:""});switch(t.catType){case 3:t.isLogin?t.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:t.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}]:t.navList=[{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}],t.param={logo:{small:"/rcp-common/imgs/icon/gzmooc-logo.png",large:"/rcp-common/imgs/icon/gzmooc-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校 - 首页"},style:""};break;case 2:t.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"全部课程",href:rcpAid.getUrl("分类"),"class":"key",target:"_blank"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],t.param={logo:{small:"/rcp-common/imgs/icon/aikexue-logo-2.png",large:"/rcp-common/imgs/icon/aikexue-logo.png",href:DYCONFIG.rcp.rUrl,msg:"爱科学"},style:"aikexue-head"};break;default:t.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"我要吐槽",href:rcpAid.getUrl("我要吐槽"),"class":"key",target:"_blank"}],t.param={logo:{small:"/rcp-common/imgs/icon/book-logo-2.png",large:"/rcp-common/imgs/icon/book-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校LOGO·让学习更Cool"},style:""}}},t.init()}]}}),module.directive("topUserMenu",function(){return{template:'<div class="top-user-menu"><div style="font-size:14px;line-height:40px" ng-show="!currentUser.uid"><a ng-href="{{link.login}}" id="login" class="color-cyan pd-l20"><i class="image-login-user-ic"></i>马上登录 </a><span style="color:#ececec;margin:0 8px">| </span><a ng-href="{{link.register}}" class="color-cyan">注册</a></div><div class="menber-link" ng-show="currentUser.uid"><a href="" class="u-info" rel="member_link"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <span class="name" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></span> <i class="x-arrow-dowm">&gt;</i></a><div class="u-panel"><div class="tup-box"><div class="tup-info" rel="user_info_box"><div class="user-head" rel="user_face_box"><a ng-href="{{link.setting}}"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"></a></div><div class="user-identity"><p class="user-name text-of"><a href="" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></a></p><p class="attestation-un" ng-class="{\'attestation\':attestation==\'已认证\'}"><i class="image-attestation-yellow"></i> <span>{{attestation}}</span></p></div><div class="clear"></div></div><div class="tup-operate"><div class="card-sets"><a href="{{link.applySpaceUrl}}" class="key f-l"><i class="image-attestation"></i> <span class="text-4f">认证管理</span> </a><a href="{{link.setting}}" target="_blank" class="key f-l"><i class="image-settings"></i> <span class="text-4f">设置</span> </a><a href="" class="key f-r" ng-click="logout()"><i class="image-logout"></i> <span class="text-4f">退出</span></a></div><div class="card-links"><a ng-repeat="item in itemList" ng-href="{{item.href || \'\'}}" ng-class="item.name == \'...\' ? \'disabled key \'+item.icon : \'key \'+item.icon"><i></i> <span>{{item.name}}</span></a></div></div></div></div></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user"},controller:["$rootScope","$scope","$timeout","$location","service",function(e,t,n,a,i){t.$watch("itemList",function(e){if(e){var n=t.itemList.length,a=n%3;if(a)for(var i=3-n%3+n,s=n;i>s;s+=1)e.push({name:"..."})}},!0),t.logout=function(){var e=rcpAid.getUrl("首页");location.href=rcpAid.getUrl("退出",{url:encodeURIComponent(e)})},t.$on("login",function(e,n){n.uid&&t.loginInit()}),t.loginInit=function(){t.currentUser=e.currentUser,t.currentUser.certification&&(t.attestation="已认证")},t.init=function(){var e=rcpAid.getNoTokenUrl();t.link={login:rcpAid.getUrl("登录",{url:encodeURIComponent(e)}),register:rcpAid.getUrl("注册",{url:encodeURIComponent(e)}),applySpaceUrl:rcpAid.getUrl("实名认证"),setting:rcpAid.getUrl("个人设置",{url:window.location.href})},t.attestation="未认证"},t.init()}]}}),module.controller("categoriesCtrl",["$rootScope","$scope","service",function(e,t,n){function a(e){switch(e){case 2:t.categoriesListStyle2=i||[];break;default:t.categoriesListStyle1=i||[]}}t.service=n,t.hover={},t.catType=rcpAid.getCourseCat(),t.byCategories=function(){t.byCategoriesLoading=!0,a(t.catType)},t.listenerMember={byCategories:{node:"#by-categories",callback:t.byCategories}};var i;t.goToCategory=function(){var e=[].slice;return rcpAid.getUrl("分类",{tags:e.call(arguments,0).join(",")})}}]),module.directive("searchDir",function(){return{template:'<div class="h-sc"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-repeat="item in mcCategoryList track by $index" ng-if="$index < lMaxLen" ng-class="{hover: $index == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'类\')" ng-click="matchGoToCategory(item.tag,scText)"><div class="text-of"><a href="javascript:;">{{text}}</a> 在 <a href="javascript:;" class="item-name color-cyan">{{item.tag}}</a> 分类中搜索</div></li></ul><div style="margin:0 10px;border-top:1px solid #dfdfdf" ng-if="mcCourseList.length && mcCategoryList.length"></div><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'资源\')"><div class="text-of"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a href="javascript:;" class="item-name" ng-bind-html="item.name|titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a href="" class="mg-r20" ng-repeat="item in scHotWord" ng-click="goToSort(item.name)">{{item.name}}</a></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{hot:"="},controller:"headSearchCtrl"}}),module.controller("headSearchCtrl",["$rootScope","$scope","$document","$element","service","headSearch",function(e,t,n,a,i,s){function o(){t.scText="",u()}function r(){y=!0,t.KeyDownIndex=t.moveKeyIndex,d()}function c(){"number"!=typeof t.moveKeyIndex?t.moveKeyIndex=0:t.moveKeyIndex=(t.moveKeyIndex+1)%t.aMaxLen,r()}function l(){"number"!=typeof t.moveKeyIndex?t.moveKeyIndex=t.aMaxLen-1:t.moveKeyIndex=t.moveKeyIndex<0?t.aMaxLen-1:t.moveKeyIndex-1,r(),f(t.scText.length)}function d(){var e,n=t.KeyDownIndex,a=t.lMaxLen;return t.scTag=void 0,a>n&&(t.scText=t.text),n>=a&&(e=t.mcCourseList[n-t.lMaxLen],e&&(t.scText=e.name)),e}function u(e){t.matchReadyLock=!1,e&&(n.unbind("click"),t.$digest())}function g(){n.unbind("click").bind("click",function(){u("digest")}),t.matchReadyLock=!0}function p(){t.matchReadyLock&&(clearTimeout(b),b=setTimeout(function(){u("digest")},300))}function f(e){var t=a.find('input[ng-model="scText"]').get(0);if("selectionStart"in t&&(t.selectionStart=e,t.selectionEnd=e),"createTextRange"in t){var n=t.createTextRange();n.moveStart("character",e),n.collapse(!0),n.select()}}function m(e,n){t.inSort&&!angular.isArray(e)||angular.forEach(e,function(e){return t.inSort?!1:void(n(e)||angular.isArray(e.child)&&e.child.length&&(m(e.child,n),v("push",e.name)))})}function h(e,n){switch(t.inSort=!1,v("clear"),m(e,function(e){return t.inSort=e.name===n,t.inSort&&v("push",e.name),t.inSort}),t.inSort){case!0:v("splice",n);break;default:v("clear")}return t.categorySelect}function v(e,n){var a=t.categorySelect;switch(e){case"clear":a.splice(0,a.length);break;case"push":a.push(n);break;case"splice":a.splice(0,$.inArray(n,a))}}function x(e,t){i.dialog.alert(t),console[e](t)}function w(e){var t=[];if(e.length)for(var n=0,a=e.length;a>n;n++)t.push({id:e[n].hasOwnProperty("id")?e[n].id:"",name:e[n].hasOwnProperty("title")?e[n].title:"",t:e[n].hasOwnProperty("type")?e[n].type:""});return t}t.scHotWord=[],t.scSelect=[{name:"所有分类",value:"",fixLock:!0},{name:"课程",value:10},{name:"题库",value:20}],t.scSelectVal=t.scSelect[0],t.onkeydown=function(e){switch(e.stopPropagation(),e.keyCode){case 13:t.scText||(t.scText=$(".head-search-bar input").eq(0).val());var n=t.KeyDownIndex,a=t.lMaxLen;"number"==typeof n&&n>=0&&a>n&&t.scTag?t.matchGoToCategory(t.scTag,t.scText):n>=0&&t.matchReadyLock?location.href=rcpAid.getUrl("课程详情",{cid:t.mcCourseList[n].id}):t.goToSearch(t.scSelectVal.value,t.scText);break;case 38:l();break;case 40:c();break;default:y=!1,t.moveKeyIndex=void 0,t.KeyDownIndex=void 0,t.scTag=void 0}};var y,b;a.find('input[ng-model="scText"]').unbind("focus").bind("focus",g),a.find('input[ng-model="scText"]').unbind("blur").bind("blur",p),t.mouseenter=function(e,n){switch(n){case"类":t.moveKeyIndex=e;break;case"资源":t.moveKeyIndex=e+t.lMaxLen}},t.goToSearch=function(e,t){o(),location.href=rcpAid.getUrl("搜索",{type:e,query:t?encodeURIComponent(t):t})},t.goToSort=function(e){o(),location.href=rcpAid.getUrl("分类",{tags:e})},t.stopPropagation=function(e){e.stopPropagation()},t.matchChange=function(e,n){if(!y){if(u(),!n)return t.mcCategoryList=[],void(t.mcCourseList=[]);t.text=n,s.SearchIntelligent({key:n,courseType:e||null,limit:10}).then(function(e){t.scText&&(t.matchReadyLock=!0,t.mcCourseList=w(e.data.courses||[]),t.mcCategoryList=[],t.lMaxLen=t.mcCategoryList.length>3?3:t.mcCategoryList.length,t.cMaxLen=t.mcCourseList.length-t.lMaxLen,t.aMaxLen=t.lMaxLen+t.cMaxLen,t.mcCourseList.length||t.mcCategoryList.length||u())},function(e){x("错误代码："+e.data.data.code)})}},t.$watch("scSelectVal.value",function(){t.matchChange(t.scSelectVal.value,t.scText)}),t.matchGoToCategory=function(t,n){if(!e.allTagCategroy||!e.allTagCategroy.length)return void x("error","获取分类数据失败");var a=h(e.allTagCategroy,t).reverse().join(",");a?(o(),location.href=rcpAid.getUrl("分类",{tags:a,query:n})):x("error","找不到这个分类，请检查接口数据")},t.categorySelect=[],t.intoDetail=function(e){e.hasOwnProperty("id")&&(location.href=rcpAid.getUrl("课程详情",{cid:e.id}))}}]),module.directive("tailnav",function(){return{template:'<footer><section class="footer" id="footer"><div class="g-m-w"><div class="copyright"><p>广州市大洋信息技术股份有限公司 版权所有</p><p>Copyright © 2015 ITDAYANG. All Rights Reserved.</p><p>{{caseNumber}}</p></div><div class="footer-link"><a href="http://www.itdayang.com/about.html" target="_blank">关于我们</a> <span>- </span><a href="http://www.itdayang.com/contact.html" target="_blank">联系我们</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">法律条款</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">帮助中心</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">学校申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">机构申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">意见反馈</a></div><div class="clear"></div></div></section></footer>',restrict:"E",replace:!0,transclude:!0,scope:{data:"=data"},controller:["$scope","service",function(e,t){e.catType=rcpAid.getCourseCat();var n=DYCONFIG.domain||[];angular.forEach(n,function(t){t.domain===location.host&&(e.caseNumber=t.domainNum)}),e.atBuilding=function(){t.dialog.alert("正在建设中...")}}]}}),module.filter("titleMatchKw",["$sce",function(e){return function(t,n){var a="<b>"+n+"</b>",i=/([\[\]\(\)\{\}\*\?\+\^\$\.\|\\])/gi,s=n.replace(i,"\\$1");return t=t.replace(new RegExp(s,"ig"),a),e.trustAsHtml(t)}}]),function(){function e(){var i=document.getElementById("footer");if(i){var s=document.documentElement.scrollHeight-1||document.body.scrollHeight-1,o=document.documentElement.clientHeight||document.body.clientHeight;a=o>=s?1:2,a!==n&&(o>=s?(t(i.parentNode,{height:i.offsetHeight+"px"}),t(i,{position:"absolute",width:"100%",bottom:0,left:0})):(t(i.parentNode,{height:i.offsetHeight+"px"}),t(i,{position:"",width:"100%",bottom:0,left:0}))),n=o>=s?1:2}setTimeout(e)}if(!window.fixedFooterFlag){window.fixedFooterFlag=!0;var t=function(e,t){for(k in t)e.style[k]=t[k]},n=0,a=1;e()}}(),module.factory("dynamicService",function(){var e={emotions:"表情服务"};return function(){function t(){this._hash=new Object,this.put=function(e,t){return"undefined"!=typeof e&&0==this.containsKey(e)?(this._hash[e]="undefined"==typeof t?null:t,!0):!1},this.remove=function(e){delete this._hash[e]},this.size=function(){var e=0;for(var t in this._hash)e++;return e},this.get=function(e){return this._hash[e]},this.containsKey=function(e){return"undefined"!=typeof this._hash[e]},this.clear=function(){for(var e in this._hash)delete this._hash[e]}}var n=!0,a=new Array,i=new Array,s=new t,o="1362404091";$.ajax({dataType:"jsonp",url:"https://api.weibo.com/2/emotions.json?source="+o,success:function(e){switch(e.code){case 1:for(var t=e.data,o=0;o<t.length;o++)""==t[o].category&&(t[o].category="默认"),void 0==a[t[o].category]&&(a[t[o].category]=new Array,i.push(t[o].category)),a[t[o].category].push({name:t[o].phrase,icon:t[o].icon}),s.put(t[o].phrase,t[o].icon);n=!1,l&&l.ready();break;default:jf.alert(e.data.error)}},error:function(){jf.alert("表情数据请求失败")}});var r,c,l,d,u,g,p,f="#emotions",m="#emotions .container",h="#emotions .container a",v="#emotions .categorys",x="#emotions .categorys a",w="#emotions .prev",y="#emotions .next",b="#emotions .page",k="#emotions .page a";e.emotions={emotions:a,categorys:i,uSinaEmotionsHt:s,viewLocate:function(){var e,t=$(d).offset().top+$(d).outerHeight(!0),n=$(d).offset().left+$(d).width()/2-29,a=$(window).width(),i=$(document).height(),s=$(d).outerWidth(!0),o=$(f).outerWidth(!0),r=$(d).outerHeight(!0),c=$(f).outerHeight(!0),l=$(f).outerHeight(!0)/2+$(d).outerHeight(!0)/2,u=c>i-t,g=c>t-r,p=n+o>a,m=o>n,h=function(){p&&(u=l>i-t,g=l>t-r),n-=o+10,e=!u&&g?"r r1":u&&!g?"r r3":"r r2",t-=!u&&g?30:u&&!g?c:l},v=function(){e="l",n+=s,t-=l},x=function(){e="b",t-=c+r};u&&g?m?v():h():p?h():u&&x(),$(f).find(".ag-ic").addClass(e),$(f).css({top:t,left:n})},show:function(e,t){return $(document).unbind("click").bind("click",function(){$(f).remove()}),l=this,d=e.target,g=$(e.dyeditor).get(0),p=t,$(f).length?(u==d?$(f).remove():l.viewLocate(),void(u=d)):(u=d,$("body").append('<div id="emotions"></div>'),$(f).html('<span class="ag-ic"><i></i><em></em></span><div>正在加载，请稍候...</div>'),$(f).click(function(e){e.stopPropagation()}),$(f).find(".ag-ic").click(function(){$(f).remove()}),l.ready(),void l.viewLocate())},ready:function(){!n&&$(f).length&&($(f).html('<span class="ag-ic"><i></i><em></em></span><div style="float:right"><a href="javascript:void(0);" class="prev">&laquo;</a><a href="javascript:void(0);" class="next">&raquo;</a></div><div class="categorys"></div><div class="container"></div><div class="page"></div>'),$(f).find(".ag-ic").click(function(){$(f).remove()}),$(w).click(function(){l.showCategorys(c-1)}),$(y).click(function(){l.showCategorys(c+1)}),l.showCategorys(),l.showEmotions(),l.viewLocate())},showCategorys:function(){var e=arguments[0]?arguments[0]:0;if(!(0>e||e>=i.length/5)){$(v).html(""),c=e;for(var t=5*e;5*(e+1)>t&&t<i.length;++t)$(v).append($('<a href="javascript:void(0);">'+i[t]+"</a>"));$(x).click(function(){l.showEmotions($(this).text())}),$(x).each(function(){$(this).text()==r&&$(this).addClass("current")})}},showEmotions:function(){var e=arguments[0]?arguments[0]:"默认",t=arguments[1]?arguments[1]-1:0;$(m).html(""),$(b).html(""),r=e;for(var n=72*t;72*(t+1)>n&&n<a[e].length;++n)$(m).append($('<a href="javascript:void(0);" title="'+a[e][n].name+'"><img src="'+a[e][n].icon+'" alt="'+a[e][n].name+'" width="22" height="22" /></a>'));$(h).click(function(){l.insertText($(this).attr("title")),$(f).remove()});for(var n=1;n<a[e].length/72+1;++n)$(b).append($('<a href="javascript:void(0);"'+(n==t+1?' class="current"':"")+">"+n+"</a>"));$(k).click(function(){l.showEmotions(e,$(this).text())}),$(x+".current").removeClass("current"),$(x).each(function(){$(this).text()==e&&$(this).addClass("current")}),$(f).css({minHeight:254})},insertText:function(e){l.inCursorInsertAtCaret(l.AnalyticEmotion(e),g),p&&p($(g).html())},inCursorInsertAtCaret:function(e,t){var n,a;if(window.getSelection&&window.getSelection().getRangeAt){var i=window.getSelection(),s=i.focusNode;s&&(i=i.getRangeAt(0)),$(t).focus(),n=window.getSelection(),a=n.getRangeAt(0),a.startOffset==a.endOffset?s&&i.startContainer==a.startContainer||(a.selectNodeContents(t),a.setStart(a.endContainer,a.endOffset),a.setEnd(a.endContainer,a.endOffset)):a.deleteContents();var o=document.createElement("div");o.innerHTML=e;for(var r,c,l=document.createDocumentFragment();r=o.firstChild;)c=l.appendChild(r);a.insertNode(l,c),c&&(a=a.cloneRange(),a.setStartAfter(c),a.collapse(!0),n.removeAllRanges(),n.addRange(a))}else document.selection&&document.selection.createRange&&($(t).focus(),document.selection.createRange().pasteHTML(e))},AnalyticEmotion:function(e){if("undefined"!=typeof e){var t=e.match(/\[.*?\]/g);if(t)for(var n=0;n<t.length;n++)if(s.containsKey(t[n])){var a='<img src="'+s.get(t[n])+'" height="22" width="22" />';e=e.replace(t[n],a)}}return e}}}(),e}),module.directive("addface",function(){return{restrict:"A",scope:{data:"=addface"},controller:["$scope","$element","$timeout","dynamicService",function(e,t,n,a){t.on({click:function(n){a.emotions.show({dyeditor:t.attr("bindeditor"),target:t.get(0)},function(t){e.data=t}),n.stopPropagation()}})}]}}),module.directive("dyeditor",function(){return{template:'<div class="dyeditor-w"><div class="stint-chac"><span ng-class="{\'c-gray\':exceed}" ng-hide="exceed">还可以输入<b class="text1">{{surplus}}</b>字</span> <span ng-class="{\'c-red\':exceed>0}" ng-show="exceed">已超出<b class="text1">{{exceed}}</b>字</span></div><div class="placeholder" ng-hide="model&&model!==\'<br>\'">{{config.placeholder}}</div><div class="contenteditable" contenteditable="true" id="{{config.id}}" ng-style="config.style" ng-focus="onfocus()" ng-blur="onblur()" ng-click="change()"></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=model",exceed:"=exceed",config:"=config"},controller:["$scope","$element","$attrs","$timeout",function(e,t,n,a){function i(){$(s).html()!==o&&(o=$(s).html(),s.click()),setTimeout(i)}var s=t.find(".contenteditable").get(0);e.surplus=e.config.len,e.checkLen=function(t){if(e.config.len){var n=$(t).text(),a=2*parseInt(e.config.len),i=0;n&&(i=parseInt(n.length)),e.exceed=i>a?Math.ceil((i-a)/2):0,e.surplus=n&&i>a?0:n?parseInt((a-i)/2):parseInt(e.config.len)}},e.change=function(t){e.model=void 0!==t?t:$(s).html(),e.config.len&&e.checkLen(s);
},e.onfocus=function(){e.config.len&&t.find(".stint-chac").show(),e.focus=!0},e.onblur=function(){t.find(".stint-chac").css({display:e.exceed?"block":"none"}),e.focus=!1},e.$watch("model",function(n,a){void 0!==typeof n&&n!==$(s).html()&&($(s).html(n),e.config.len&&e.checkLen(s),t.find(".stint-chac").css({display:e.exceed?"block":"none"}))});var o=$(s).html();i()}]}}),module.filter("filterDynamicHtml",["$sce","dynamicService",function(e,t){return function(n){return e.trustAsHtml(t.emotions.AnalyticEmotion(n))}}]),module.filter("bindHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]);