!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"number"==typeof t&&!isNaN(t)}function i(t){return"undefined"==typeof t}function a(t,i){var a=[];return e(i)&&a.push(i),a.slice.apply(t,a)}function o(t,e){var i=a(arguments,2);return function(){return t.apply(e,i.concat(a(arguments)))}}function n(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return e&&(e[1]!==u.protocol||e[2]!==u.hostname||e[3]!==u.port)}function r(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function s(t){var e,i=t.naturalWidth,a=t.naturalHeight;return i||(e=new Image,e.src=t.src,i=e.width,a=e.height),{naturalWidth:i,naturalHeight:a,aspectRatio:i/a}}function c(t){var i=[],a=t.rotate,o=t.scaleX,n=t.scaleY;return e(a)&&i.push("rotate("+a+"deg)"),e(o)&&e(n)&&i.push("scale("+o+","+n+")"),i.length?i.join(" "):"none"}function l(t,e){var i,a,o=ot(t.degree)%180,n=(o>90?180-o:o)*Math.PI/180,r=nt(n),s=rt(n),c=t.width,l=t.height,h=t.aspectRatio;return e?(i=c/(s+r/h),a=i/h):(i=c*s+l*r,a=c*r+l*s),{width:i,height:a}}function h(i,a){var o,n,r,s=t("<canvas>")[0],c=s.getContext("2d"),h=0,d=0,p=a.naturalWidth,g=a.naturalHeight,u=a.rotate,m=a.scaleX,f=a.scaleY,v=e(m)&&e(f)&&(1!==m||1!==f),b=e(u)&&0!==u,x=b||v,w=p,y=g;return v&&(o=p/2,n=g/2),b&&(r=l({width:p,height:g,degree:u}),w=r.width,y=r.height,o=r.width/2,n=r.height/2),s.width=w,s.height=y,x&&(h=-p/2,d=-g/2,c.save(),c.translate(o,n)),b&&c.rotate(u*Math.PI/180),v&&c.scale(m,f),c.drawImage(i,h,d,p,g),x&&c.restore(),s}function d(e,i){this.$element=t(e),this.options=t.extend({},d.DEFAULTS,t.isPlainObject(i)&&i),this.ready=!1,this.built=!1,this.complete=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.replaced=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var p=t(window),g=t(document),u=window.location,m="cropper",f="preview."+m,v="cropper-modal",b="cropper-hide",x="cropper-hidden",w="cropper-invisible",y="cropper-move",C="cropper-crop",k="cropper-disabled",$="cropper-bg",L="mousedown touchstart pointerdown MSPointerDown",T="mousemove touchmove pointermove MSPointerMove",I="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",U="wheel mousewheel DOMMouseScroll",S="dblclick",B="load."+m,A="error."+m,E="resize."+m,D="build."+m,M="built."+m,R="cropstart."+m,N="cropmove."+m,F="cropend."+m,_="crop."+m,P="zoom."+m,O=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,H="e",W="w",Y="s",z="n",j="se",X="sw",K="ne",G="nw",q="all",V="crop",Z="move",J="zoom",Q="none",tt=t.isFunction(t("<canvas>")[0].getContext),et=Math.sqrt,it=Math.min,at=Math.max,ot=Math.abs,nt=Math.sin,rt=Math.cos,st=parseFloat,ct={};t.extend(ct,{init:function(){var t,e=this.$element;if(e.is("img")){if(this.isImg=!0,this.originalUrl=t=e.attr("src"),!t)return;t=e.prop("src")}else e.is("canvas")&&tt&&(t=e[0].toDataURL());this.load(t)},trigger:function(e,i){var a=t.Event(e,i);return this.$element.trigger(a),a.isDefaultPrevented()},load:function(e){var i,a,o=this.options,s=this.$element,c="";e&&(this.url=e,s.one(D,o.build),this.trigger(D)||(o.checkImageOrigin&&n(e)&&(c=' crossOrigin="anonymous"',s.prop("crossOrigin")||(i=r(e))),this.$clone=a=t("<img"+c+' src="'+(i||e)+'">'),this.isImg?s[0].complete?this.start():s.one(B,t.proxy(this.start,this)):a.one(B,t.proxy(this.start,this)).one(A,t.proxy(this.stop,this)).addClass(b).insertAfter(s)))},start:function(){this.image=s(this.isImg?this.$element[0]:this.$clone[0]),this.ready=!0,this.build()},stop:function(){this.$clone.remove(),this.$clone=null}}),t.extend(ct,{build:function(){var e,i,a,o=this.options,n=this.$element,r=this.$clone;this.ready&&(this.built&&this.unbuild(),this.$container=n.parent(),this.$cropper=e=t(d.TEMPLATE),this.$canvas=e.find(".cropper-canvas").append(r),this.$dragBox=e.find(".cropper-drag-box"),this.$cropBox=i=e.find(".cropper-crop-box"),this.$viewBox=e.find(".cropper-view-box"),this.$face=a=i.find(".cropper-face"),n.addClass(x).after(e),this.isImg||r.removeClass(b),this.initPreview(),this.bind(),o.aspectRatio=st(o.aspectRatio)||NaN,o.autoCrop?(this.cropped=!0,o.modal&&this.$dragBox.addClass(v)):i.addClass(x),o.guides||i.find(".cropper-dashed").addClass(x),o.center||i.find(".cropper-center").addClass(x),o.cropBoxMovable&&a.addClass(y).data("action",q),o.highlight||a.addClass(w),o.background&&e.addClass($),o.cropBoxResizable||i.find(".cropper-line, .cropper-point").addClass(x),this.setDragMode(o.dragCrop?V:o.movable?Z:Q),this.render(),this.built=!0,this.setData(o.data),n.one(M,o.built),setTimeout(t.proxy(function(){this.trigger(M),this.complete=!0},this),0))},unbuild:function(){this.built&&(this.built=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)}}),t.extend(ct,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.options,e=this.$element,i=this.$container,a=this.$cropper;a.addClass(x),e.removeClass(x),a.css(this.container={width:at(i.width(),st(t.minContainerWidth)||200),height:at(i.height(),st(t.minContainerHeight)||100)}),e.addClass(x),a.removeClass(x)},initCanvas:function(){var e=this.container,i=e.width,a=e.height,o=this.image,n=o.aspectRatio,r={aspectRatio:n,width:i,height:a};a*n>i?r.height=i/n:r.width=a*n,r.oldLeft=r.left=(i-r.width)/2,r.oldTop=r.top=(a-r.height)/2,this.canvas=r,this.limitCanvas(!0,!0),this.initialImage=t.extend({},o),this.initialCanvas=t.extend({},r)},limitCanvas:function(e,i){var a,o,n=this.options,r=n.strict,s=this.container,c=s.width,l=s.height,h=this.canvas,d=h.aspectRatio,p=this.cropBox,g=this.cropped&&p,u=this.initialCanvas||h,m=u.width,f=u.height;e&&(a=st(n.minCanvasWidth)||0,o=st(n.minCanvasHeight)||0,a?(r&&(a=at(g?p.width:m,a)),o=a/d):o?(r&&(o=at(g?p.height:f,o)),a=o*d):r&&(g?(a=p.width,o=p.height,o*d>a?a=o*d:o=a/d):(a=m,o=f)),t.extend(h,{minWidth:a,minHeight:o,maxWidth:1/0,maxHeight:1/0})),i&&(r?g?(h.minLeft=it(p.left,p.left+p.width-h.width),h.minTop=it(p.top,p.top+p.height-h.height),h.maxLeft=p.left,h.maxTop=p.top):(h.minLeft=it(0,c-h.width),h.minTop=it(0,l-h.height),h.maxLeft=at(0,c-h.width),h.maxTop=at(0,l-h.height)):(h.minLeft=-h.width,h.minTop=-h.height,h.maxLeft=c,h.maxTop=l))},renderCanvas:function(t){var e,i,a=this.options,o=this.canvas,n=this.image;this.rotated&&(this.rotated=!1,i=l({width:n.width,height:n.height,degree:n.rotate}),e=i.width/i.height,e!==o.aspectRatio&&(o.left-=(i.width-o.width)/2,o.top-=(i.height-o.height)/2,o.width=i.width,o.height=i.height,o.aspectRatio=e,this.limitCanvas(!0,!1))),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=it(at(o.width,o.minWidth),o.maxWidth),o.height=it(at(o.height,o.minHeight),o.maxHeight),this.limitCanvas(!1,!0),o.oldLeft=o.left=it(at(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=it(at(o.top,o.minTop),o.maxTop),this.$canvas.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.renderImage(),this.cropped&&a.strict&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(e){var i,a=this.canvas,o=this.image;o.rotate&&(i=l({width:a.width,height:a.height,degree:o.rotate,aspectRatio:o.aspectRatio},!0)),t.extend(o,i?{width:i.width,height:i.height,left:(a.width-i.width)/2,top:(a.height-i.height)/2}:{width:a.width,height:a.height,left:0,top:0}),this.$clone.css({width:o.width,height:o.height,marginLeft:o.left,marginTop:o.top,transform:c(o)}),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvas,a=e.aspectRatio,o=st(e.autoCropArea)||.8,n={width:i.width,height:i.height};a&&(i.height*a>i.width?n.height=n.width/a:n.width=n.height*a),this.cropBox=n,this.limitCropBox(!0,!0),n.width=it(at(n.width,n.minWidth),n.maxWidth),n.height=it(at(n.height,n.minHeight),n.maxHeight),n.width=at(n.minWidth,n.width*o),n.height=at(n.minHeight,n.height*o),n.oldLeft=n.left=i.left+(i.width-n.width)/2,n.oldTop=n.top=i.top+(i.height-n.height)/2,this.initialCropBox=t.extend({},n)},limitCropBox:function(t,e){var i,a,o=this.options,n=o.strict,r=this.container,s=r.width,c=r.height,l=this.canvas,h=this.cropBox,d=o.aspectRatio;t&&(i=st(o.minCropBoxWidth)||0,a=st(o.minCropBoxHeight)||0,h.minWidth=it(s,i),h.minHeight=it(c,a),h.maxWidth=it(s,n?l.width:s),h.maxHeight=it(c,n?l.height:c),d&&(h.maxHeight*d>h.maxWidth?(h.minHeight=h.minWidth/d,h.maxHeight=h.maxWidth/d):(h.minWidth=h.minHeight*d,h.maxWidth=h.maxHeight*d)),h.minWidth=it(h.maxWidth,h.minWidth),h.minHeight=it(h.maxHeight,h.minHeight)),e&&(n?(h.minLeft=at(0,l.left),h.minTop=at(0,l.top),h.maxLeft=it(s,l.left+l.width)-h.width,h.maxTop=it(c,l.top+l.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=s-h.width,h.maxTop=c-h.height))},renderCropBox:function(){var t=this.options,e=this.container,i=e.width,a=e.height,o=this.cropBox;(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=it(at(o.width,o.minWidth),o.maxWidth),o.height=it(at(o.height,o.minHeight),o.maxHeight),this.limitCropBox(!1,!0),o.oldLeft=o.left=it(at(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=it(at(o.top,o.minTop),o.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data("action",o.width===i&&o.height===a?Z:q),this.$cropBox.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.cropped&&t.strict&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),this.complete?this.trigger(_,this.getData()):this.built||this.$element.one(M,t.proxy(function(){this.trigger(_,this.getData())},this))}}),t.extend(ct,{initPreview:function(){var e=this.url;this.$preview=t(this.options.preview),this.$viewBox.html('<img src="'+e+'">'),this.$preview.each(function(){var i=t(this);i.data(f,{width:i.width(),height:i.height(),original:i.html()}),i.html('<img src="'+e+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important">')})},resetPreview:function(){this.$preview.each(function(){var e=t(this);e.html(e.data(f).original).removeData(f)})},preview:function(){var e=this.image,i=this.canvas,a=this.cropBox,o=e.width,n=e.height,r=a.left-i.left-e.left,s=a.top-i.top-e.top;this.cropped&&!this.disabled&&(this.$viewBox.find("img").css({width:o,height:n,marginLeft:-r,marginTop:-s,transform:c(e)}),this.$preview.each(function(){var i=t(this),l=i.data(f),h=l.width/a.width,d=l.width,p=a.height*h;p>l.height&&(h=l.height/a.height,d=a.width*h,p=l.height),i.width(d).height(p).find("img").css({width:o*h,height:n*h,marginLeft:-r*h,marginTop:-s*h,transform:c(e)})}))}}),t.extend(ct,{bind:function(){var e=this.options,i=this.$element,a=this.$cropper;t.isFunction(e.cropstart)&&i.on(R,e.cropstart),t.isFunction(e.cropmove)&&i.on(N,e.cropmove),t.isFunction(e.cropend)&&i.on(F,e.cropend),t.isFunction(e.crop)&&i.on(_,e.crop),t.isFunction(e.zoom)&&i.on(P,e.zoom),a.on(L,t.proxy(this.cropStart,this)),e.zoomable&&e.mouseWheelZoom&&a.on(U,t.proxy(this.wheel,this)),e.doubleClickToggle&&a.on(S,t.proxy(this.dblclick,this)),g.on(T,this._cropMove=o(this.cropMove,this)).on(I,this._cropEnd=o(this.cropEnd,this)),e.responsive&&p.on(E,this._resize=o(this.resize,this))},unbind:function(){var e=this.options,i=this.$element,a=this.$cropper;t.isFunction(e.cropstart)&&i.off(R,e.cropstart),t.isFunction(e.cropmove)&&i.off(N,e.cropmove),t.isFunction(e.cropend)&&i.off(F,e.cropend),t.isFunction(e.crop)&&i.off(_,e.crop),t.isFunction(e.zoom)&&i.off(P,e.zoom),a.off(L,this.cropStart),e.zoomable&&e.mouseWheelZoom&&a.off(U,this.wheel),e.doubleClickToggle&&a.off(S,this.dblclick),g.off(T,this._cropMove).off(I,this._cropEnd),e.responsive&&p.off(E,this._resize)}}),t.extend(ct,{resize:function(){var e,i,a,o=this.$container,n=this.container;!this.disabled&&n&&(a=o.width()/n.width,1===a&&o.height()===n.height||(e=this.getCanvasData(),i=this.getCropBoxData(),this.render(),this.setCanvasData(t.each(e,function(t,i){e[t]=i*a})),this.setCropBoxData(t.each(i,function(t,e){i[t]=e*a}))))},dblclick:function(){this.disabled||(this.$dragBox.hasClass(C)?this.setDragMode(Z):this.setDragMode(V))},wheel:function(t){var e=t.originalEvent,i=e,a=st(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),i.deltaY?o=i.deltaY>0?1:-1:i.wheelDelta?o=-i.wheelDelta/120:i.detail&&(o=i.detail>0?1:-1),this.zoom(-o*a,e))},cropStart:function(e){var i,a,o=this.options,n=e.originalEvent,r=n&&n.touches,s=e;if(!this.disabled){if(r){if(i=r.length,i>1){if(!o.zoomable||!o.touchDragZoom||2!==i)return;s=r[1],this.startX2=s.pageX,this.startY2=s.pageY,a=J}s=r[0]}if(a=a||t(s.target).data("action"),O.test(a)){if(this.trigger(R,{originalEvent:n,action:a}))return;e.preventDefault(),this.action=a,this.cropping=!1,this.startX=s.pageX||n&&n.pageX,this.startY=s.pageY||n&&n.pageY,a===V&&(this.cropping=!0,this.$dragBox.addClass(v))}}},cropMove:function(t){var e,i=this.options,a=t.originalEvent,o=a&&a.touches,n=t,r=this.action;if(!this.disabled){if(o){if(e=o.length,e>1){if(!i.zoomable||!i.touchDragZoom||2!==e)return;n=o[1],this.endX2=n.pageX,this.endY2=n.pageY}n=o[0]}if(r){if(this.trigger(N,{originalEvent:a,action:r}))return;t.preventDefault(),this.endX=n.pageX||a&&a.pageX,this.endY=n.pageY||a&&a.pageY,this.change(n.shiftKey,r===J?a:null)}}},cropEnd:function(t){var e=t.originalEvent,i=this.action;this.disabled||i&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(v,this.cropped&&this.options.modal)),this.action="",this.trigger(F,{originalEvent:e,action:i}))}}),t.extend(ct,{change:function(t,e){var i,a,o=this.options,n=o.aspectRatio,r=this.action,s=this.container,c=this.canvas,l=this.cropBox,h=l.width,d=l.height,p=l.left,g=l.top,u=p+h,m=g+d,f=0,v=0,b=s.width,w=s.height,y=!0;switch(!n&&t&&(n=h&&d?h/d:1),o.strict&&(f=l.minLeft,v=l.minTop,b=f+it(s.width,c.width),w=v+it(s.height,c.height)),a={x:this.endX-this.startX,y:this.endY-this.startY},n&&(a.X=a.y*n,a.Y=a.x/n),r){case q:p+=a.x,g+=a.y;break;case H:if(a.x>=0&&(u>=b||n&&(v>=g||m>=w))){y=!1;break}h+=a.x,n&&(d=h/n,g-=a.Y/2),0>h&&(r=W,h=0);break;case z:if(a.y<=0&&(v>=g||n&&(f>=p||u>=b))){y=!1;break}d-=a.y,g+=a.y,n&&(h=d*n,p+=a.X/2),0>d&&(r=Y,d=0);break;case W:if(a.x<=0&&(f>=p||n&&(v>=g||m>=w))){y=!1;break}h-=a.x,p+=a.x,n&&(d=h/n,g+=a.Y/2),0>h&&(r=H,h=0);break;case Y:if(a.y>=0&&(m>=w||n&&(f>=p||u>=b))){y=!1;break}d+=a.y,n&&(h=d*n,p-=a.X/2),0>d&&(r=z,d=0);break;case K:if(n){if(a.y<=0&&(v>=g||u>=b)){y=!1;break}d-=a.y,g+=a.y,h=d*n}else a.x>=0?b>u?h+=a.x:a.y<=0&&v>=g&&(y=!1):h+=a.x,a.y<=0?g>v&&(d-=a.y,g+=a.y):(d-=a.y,g+=a.y);0>h&&0>d?(r=X,d=0,h=0):0>h?(r=G,h=0):0>d&&(r=j,d=0);break;case G:if(n){if(a.y<=0&&(v>=g||f>=p)){y=!1;break}d-=a.y,g+=a.y,h=d*n,p+=a.X}else a.x<=0?p>f?(h-=a.x,p+=a.x):a.y<=0&&v>=g&&(y=!1):(h-=a.x,p+=a.x),a.y<=0?g>v&&(d-=a.y,g+=a.y):(d-=a.y,g+=a.y);0>h&&0>d?(r=j,d=0,h=0):0>h?(r=K,h=0):0>d&&(r=X,d=0);break;case X:if(n){if(a.x<=0&&(f>=p||m>=w)){y=!1;break}h-=a.x,p+=a.x,d=h/n}else a.x<=0?p>f?(h-=a.x,p+=a.x):a.y>=0&&m>=w&&(y=!1):(h-=a.x,p+=a.x),a.y>=0?w>m&&(d+=a.y):d+=a.y;0>h&&0>d?(r=K,d=0,h=0):0>h?(r=j,h=0):0>d&&(r=G,d=0);break;case j:if(n){if(a.x>=0&&(u>=b||m>=w)){y=!1;break}h+=a.x,d=h/n}else a.x>=0?b>u?h+=a.x:a.y>=0&&m>=w&&(y=!1):h+=a.x,a.y>=0?w>m&&(d+=a.y):d+=a.y;0>h&&0>d?(r=G,d=0,h=0):0>h?(r=X,h=0):0>d&&(r=K,d=0);break;case Z:c.left+=a.x,c.top+=a.y,this.renderCanvas(!0),y=!1;break;case J:this.zoom(function(t,e,i,a){var o=et(t*t+e*e),n=et(i*i+a*a);return(n-o)/o}(ot(this.startX-this.startX2),ot(this.startY-this.startY2),ot(this.endX-this.endX2),ot(this.endY-this.endY2)),e),this.startX2=this.endX2,this.startY2=this.endY2,y=!1;break;case V:a.x&&a.y&&(i=this.$cropper.offset(),p=this.startX-i.left,g=this.startY-i.top,h=l.minWidth,d=l.minHeight,a.x>0?a.y>0?r=j:(r=K,g-=d):a.y>0?(r=X,p-=h):(r=G,p-=h,g-=d),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(x)))}y&&(l.width=h,l.height=d,l.left=p,l.top=g,this.action=r,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY}}),t.extend(ct,{crop:function(){this.built&&!this.disabled&&(this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(v),this.$cropBox.removeClass(x)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.built&&!this.disabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.cropped&&this.renderCropBox())},clear:function(){this.cropped&&!this.disabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(v),this.$cropBox.addClass(x))},replace:function(t){!this.disabled&&t&&(this.isImg&&this.$element.attr("src",t),this.options.data=null,this.load(t))},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(k))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(k))},destroy:function(){var t=this.$element;this.ready?(this.isImg&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(x)):this.isImg?t.off(B,this.start):this.$clone&&this.$clone.remove(),t.removeData(m)},move:function(t,a){var o=this.canvas;i(a)&&(a=t),t=st(t),a=st(a),this.built&&!this.disabled&&this.options.movable&&(o.left+=e(t)?t:0,o.top+=e(a)?a:0,this.renderCanvas(!0))},zoom:function(t,e){var i,a,o=this.canvas;if(t=st(t),t&&this.built&&!this.disabled&&this.options.zoomable){if(this.trigger(P,{originalEvent:e,ratio:t}))return;t=0>t?1/(1-t):1+t,i=o.width*t,a=o.height*t,o.left-=(i-o.width)/2,o.top-=(a-o.height)/2,o.width=i,o.height=a,this.renderCanvas(!0),this.setDragMode(Z)}},rotate:function(t){var e=this.image,i=e.rotate||0;t=st(t)||0,this.built&&!this.disabled&&this.options.rotatable&&(e.rotate=(i+t)%360,this.rotated=!0,this.renderCanvas(!0))},scale:function(t,a){var o=this.image;i(a)&&(a=t),t=st(t),a=st(a),this.built&&!this.disabled&&this.options.scalable&&(o.scaleX=e(t)?t:1,o.scaleY=e(a)?a:1,this.renderImage(!0))},getData:function(e){var i,a,o=this.options,n=this.image,r=this.canvas,s=this.cropBox;return this.built&&this.cropped?(a={x:s.left-r.left,y:s.top-r.top,width:s.width,height:s.height},i=n.width/n.naturalWidth,t.each(a,function(t,o){o/=i,a[t]=e?Math.round(o):o})):a={x:0,y:0,width:0,height:0},o.rotatable&&(a.rotate=n.rotate||0),o.scalable&&(a.scaleX=n.scaleX||1,a.scaleY=n.scaleY||1),a},setData:function(i){var a,o=this.image,n=this.canvas,r={};t.isFunction(i)&&(i=i.call(this.$element)),this.built&&!this.disabled&&t.isPlainObject(i)&&(e(i.rotate)&&i.rotate!==o.rotate&&this.options.rotatable&&(o.rotate=i.rotate,this.rotated=!0,this.renderCanvas(!0)),a=o.width/o.naturalWidth,e(i.x)&&(r.left=i.x*a+n.left),e(i.y)&&(r.top=i.y*a+n.top),e(i.width)&&(r.width=i.width*a),e(i.height)&&(r.height=i.height*a),this.setCropBoxData(r))},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var t,e=this.canvas;return this.built&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCanvasData:function(i){var a=this.canvas,o=a.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.built&&!this.disabled&&t.isPlainObject(i)&&(e(i.left)&&(a.left=i.left),e(i.top)&&(a.top=i.top),e(i.width)?(a.width=i.width,a.height=i.width/o):e(i.height)&&(a.height=i.height,a.width=i.height*o),this.renderCanvas(!0))},getCropBoxData:function(){var t,e=this.cropBox;return this.built&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(i){var a,o,n=this.cropBox,r=this.options.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.built&&this.cropped&&!this.disabled&&t.isPlainObject(i)&&(e(i.left)&&(n.left=i.left),e(i.top)&&(n.top=i.top),e(i.width)&&i.width!==n.width&&(a=!0,n.width=i.width),e(i.height)&&i.height!==n.height&&(o=!0,n.height=i.height),r&&(a?n.height=n.width/r:o&&(n.width=n.height*r)),this.renderCropBox())},getCroppedCanvas:function(e){var i,a,o,n,r,s,c,l,d,p,g;return this.built&&this.cropped&&tt?(t.isPlainObject(e)||(e={}),g=this.getData(),i=g.width,a=g.height,l=i/a,t.isPlainObject(e)&&(r=e.width,s=e.height,r?(s=r/l,c=r/i):s&&(r=s*l,c=s/a)),o=r||i,n=s||a,d=t("<canvas>")[0],d.width=o,d.height=n,p=d.getContext("2d"),e.fillColor&&(p.fillStyle=e.fillColor,p.fillRect(0,0,o,n)),p.drawImage.apply(p,function(){var t,e,o,n,r,s,l=h(this.$clone[0],this.image),d=l.width,p=l.height,u=[l],m=g.x,f=g.y;return-i>=m||m>d?m=t=o=r=0:0>=m?(o=-m,m=0,t=r=it(d,i+m)):d>=m&&(o=0,t=r=it(i,d-m)),0>=t||-a>=f||f>p?f=e=n=s=0:0>=f?(n=-f,f=0,e=s=it(p,a+f)):p>=f&&(n=0,e=s=it(a,p-f)),u.push(m,f,t,e),c&&(o*=c,n*=c,r*=c,s*=c),r>0&&s>0&&u.push(o,n,r,s),u}.call(this)),d):void 0},setAspectRatio:function(t){var e=this.options;this.disabled||i(t)||(e.aspectRatio=st(t)||NaN,this.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(t){var e,i,a=this.options;this.ready&&!this.disabled&&(e=a.dragCrop&&t===V,i=a.movable&&t===Z,t=e||i?t:Q,this.$dragBox.data("action",t).toggleClass(C,e).toggleClass(y,i),a.cropBoxMovable||this.$face.data("action",t).toggleClass(C,e).toggleClass(y,i))}}),t.extend(d.prototype,ct),d.DEFAULTS={aspectRatio:NaN,data:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,dragCrop:!0,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,mouseWheelZoom:!0,wheelZoomRatio:.1,touchDragZoom:!0,cropBoxMovable:!0,cropBoxResizable:!0,doubleClickToggle:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},d.setDefaults=function(e){t.extend(d.DEFAULTS,e)},d.TEMPLATE='<div class="cropper-container"><div class="cropper-canvas"></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',d.other=t.fn.cropper,t.fn.cropper=function(e){var o,n=a(arguments,1);return this.each(function(){var i,a=t(this),r=a.data(m);if(!r){if(/destroy/.test(e))return;a.data(m,r=new d(this,e))}"string"==typeof e&&t.isFunction(i=r[e])&&(o=i.apply(r,n))}),i(o)?this:o},t.fn.cropper.Constructor=d,t.fn.cropper.setDefaults=d.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=d.other,this}});var module=angular.module("RCP",["ngCookies","ngRoute"]);module.controller("applySpaceCtrl",["$scope","$timeout","$window","service","ssoMethod",function(t,e,i,a,o){function n(){$("input[name=phone]").on("keypress",function(t){return t.keyCode>=48&&t.keyCode<=57}),$("input[name=idCardNo]").on("keypress",function(t){return t.keyCode>=48&&t.keyCode<=57||88==t.keyCode||120==t.keyCode})}function r(){var e=i.sessionStorage;h&&e&&(t.agree="1"==e.getItem(d+"agree"),t.agree&&t.toStep(e.getItem(d+"step")),t.data.realName||(t.data.realName=e.getItem(d+"realName")||""),t.data.phone||(t.data.phone=e.getItem(d+"phone")||""),t.data.idCardNo||(t.data.idCardNo=e.getItem(d+"idCardNo")||""),t.data.idCardFront||(t.data.idCardFront=e.getItem(d+"idCardFront")||""),t.data.idCardBack||(t.data.idCardBack=e.getItem(d+"idCardBack")||""))}t.step=0,t.agree=!1,t.curStatus=-1,t.verifyLoaded=!1;var s={realName:/^[a-zA-Z0-9_\u4e00-\u9fa5]{2,50}$/,phone:/^1[34578]\d{9}$/,idCardNo:/(^[1-9][0-7]\d{4}\d{2}((0[1-9])|(1[012]))((0[1-9])|([12][0-9])|(3[012]))\d{3}$)|(^[1-9][0-7]\d{4}(19|2\d)\d{2}((0[1-9])|(1[012]))((0[1-9])|([12][0-9])|(3[012]))\d{3}[\dXx]$)/},c={realName:/.*/,phone:/.*/,idCardNo:/.*/};t.regExp=s,n(),t.data={realName:"",phone:"",idCardNo:"",idCardFront:"",idCardBack:""};var l={0:{icon:"",text:"",style:""},1:{icon:"fa-info-circle",text:"亲，我们在努力审核中...",style:"shallow-blue"},2:{icon:"fa-times-circle-o",text:"抱歉，认证失败！",style:"shallow-red"},3:{icon:"fa-check-circle-o",text:"恭喜您，认证成功！",style:"shallow-green"}};t.tips=l[1];var h=!0;t.toStep=function(e){if((!(e>0)||t.agree)&&!(t.step>1&&1>e)&&(t.step>1&&2>e&&$(".l-input-text input").attr("disabled",!1),t.step=isNaN(e)?t.step:e,t.step>1?t.regExp=c:t.regExp=s,h&&t.step<2)){var a=i.sessionStorage;a&&(a.setItem(d+"step",t.step),a.setItem(d+"agree",t.agree?1:0))}};var d="cer_";t.saveData=function(e){var a=i.sessionStorage;h&&a&&a.setItem(d+e,t.data[e]||"")};var p={attrs:{certification:t.data}};t.submitData=function(){t.u.$valid&&t.data.idCardBack&&t.data.idCardFront&&o.updateUser(p).then(function(){h&&i.sessionStorage&&i.sessionStorage.clear(),i.location.reload()},function(){a.dialog.alert("提交失败!")})},t.$on("login",function(e,i){function n(e){e&&"string"==typeof e&&(t.data.phone=e,$("input[name=phone]").val(t.data.phone)),r(),t.verifyLoaded=!0}if(!i)return void a.common.toLogin(!0);var s=o.getUserAttrs();console.log("实名认证",s.certification);var h=s&&s.certification;if(h||i.certification){var d=t.data;return d.realName=h.realName,d.phone=h.phone,d.idCardNo=h.idCardNo,d.idCardFront=h.idCardFront,d.idCardBack=h.idCardBack,$(".l-input-text input").attr("disabled",!0),t.curStatus=h.status,t.tips=l[t.curStatus],2==t.curStatus&&(t.tips.reason=h.reason),t.step=2,t.regExp=c,t.agree=!0,void(t.verifyLoaded=!0)}o.userInfo({selector:"privated"}).then(function(t){return t||console.error("获取绑定手机号返回数据为空",t),console.log("绑定手机号",t),t.data&&t.data.usr&&t.data.usr.attrs&&t.data.usr.attrs.privated&&t.data.usr.attrs.privated.phone?void n(t.data.usr.attrs.privated.phone):s&&s.basic&&s.basic.phone?void n(s.basic.phone):void n()},function(t){n(s&&s.basic&&s.basic.phone),console.error("获取绑定手机号错误",t)})}),t.uploadConfig={showEdit:!1,uploadNum:0,upCancel:!1,id:"idcard",width:400,ratio:[16,9],containerStyle:{width:"480px",height:"310px"},mode:"fixed",scope:null,cb:function(t){}},t.uploadIdCard=function(a){t.step>1||(t.uploadConfig.cb=function(e){0==a?t.data.idCardFront=e:1==a&&(t.data.idCardBack=e);var o=i.sessionStorage;h&&o&&(o.setItem(d+"idCardFront",t.data.idCardFront),o.setItem(d+"idCardBack",t.data.idCardBack))},e(function(){t.uploadConfig.scope&&t.uploadConfig.scope.selectImg()}))}}]),module.config(["$provide",function(t){t.decorator("$exceptionHandler",["$delegate",function(t){return function(e,i){t(e,i),console.error({origin:"AngularJS Error",msg:e.message,stack:e.stack}),document.runErrorCallUpgrade()}}])}]),module.controller("mainCtrl",["$scope","$rootScope","$http","service","$cookies","$timeout",function(t,e,i,a,o,n){function r(){var t=localStorage.getItem("anonymousLoginUsr");return t&&"error"!==t?(e.anonymousUser=JSON.parse(t),void(o.stoken=e.anonymousUser.token)):void i({method:"GET",url:"http://"+g_conf.SSO+"/sso/api/anonymousLogin"}).then(function(t){if(0!==t.data.code)return console.error(t.data.msg,"匿名登录失败"),void localStorage.setItem("anonymousLoginUsr","error");var i=t.data.data;i.usr.token=i.token,localStorage.setItem("anonymousLoginToken",i.token),delete i.usr.BAttr,delete i.usr.attrs,localStorage.setItem("anonymousLoginUsr",JSON.stringify(i.usr)),e.anonymousUser=i.usr,o.stoken=i.usr.token},function(t){localStorage.setItem("anonymousLoginUsr","error"),console.error(t,"匿名登录失败")})}function s(i){d.token=rcpAid.getToken(),t.setUserData(UINFO),l(e.currentUser.role),console.log("checkLogin by token")}function c(t){console.log("未登陆",t),rcpAid.isLogin=0,l({}),n(function(){e.$broadcast("login","")},0)}function l(e){function i(e){angular.forEach(e,function(e){var i=!1;angular.forEach(t.itemList,function(t){e.name===t.name&&(i=!0)}),i||t.itemList.push(e)})}function a(){var t=rcpAid.getUrl,e=[];return angular.forEach(arguments,function(i){switch(i){case"学习中心":e.push({ic:"L2",name:i,href:t(i)});break;case"教学中心":e.push({ic:"L2",name:i,href:t(i)});break;case"助学中心":"undefined"==typeof isIE||isIE(9,9)||e.push({ic:"L2",name:i,href:t(i)});break;case"管理中心":e.push({ic:"L1",name:i,href:t(i)});break;case"创建新课程":e.push({ic:"L4",name:i,href:t("创建课程",{type:10})})}}),e}t.itemList=[],angular.forEach(e,function(e,o){switch(o){case"default":break;case"student":t.user.schoolId&&i(a("学校空间")),t.user.classId&&i(a("班级空间"));break;case"parent":i(a("家长空间"));break;case"teacher":t.user.schoolId&&i(a("学校空间")),t.user.classId&&i(a("班级空间"));break;case"help":i(a("助学中心"));break;case"class":i(a("班级空间","学校空间"));break;case"school":i(a("学校空间"));break;case"UCS_ADMIN":i(a("管理中心"));break;case"COURSE_VERIFY_ADMIN":i(a("管理中心"));break;case"PAGE_EDIT_ADMIN":i(a("管理中心"))}}),i(a("学习中心","教学中心","创建新课程","创建新题库"))}function h(){return e.currentUser={},$("body").show(),a.common.checkLogin(s,c),rcpAid.isLogin?void 0:(console.log("未登陆"),void r())}$("body").show();var d={};try{d=new ars.ARS,d.args={},d.delay=1e3,d.pushDelay=1e4,d.url=DYCONFIG.ars.rUrl+"pub/api/record",d.token=rcpAid.getToken(),d.start()}catch(p){d={}}t.setUserData=function(t){try{if(console.log(t),!t.uid)return;e.currentUser={uid:t.usr.id,nickName:t.usr.attrs.basic.nickName,avatar:t.usr.attrs.basic.avatar,desc:t.usr.attrs.basic.desc,role:t.usr.attrs.role||""},t.usr.attrs.pass&&(e.currentUser.certification=t.usr.attrs.pass.certification),console.log("发广播",e.currentUser),n(function(){e.$broadcast("login",e.currentUser)},0)}catch(i){console.log(i)}},h()}]),module.directive("agreement",function(){return{template:'<div class="l-protocol l-scrollbar"><style type="text/css">.l-protocol{background-color:#f5f5f5;border:1px solid #e5e5e5;color:#666;height:433px;overflow:auto;padding:12px 22px}.l-protocol h2{text-align:center}.l-protocol p{font-size:14px}.l-scrollbar{scrollbar-width:20px;scrollbar-arrow:none;scrollbar-arrow-visible:none}.l-scrollbar::-webkit-scrollbar{width:20px;background-color:transparent}.l-scrollbar::-webkit-scrollbar-thumb{background-color:#02c0b9;border-radius:8px}.l-scrollbar::-webkit-scrollbar-thumb:hover{background-color:#02c0b9}.l-scrollbar::-webkit-scrollbar-thumb:active{background-color:#02a7a1}</style><h2>酷校课程发布者注册协议</h2><h3>导言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;欢迎您使用酷校提供的服务！</p><p>&nbsp;&nbsp;&nbsp;&nbsp;为使用酷校提供的服务（以下简称：本服务），您应当阅读并遵守《酷校课程发布者注册协议》（以下简称：本协议）、《酷校服务协议》、《手机号码规则》等相关协议、规则。 请您务必审慎阅读、充分理解各条款内容，特别是免除或者限制责任的条款，以及开通或使用某项服务的单独协议、规则。 除非您已阅读并接受本协议及相关协议、规则等所有条款，否则，您无权使用酷校提供的本服务。您使用酷校的本服务，即视为您已阅读并同意上述协议、规则等的约束。 您有违反本协议的任何行为时，酷校有权依照违反情况，随时单方限制、中止或终止向您提供本服务，并有权追究您的相关责任。</p><h3>1. 术语含义</h3><p>如无特别说明，下列术语在本协议中的含义为：</p><h4>1.1.</h4><p>课程发布者：指经有效注册、申请后，将其享有相应权利的各种课程接入酷校并向用户提供各种免费或收费类的在线直播、点播服务以实现与用户进行在线交流与学习目的的个人、法人或其他组织，因前述主体的不同，课程发布者在对外展现上也称“机构”或“老师”，本协议中简称为“您”。</p><h4>1.2.</h4><p>课程：指由课程发布者开发，或课程开发者经权利人授权，通过酷校向相关用户提供各种免费或收费类的在线直播、点播形式的交流与学习服务，包括但不限于网络营销类、语言类、公务员考试类、小学/初中/高中教育辅导类（非学历教育）等现存的各种培训服务及今后可能出现的各种培训服务。课程是否收费、课程收费的数额及课程收费方式等均由课程发布者自行决定。</p><h4>1.3.</h4><p>酷校：指由酷校所拥有、控制、经营的酷校网（kuxiao.cn）、未来将上线的其他平台或网站及前述各平台网站的下属子页面，以下简称为“酷校平台”、“酷校”、“平台”。酷校通过酷校向您提供的服务包括但不限于提供课程运营平台、费用支付服务、广点通推广服务等服务，具体以酷校提供和您选择的服务为准，前述服务称为酷校服务、平台服务、本服务。酷校、课程发布者均同意和理解：</p><h5>1.3.1.</h5><p>酷校是一个中立的平台服务提供者，仅向课程发布者提供信息存储空间、链接等中立的网络服务或相关中立的技术支持服务，以供课程发布者在中立的平台上自主发布、运营、推广其课程等；</p><h5>1.3.2.</h5><p>课程发布者的课程由课程发布者自主开发、独立运营并独立承担全部责任。酷校不会、也不可能参与课程发布者课程的研发、运营等任何活动，酷校也不会对课程发布者的课程进行任何的修改、编辑或整理等；</p><h5>1.3.3.</h5><p>因课程发布者课程及服务产生的任何纠纷、责任等，以及开发者违反相关法律法规或本协议约定引发的任何后果，均由课程发布者独立承担责任、赔偿损失，与酷校无关。如侵害到酷校或他人权益的，课程发布者须自行承担全部责任和赔偿一切损失。</p><h4>1.4.</h4><p>酷校运营数据：是指用户、课程发布者在使用酷校相关服务中产生的相关运营数据，包括但不限于用户或课程发布者操作行为形成的数据、各类交易数据等，“酷校数据”、“平台数据、“运营数据”。“酷校运营数据”的所有权及其他相关权利属于酷校，且是酷校的商业秘密，未经酷校书面授权您不得使用。但依法属于用户、课程发布者享有相关权利的数据或课程内容等除外。</p><h3>2. 课程发布者的权利和义务</h3><p></p><h4>2.1.</h4><p>帐户注册</p><h5>2.1.1.</h5><p>您应当通过登录酷校网站或酷校其他指定途径，使用手机号码注册课程发布者帐户（下简称：账户）以成为课程发布者，课程发布者帐户一经注册成功， 相应的帐号不得变更，且该帐户不可转让、不可赠予、不可继承等。</p><h5>2.1.2.</h5><p>您注册帐号时，应使用您拥有合法使用权的手机号码，并遵守《手机号码规则》及相关协议、规则等的约束。</p><h5>2.1.3.</h5><p>您不得违反本协议约定将您的账户用于其他目的。否则，酷校有权随时单方限制、中止或终止向您提供本服务，且未经酷校同意您不得再次使用本服务。</p><h5>2.1.4.</h5><p>您注册帐号使用的手机号码，是您登录及使用本服务的凭证。您应当做好手机号码、密码，以及进入和管理本服务中的各类产品与服务的口令、密码等的保密措施。 因您保密措施不当或您的其他行为，致使上述口令、密码等丢失或泄漏所引起的一切损失和后果，均由您自行承担。</p><h5>2.1.5.</h5><p>酷校可能会向您提供添加其他手机账号以成为您注册账号的账号管理员的功能，如酷校向您提供账号管理员功能后，您可以根据自己的需求，在使用相应手机号码注册成您账号的账号管理员后，进行您指定或授权的操作。</p><h5>2.1.6.</h5><p>您保证：您注册本服务账户的手机号码及您添加的账号管理员使用的手机号码的使用权均是合法获取的。前述全部手机号码在本服务中进行的包括但不限于以下事项：注册本服务帐户、提交相应资质材料、确认和同意相关协议和规则、选择具体服务类别以及进行费用结算等事项，均是您自行或您授权他人进行的行为，对您均有约束力。同时，您承担以前述全部手机号码为标识进行的全部行为的法律责任。</p><h5>2.1.7.</h5><p>若您发现有他人冒用或盗用您的账户及密码、或任何其他未经您合法授权的情形时， 您应立即以有效方式通知酷校并提供酷校所需的相关材料（包括但不限于提供您的身份信息和相关身份资料、相关事实情况及您的要求等）。 酷校收到您的有效请求并核实身份后，会根据不同情况采取相应措施。若您提供的信息不完全，导致酷校无法核实您的身份或酷校无法判断您的需求等， 而导致酷校无法进行及时处理，给您带来的损失，您应自行承担。同时，酷校对您的请求采取措施需要合理期限，对于您通知酷校以及酷校根据您的有效通知采取措施之前， 由于他人行为给您造成的损失，酷校不承担任何责任。</p><h4>2.2.</h4><p>资质材料</p><h5>2.2.1.</h5><p>您保证：您具备使用本服务、接入和运营课程或提供相关服务等行为的相关合法资质或已经过了相关政府部门的审核批准；您提供的主体资质材料、相关资质或证明以及其他任何文件等信息真实、准确、完整，并在信息发生变更后，及时进行更新；您具备履行本协议项下之义务、各种行为的能力；您履行相关义务、从事相关行为不违反任何对您的有约束力的法律文件。否则，您应不使用酷校提供的相关服务，且应独自承担由此带来的一切责任及给用户、酷校造成的全部损失。</p><h5>2.2.2.</h5><p>您保证：您会依法及按照酷校要求提交使用本服务所必须的真实、准确的经过您签章确认的主体资质材料以及联系人姓名（名称）、地址、电子邮箱等相关资料。</p><h5>2.2.3.</h5><p>您保证：您在酷校上通过您的课程提供的各种服务，依法已经具有相关的合法资质或获得了有关部门的许可或批准，并会向酷校提交相关资质或证明文件。</p><h5>2.2.4.</h5><p>您保证：您在酷校上通过您的课程提供的各种服务，符合国家相关法规的规定，不违反任何相关法规及相关协议、规则，也不会侵犯任何人的合法权益， 同时，会依法、依约或按照酷校的要求提供版权、专利权等相关证明文件。</p><h4>2.3.</h4><p>服务费用</p><h5>2.3.1.</h5><p>目前，酷校向您提供酷校服务是免费的，如后续酷校可能会对服务进行调整，并有权根据运营情况单独决定是否向您收取相应服务费用。</p><h5>2.3.2.</h5><p>如后续酷校向您收取相应服务费用的，您因使用酷校提供的相关服务而产生的所有服务费用由您自行承担，您应按相关协议、规则等的规定支付费用，否则，酷校有权不提供相关服务。您选择使用相关服务并支付费用后，在服务未到期之前，若您单方要求提前解除服务的， 酷校有权将您未使用的服务对应的费用不予退还而作为您单方违约的违约金予以没收。<br>在本服务中，酷校如需对服务收取相应服务费用的，酷校有权单方根据实际需要对收费服务的收费标准、方式进行修改和变更，前述修改、变更前，酷校将在相应服务页面进行通知或公告。如果您不同意上述修改、变更，则应立即停止使用相应服务，否则，您的任何使用行为，即视为您同意上述修改、变更。<br>您若对酷校提供的收费标准、服务使用期限等费用结算事项的通知内容有异议的，应在收到酷校通知后及时以书面形式告知酷校，酷校收到您的书面告知会进行核实，否则，视为您认可酷校提供的费用结算事项的通知内容，双方应按照酷校提供的费用结算事项的通知内容，进行费用的结算及支付等。<br>您理解并同意：若酷校按照前述约定对于本服务是否收费、收费标准等单方做出调整、变化的，您会予以全部遵守、同意，但您依法或按照约定终止使用本服务的除外。</p><h4>2.4.</h4><p>课程要求</p><h5>2.4.1.</h5><p>您应自行负责您课程的开发、创建、上课、管理、运营等工作，并且自行承担相应的费用。如您的课程是聘请第三方自然人（该第三方可能是您签订劳动合同的员工、外聘的专家等）以手机号码为标识来完成的，该第三方自然人以手机号码为标识的一切行为均视为您自身的行为，您同时应当承担该第三方自然人以手机号码为标识的一切行为承担法律责任。</p><h5>2.4.2.</h5><p>您的课程，应符合相关法规、技术规范或标准等，同时，还应符合酷校的对接入课程在内容、服务等方面的统一要求和您在课程介绍页面对课程的介绍， 以确保课程可以在酷校真实、安全、稳定的运营。</p><h5>2.4.3.</h5><p>您不得在课程内宣传与本课程无关的任何其他信息，包括但不限于广告、其他的课程产品信息等（除非双方另有约定）， 也不得在课程内添加指向非酷校拥有或控制或酷校书面同意的网站链接。</p><h5>2.4.4.</h5><p>您课程在酷校上运营期间，您需向用户提供及时有效的客户服务，客户服务形式包括但不限于通过明确且合理的方式告知用户客户服务渠道、 提供手机/电话等，并自行承担客服费用。</p><h5>2.4.5.</h5><p>您应当在课程中向相关权利人提供投诉途径，确保权利人在认为您侵犯其合法权益时可以向您主张权利。</p><h5>2.4.6.</h5><p>如果您的课程符合酷校支付接入的相关要求时，则可依相关规范、流程等接入到酷校的支付系统。</p><h4>2.5.</h4><p>课程运营</p><h5>2.5.1.</h5><p>您应自行按照相关法规，运营您的课程，履行相关义务，并自行承担全部责任，包括但不限于：<br>（1）依照相关法律法规的规定，保留相应的访问、使用等日志记录；<br>（2）国家有权机关向您依法查询相关信息时，应积极配合提供；<br>（3）主动履行其他您依法应履行的义务。</p><h5>2.5.2.</h5><p>您保证：<br>（1）您的课程、提供给用户的相关服务及发布的相关信息、内容等，不违反相关法律、法规、政策等的规定及本协议或相关协议、规则等，也不会侵犯任何人的合法权益；<br>（2）课程上课过程中应尊重用户知情权、选择权，应当坚持诚信原则，不误导、欺诈、混淆用户，尊重用户的隐私，不骚扰用户，不制造垃圾信息。<br>（3）如您的股东或高级管理人员（包括但不限于董事长、总经理、财务总监等）同时也为酷校及酷校关联公司的员工（包括酷校的试用期员工、正式员工、劳务派遣形式的员工及其他受酷校及酷校关联公司管理的其他性质的员工或人员）时，您应当在注册时主动书面告知酷校。</p><h5>2.5.3.</h5><p>您不得从事任何包括但不限于以下的违反法规的行为，也不得为以下违反法规的行为提供便利（包括但不限于为您课程的用户的行为提供便利等）：<br>（1）反对宪法所确定的基本原则的行为；<br>（2）危害国家安全，泄露国家秘密，颠覆国家政权，破坏国家统一的行为；<br>（3）损害国家荣誉和利益的行为；<br>（4）煽动民族仇恨、民族歧视，破坏民族团结的行为；<br>（5）破坏国家宗教政策，宣扬邪教和封建迷信的行为；<br>（6）散布谣言，扰乱社会秩序，破坏社会稳定的行为；<br>（7）散布淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪的行为；<br>（8）侮辱或者诽谤他人，侵害他人合法权益的行为；<br>（9）侵害他人知识产权、商业秘密等合法权利的行为；<br>（10）恶意虚构事实、隐瞒真相以误导、欺骗他人的行为；<br>（11）发布、传送、传播广告信息及垃圾信息；<br>（12）其他法律法规禁止的行为。</p><h5>2.5.4.</h5><p>您不得从事包括但不限于以下行为，也不得为以下行为提供便利（包括但不限于为您的用户的行为提供便利等）：<br>（1）删除、隐匿、改变酷校显示或其中包含的任何专利、著作权、商标或其他所有权声明；<br>（2）以任何方式干扰或企图干扰酷校任何产品、任何部分或功能的正常运行，或者制作、发布、传播上述工具、方法等；<br>（3）未经酷校书面许可，您在课程中不得使用包括但不限于”酷校”、其他酷校商标标识或其任何变体、缩写、改写等；<br>（4）避开、尝试避开或声称能够避开任何内容保护机制，或导致用户认为其直接与酷校及酷校相关产品进行交互；<br>（5）在未获得酷校书面许可的情况下，以任何方式使用酷校URL地址、技术接口等；<br>（6）在未经过用户同意的情况下，向任何其他用户及他方显示或以其他任何方式提供该用户的任何信息；<br>（7）请求、收集、索取或以其他方式获取用户手机、等酷校服务的登录帐号、密码或其他任何身份验证凭据；<br>（8）在没有获得用户明示同意的情况下，直接联系用户，或向用户发布任何商业广告及骚扰信息；<br>（9）为任何用户自动登录到酷校提供代理身份验证凭据；<br>（10）提供跟踪功能，包括但不限于识别其他用户在个人主页上查看、点击等操作行为；<br>（11）自动将浏览器窗口定向到其他网页；<br>（12）未经授权获取对酷校产品或服务的访问权；<br>（13）课程服务内容中含有计算机病毒、木马或其他恶意程序等任何可能危害酷校或用户权益和终端信息安全等的内容；<br>（14）设置或发布任何违反相关法规、公序良俗、社会公德等的玩法、内容等；<br>（15）公开表达或暗示，您与酷校之间存在合作关系，包括但不限于相互持股、商业往来或合作关系等，或声称酷校对您的认可；<br>（16）未经酷校许可，实施包括但不限于以赠送、发售等方式使用酷校或第三方的任何虚拟货币或品牌服务（例如Q币、Q点、黄钻等）的行为；<br>（17）其他酷校认为不应该、不适当的行为、内容。</p><h5>2.5.5.</h5><p>本服务中可能会使用第三方软件或技术，若有使用， 前述第三方软件或技术相关协议或其他文件，均是本协议不可分割的组成部分，与本协议具有同等的法律效力，您应当遵守这些要求。 否则，因此带来的一切责任您应自行承担。如因本服务使用的第三方软件或技术引发的任何纠纷，由该第三方负责解决。</p><h4>2.6.</h4><p>课程的下线规则</p><h5>2.6.1.</h5><p>您发布课程后，无论课程是否收费，在课程未按照您发布课程时的安排履行完毕的，或课程有用户已经报名但未学习完的，在未经已报名但未学习完用户和酷校都同意的前提下，您不得擅自终止课程的运营或服务的提供。</p><h5>2.6.2.</h5><p>您发布课程后，无论课程是否收费，在课程未按照您发布课程时的安排，或课程有用户已经报名但仍未学习完的，若您确须要提前终止课程运营或服务提供，您应至少提前通知用户和酷校，同时，您在取得已报名但未学习完用户同意并妥善处理相关退费或各类用户损失等事宜后，并经酷校同意后，方可终止相关课程的运营或服务的提供。</p><h5>2.6.3.</h5><p>您发布课程后，无论课程是否收费，在课程未按照您发布课程时的安排，或课程有用户已经报名但仍未学习完的，若您发布的课程由于违反相关法规或本协议相关约定时，您应该按照酷校的要求终止课程的运营或酷校有权随时终止课程的运营或服务的提供，同时，您应妥善处理已报名但未学习完用户的退费、各类用户损失等问题，若由此造成用户、酷校损失或有纠纷的，您应负责解决相关纠纷并自行承担全部责任。</p><h5>2.6.4.</h5><p>若课程因为任何原因需要下线的，在课程下线过程中，您应积极与用用户联系并妥善处理已报名但未学习完用户的退费、各类用户损失等事宜，依法保护用户的合法权益不受损害，否则，若由此造成用户、酷校损失或有纠纷的，您应负责解决相关纠纷并自行承担全部责任。同时，您应发布下线公告直至课程下线（下线公告应当包含但不限于下线时间、退费方式、用户补偿方案、客服联系电话等内容），且您不得强制用户切换到其他第三方平台进行学习，亦不得免除自身对未结束课程进行退款责任等义务。如您选择退还用户已支付的课程相应费用、补偿用户损失的，您同意酷校在您的账户结算额中直接扣除前述退还给用户的课程相应费用、补偿用户损失费用等全部费用，具体退款流程可参见酷校现有的或后续颁布的相关规则或说明。</p><h4>2.7.</h4><p>关于用户数据的规则</p><h5>2.7.1.</h5><p>您的课程或服务对于用户数据的收集、保存、使用等必须满足以下要求：<br>（1）您的课程或服务需要收集用户任何数据的，必须事先获得用户的明确同意，且仅应当收集为课程运行而必要的用户数据，同时应当告知用户相关数据收集的目的、范围及使用方式等，保障用户知情权；<br>（2）您收集用户的数据后，必须采取必要的保护措施，防止用户数据被盗、泄漏等；<br>（3）您在特定课程中收集的用户数据仅可以在该特定课程中使用，不得将其使用在该特定课程之外或为其他任何目的进行使用，也不得以任何方式将其提供给他人；<br>（4）您应向用户提供隐私保护政策。隐私保护政策须在课程界面上明显位置向用户展示。</p><h5>2.7.2.</h5><p>您不得收集用户的隐私信息数据及其他酷校认为属于敏感信息范畴的数据，包括但不限于不得收集或要求用户提供任何手机号码、手机密码、用户关系链、好友列表数据、银行账号和密码等。</p><h5>2.7.3.</h5><p>您不得使用酷校数据用于向用户进行广告宣传使用。</p><h5>2.7.4.</h5><p>如果酷校认为您收集、使用用户数据的方式，可能损害用户体验，酷校有权要求您删除相关数据并不得再以该方式收集、使用用户数据。</p><h5>2.7.5.</h5><p>酷校有权限制或阻止您获取用户数据及酷校数据。</p><h5>2.7.6.</h5><p>未经酷校事先书面同意， 您不得为本协议约定之外的目的使用用户数据或平台运营数据，亦不得以任何形式将前述数据提供给他人。</p><h5>2.7.7.</h5><p>一旦课程发布者停止使用酷校，或酷校基于任何原因终止您使用本服务，您必须立即删除全部从酷校中获得的数据（包括各种备份）， 且不得再以任何方式进行使用。</p><h5>2.7.8.</h5><p>您应自行对因使用本服务而存储在酷校服务器的各类数据等信息，在本服务之外，采取合理、安全的技术措施，确保其安全性， 并对自己的行为（包括但不限于自行安装软件、采取加密措施或进行其他安全措施等）所引起的结果承担全部责任。</p><h4>2.8.</h4><p>法律责任</p><h5>2.8.1.</h5><p>您保证：如果您使用本服务产生相应费用的，您会按照本协议及相关协议、规则等支付相关费用。否则，您理解并同意：每延期一日，您应当向酷校支付所欠费用千分之一的违约金。同时，酷校有权随时单方采取包括但不限于以下措施中的一种或多种，以维护自己的合法权益。<br>（1）从其他酷校应支付给您或您关联公司的任何费用中直接抵扣；<br>（2）暂停向您或您关联公司结算或支付任何费用；<br>（3）中止、终止您或您关联公司使用本服务；<br>（4）中止、终止您或您关联公司的后台管理权限；<br>（5）删除您或您关联公司在使用本服务中存储的任何数据；<br>（6）禁止您今后将您的任何新课程接入酷校；<br>（7）其他酷校可以采取的为维护自己权益的措施。</p><h5>2.8.2.</h5><p>您保证：您使用本服务及您的任何行为，不违反任何相关法规、本协议和相关协议、规则等。您理解并同意：若酷校自行发现或根据相关部门的信息、权利人的投诉等发现您可能存在违反前述保证情形的，酷校有权根据一般人的认识自己独立判断，以认定您是否存在违反前述保证情形，若酷校经过判断认为您存在违反前述保证情形的，酷校有权随时单方采取以下一项或多项措施。<br>（1）要求您立即更换、修改违反前述保证情形的相关内容；<br>（2）对存在违反前述保证情形的课程、您或您关联公司名下的全部课程或任何一款课程采取下线措施即终止课程在酷校的运营；<br>（3）禁止您或您关联公司今后将任何新课程接入酷校；<br>（4）中止、终止向违反前述保证情形的课程、您或您关联公司名下的全部课程或任何一款课程，或您或您关联公司提供部分或全部本服务；<br>（5）追究您的法律责任；<br>（6）将您的行为对外予以公告；<br>（7）其他酷校认为适合的处理措施。</p><h5>2.8.3.</h5><p>如在酷校告知您或您自行得知您存在任何违法情形后，您应按法律法规或酷校的规定向酷校提出反通知。但是，无论酷校是否告知您、您是否提出反通知或反通知是否符合相关法规、酷校要求等，均不影响酷校进行自己的独立判断和采取相关措施。</p><h5>2.8.4.</h5><p>若酷校按照上述条款、本协议的其他相关约定或因您违反相关法律的规定，对您或您的课程采取任何行为或措施，所引起的纠纷、责任等一概由您自行负责，造成您损失的，您应自行全部承担，造成酷校或他人损失的，您也应自行承担全部责任。</p><h5>2.8.5.</h5><p>若酷校按照上述条款、本协议的其他相关约定或因您违反相关法律的规定，对您或您的课程采取任何行为或措施后，导致您没有使用到相应服务但已经缴纳相应费用的，对该部分费用，酷校有权不予退还，而作为您违反约定的违约金予以没收。</p><h3>3. 酷校的权利义务</h3><p></p><h4>3.1.</h4><p>酷校会根据您选择的服务向您提供相应的服务，如后续酷校提供服务需要收费的，您应向酷校支付相应费用，酷校在您支付相应费用后，会向您提供相应的服务。</p><h4>3.2.</h4><p>保护您的信息的安全是酷校的一项基本原则，未经您的同意，酷校不会向酷校以外的任何公司、组织和个人披露、提供您的信息，但下列情形除外：<br>（1）据本协议或其他相关协议、规则等规定可以提供的；<br>（2）依据法律法规的规定可以提供的；<br>（3）行政、司法等政府部门要求提供的；<br>（4）您同意酷校向第三方提供；<br>（5）为解决举报事件、提起诉讼而需要提供的；<br>（6）为防止严重违法行为或涉嫌犯罪行为发生而采取必要合理行动所必须提供的。</p><h4>3.3.</h4><p>尽管酷校对您的信息保护做了极大的努力，但是仍然不能保证在现有的安全技术措施下，您的信息可能会因为不可抗力或非酷校因素造成泄漏、窃取等，由此给您造成损失的，您同意酷校可以免责。</p><h4>3.4.</h4><p>酷校有权开发、运营与您课程相似或相竞争的课程，同时酷校也不保证酷校上不会出现其他课程发布者提供的与您课程相竞争的课程。</p><h4>3.5.</h4><p>酷校有权在包括但不限于课程介绍页等，向用户阐述该课程为您开发以及由您向用户提供客户服务等。</p><h4>3.6.</h4><p>酷校可将本协议下的权利和义务的部分或全部转让给他人，如果您不同意酷校的该转让，则有权停止使用本协议下服务。否则，视为您对此予以接受。</p><h4>3.7.</h4><p>除了另行有约定外，酷校无需为按照本协议享有的权益而向您支付任何费用。</p><h4>3.8.</h4><p>您理解并同意：为向更多互联网使用者推广您的课程，酷校有权采取以下行为，而无须再取得您的同意。<br>（1）在酷校以外的平台、网站等采取各种形式对课程进行宣传、推广；<br>（2）酷校可根据整体运营安排，自主选择向整个或部分全世界范围内的互联网用户提供您的课程；<br>（3）有权为本协议目的使用您课程的LOGO、标识、名称、图片等相关素材。</p><h3>4. 广点通服务</h3><p></p><h4>4.1</h4><p>广点通服务，指酷校向您提供的，供您将您所接入的课程或您提供的服务在其他酷校平台上进行推广的服务，是酷校向您提供的本服务的一部分， 是否使用该服务由您自行选择。该服务的相关协议、规则、公告、提示等，请见相应页面，您若选择使用该服务的，应按照广点通的要求进行开通，并遵守前述相关协议、 规则、公告、提示等。</p><h4>4.2</h4><p>您以任何形式登录、使用广点通服务，即表示您已理解并接受广点通服务的相关协议、规则、公告、提示等的约束。</p><h4>4.3</h4><p>您同意酷校有权无须经您同意或提前通知而直接对广点通服务的相关协议、规则等进行修改，修改后的内容一旦在网页上公布即有效代替原来的条款， 对您产生约束力。</p><h3>5. 关于免责</h3><p></p><h4>5.1</h4><p>您理解并同意：鉴于网络服务的特殊性，酷校有权在无需通知您的情况下根据酷校的整体运营情况或相关运营规范、规则等，可以随时变更、中止或终止部分或全部的服务，若由此给您造成损失的，您同意放弃追究酷校的责任。</p><h4>5.2</h4><p>您理解并同意：为了向您提供更完善的服务，酷校有权定期或不定期地对提供本服务的平台或相关设备进行检修、维护、升级等，此类情况可能会造成相关服务在合理时间内中断或暂停的，若由此给您造成损失的，您同意放弃追究酷校的责任。</p><h4>5.3</h4><p>您理解并同意：酷校的服务是按照现有技术和条件所能达到的现状提供的。酷校会尽最大努力向您提供服务，确保服务的连贯性和安全性；但酷校不能保证其所提供的服务毫无瑕疵，也无法随时预见和防范法律、技术以及其他风险，包括但不限于不可抗力、病毒、木马、黑客攻击、系统不稳定、第三方服务瑕疵、政府行为等原因可能导致的服务中断、数据丢失以及其他的损失和风险。所以您也同意：即使酷校提供的服务存在瑕疵，但上述瑕疵是当时行业技术水平所无法避免的，其将不被视为酷校违约，同时，由此给您造成的数据或信息丢失等损失的，您同意放弃追究酷校的责任。</p><h4>5.4</h4><p>您理解并同意：在使用本服务的过程中，可能会遇到不可抗力等风险因素，使本服务发生中断。不可抗力是指不能预见、不能克服并不能避免且对一方或双方造成重大影响的客观事件，包括但不限于自然灾害如洪水、地震、瘟疫流行和风暴等以及社会事件如战争、动乱、政府行为等。出现上述情况时，酷校将努力在第一时间与相关单位配合，及时进行修复，若由此给您造成损失的，您同意放弃追究酷校的责任。</p><h4>5.5</h4><p>您理解并同意：若由于对以下情形导致的服务中断或受阻，给您造成损失的，您同意放弃追究酷校的责任：<br>（1）受到计算机病毒、木马或其他恶意程序、黑客攻击的破坏；<br>（2）您或酷校的电脑软件、系统、硬件和通信线路出现故障；<br>（3）您操作不当；<br>（4）您通过非酷校授权的方式使用本服务；<br>（5）其他酷校无法控制或合理预见的情形。</p><h3>6. 服务的中止或终止</h3><p></p><h4>6.1</h4><p>如您书面通知酷校不接受本协议或对其的修改，酷校有权随时中止或终止向您提供本服务。</p><h4>6.2</h4><p>因不可抗力因素导致您无法继续使用本服务或酷校无法提供本服务的，酷校有权随时终止协议。</p><h4>6.3</h4><p>本协议约定的其他中止或终止条件发生或实现的，酷校有权随时中止或终止向您提供本服务。</p><h4>6.4</h4><p>由于您违反本协议约定，酷校依约终止向您提供本服务后，如您后续再直接或间接，或以他人名义注册使用本服务的， 酷校有权直接单方面暂停或终止提供本服务。</p><h4>6.5</h4><p>如本协议或本服务因为任何原因终止的，对于您的帐号中的全部数据或您因使用本服务而存储在酷校服务器中的数据等任何信息，酷校可将该等信息保留或删除，包括服务终止前您尚未完成的任何数据。</p><h4>6.6</h4><p>如本协议或本服务因为任何原因终止的，您应自行处理好关于数据等信息的备份以及与您的用户之间的相关事项的处理等，由此造成酷校损失的，您应负责赔偿。</p><h3>7. 关于通知</h3><p></p><h4>7.1</h4><p>酷校可能会以网页公告、网页提示、电子邮箱、手机短信、常规的信件传送、您注册的本服务账户的管理系统内发送站内信等方式中的一种或多种， 向您送达关于本服务的各种规则、通知、提示等信息，该等信息一经酷校采取前述任何一种方式公布或发送，即视为您已经接受并同意，对您产生约束力。 若您不接受的，请您书面通知酷校并停止使用本服务，否则视为您已经接受、同意。</p><h4>7.2</h4><p>若由于您提供的电子邮箱、手机号码、通讯地址等信息错误，导致您未收到相关规则、通知、提示等信息的，您同意仍然视为您已经收到相关信息并受其约束， 一切后果及责任由您自行承担。</p><h4>7.3</h4><p>您也同意酷校或合作伙伴可以向您的电子邮件、手机号码等发送可能与本服务不相关的其他各类信息包括但不限于商业广告等。</p><h4>7.4</h4><p>若您有事项需要通知酷校的，应当按照本服务对外正式公布的联系方式书面通知酷校。</p><h3>8. 知识产权</h3><p></p><h4>8.1</h4><p>酷校在本服务中提供的信息内容（包括但不限于网页、文字、图片、音频、视频、图表等）的知识产权均归酷校所有，依法属于用户、课程发布者及其他第三方所有的除外。 除另有特别声明外，酷校提供本服务时所依托软件的著作权、专利权及其他知识产权均归酷校所有。酷校在本服务中所使用的“酷校”形象等商业标识，其著作权或商标权归酷校所有。上述及其他任何酷校依法拥有的知识产权均受到法律保护，未经酷校书面许可， 您不得以任何形式进行使用或创造相关衍生作品。</p><h4>8.2</h4><p>您仅拥有依照本协议约定合法使用本服务或相关API的权利，与本服务相关的API相关的著作权、专利权等相关全部权利归酷校所有。 未经酷校书面许可，您不得违约或违法使用，不得向任何单位或个人出售、转让、转授权酷校的代码、API及开发工具等。</p><h3>9. 其他</h3><p></p><h4>9.1</h4><p>酷校可能不断发布的关于本服务的其他相关协议、规则等内容均为本协议的附件，是本协议不可分割的部分，与本协议具有同等法律效力。</p><h4>9.2</h4><p>本协议内容同时包括《酷校服务协议》及酷校可能不断发布的关于本服务的其他相关协议、规则等内容。上述内容一经正式发布，即为本协议不可分割的组成部分，您同样应当遵守。 上述内容与本协议存在冲突的，以本协议为准。一经注册或使用本协议下任何服务，即视为您已阅读并同意接受本协议及上述内容的约束。 酷校有权在必要时单方修改本协议或上述内容，相关内容变更后，如果您继续使用本服务，即视为您已接受修改后的相关内容。 如果您不接受修改后的相关内容，应当停止使用相关服务。</p><h4>9.3</h4><p>本协议签订地为中华人民共和国广东省广州市天河区。</p><h4>9.4</h4><p>本协议的成立、生效、履行、解释及纠纷解决，适用中华人民共和国大陆地区法律（不包括冲突法）。</p><h4>9.5</h4><p>若您和酷校之间发生任何纠纷或争议，首先应友好协商解决；协商不成功的，双方均同意将纠纷或争议提交本协议签订地有管辖权的人民法院解决。</p><h4>9.6</h4><br>本协议所有条款的标题仅为阅读方便，本身并无实际涵义，不能作为本协议涵义解释的依据。（完）<br></div>',
restrict:"E",replace:!0,transclude:!0}}),module.factory("ssoMethod",["request",function(t){var e=DYCONFIG.sso.rUrl;return{getUserAttrs:function(){return UINFO&&UINFO.usr&&UINFO.usr.attrs?UINFO.usr.attrs:void 0},userInfo:function(i,a){i=i||{},i.token=rcpAid.getToken();var o={method:"GET",url:e+"sso/api/uinfo",params:i};return t(angular.extend(o,a||{}))},updateUser:function(i,a){var o={method:"POST",url:e+"usr/api/update",params:{token:rcpAid.getToken()},data:i};return t(angular.extend(o,a||{}))},sendMessage:function(i,a){i.token=rcpAid.getToken();var o={method:"GET",url:e+"tlogin/api/sendMessage",params:i};return t(angular.extend(o,a||{}))},bindPhone:function(i,a){i.token=rcpAid.getToken();var o={method:"GET",url:e+"tlogin/api/bindPhone",params:i};return t(angular.extend(o,a||{}))},resetPassword:function(i,a){i.token=rcpAid.getToken();var o={method:"GET",url:e+"tlogin/api/resetPwd",params:i};return t(angular.extend(o,a||{}))},GCertList:function(i,a){i.token=rcpAid.getToken();var o={method:"GET",url:e+"cert/api/list",params:i};return t(angular.extend(o,a||{}))},UCertStatus:function(i,a){var o={method:"POST",url:e+"cert/api/update",params:{token:rcpAid.getToken()},data:i};return t(angular.extend(o,a||{}))}}}]),module.run(["service","ssoMethod",function(t,e){t.expand("ssoMethod",function(){return e})}]),module.factory("headSearch",["request",function(t){var e=g_conf.pes.rUrl;return{SearchIntelligent:function(i,a){var o={method:"GET",url:e+"pub/api/SearchIntelligent",params:i,option:{loading:!1}};return t(angular.extend(o,a||{}))}}}]),module.run(["service","headSearch",function(t,e){t.expand("headSearch",function(){return e})}]),module.directive("headnav",function(){return{template:'<header><div ng-class="headMaximizeLock ? \'head-maximize\' : \'head-minimize\'"><div ng-class="param.style"><div class="image-head-rainbow decoration-ic"></div><section class="g-m-w header-area"><div class="minimize-logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.small}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><nav class="minimize-nav"><ul><li ng-repeat="item in navList track by $index" ng-class="item.class"><a ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}">{{item.name}}</a><div ng-if="item.child.length"><ul><li ng-repeat="c in item.child"><a ng-href="{{c.href || \'\'}}" target="{{c.target || \'_self\'}}">{{c.name}}</a></li></ul></div></li></ul></nav><div class="logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.large}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><div class="top-user-menu-bar" ng-class="{clearminw: user.account}"><top-user-menu user="user" item-list="itemList"></top-user-menu></div><div class="h-sc" ng-controller="headSearchCtrl"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index, \'资源\')"><div class="text-of pd-r10"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a class="item-name" ng-bind-html="item.name | titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a ng-href="javascript:void(0);" ng-click="goToSort(item.name)" class="mg-r20" ng-repeat="item in scHotWord">{{item.name}}</a></div></div></section><section class="nav-area"><div class="g-m-w"><div class="n-categories" ng-controller="categoriesCtrl" ng-mouseenter="service.mouseenter(hover)" ng-mouseleave="service.mouseleave(hover)"><div class="dt">全部课程</div><div class="dd" id="by-categories" ng-show="categoriesUnfoldLock || hover.mouseEnterLock"><div class="image-giraffe giraffe-icon"></div><div class="dd-inner"><div class="item" ng-repeat="item in categoriesListStyle1 track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)" ng-show="$index<5 || hover.mouseEnterLock"><div class="layer"><h3><a ng-href="goToCategory(item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><div class="hot-word"><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="text-of" ng-repeat="child in item.child track by $index" ng-show="$index<3" title="{{child.name}}">{{child.name}}</a></div><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<3"><dt><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<15" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>3"><a ng-href="goToCategory(item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div><div ng-repeat="list in categoriesListStyle2 track by $index"><div class="big-sort"><a ng-href="goToCategory(item.name)" target="_blank" title="{{list.name}}">{{list.name}}</a></div><div class="item" ng-repeat="item in list.child track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)"><div class="layer"><h3><a ng-href="goToCategory(list.name,item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<4"><dt><a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(list.name,item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<10" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>4"><a ng-href="goToCategory(list.name,item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div></div></div></div></div><nav class="nav"><a ng-repeat="item in navList track by $index" ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}" ng-class="item.class">{{item.name}}</a></nav><div class="extra" ng-show=""><a href="javascript:void(0);" class="icf t-icf">名师认证</a> <a href="javascript:void(0);" class="icf e-icf">真实评价</a> <a href="javascript:void(0);" class="icf r-icf">随时退</a></div></div></section></div></div></header>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user",nav:"="},controller:["$rootScope","$scope","$element","$attrs","service",function(t,e,i,a,o){e.service=o,e.catType=parseInt(rcpAid.getCourseCat()),t.$watch("headMaximizeLock",function(t){t&&(e.headMaximizeLock=t)}),t.$watch("categoriesUnfoldLock",function(t){t&&(e.categoriesUnfoldLock=t)}),t.$watch("catDomain",function(t){if(t)switch(t){case"aikexue.com":e.init(2)}}),e.$on("login",function(t,i){i&&e.loginInit()}),e.loginInit=function(){3===e.catType&&(e.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:e.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}])},e.init=function(t){if("order"===e.nav)return e.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"个人空间",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],void(e.param={logo:{small:"/rcp-common/imgs/order/head-icon.png",large:"/rcp-common/imgs/icon/head-icon.png",href:"/my-order.html",msg:"我的酷校"},style:""});switch(e.catType){case 3:e.isLogin?e.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:e.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}]:e.navList=[{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}],e.param={logo:{small:"/rcp-common/imgs/icon/gzmooc-logo.png",large:"/rcp-common/imgs/icon/gzmooc-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校 - 首页"},style:""};break;case 2:e.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"全部课程",href:rcpAid.getUrl("分类"),"class":"key",target:"_blank"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],e.param={logo:{small:"/rcp-common/imgs/icon/aikexue-logo-2.png",large:"/rcp-common/imgs/icon/aikexue-logo.png",href:DYCONFIG.rcp.rUrl,msg:"爱科学"},style:"aikexue-head"};break;default:e.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"我要吐槽",href:rcpAid.getUrl("我要吐槽"),"class":"key",target:"_blank"}],e.param={logo:{small:"/rcp-common/imgs/icon/book-logo-2.png",large:"/rcp-common/imgs/icon/book-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校LOGO·让学习更Cool"},style:""}}},e.init()}]}}),module.directive("topUserMenu",function(){return{template:'<div class="top-user-menu"><div style="font-size:14px;line-height:40px" ng-show="!currentUser.uid"><a ng-href="{{link.login}}" id="login" class="color-cyan pd-l20"><i class="image-login-user-ic"></i>马上登录 </a><span style="color:#ececec;margin:0 8px">| </span><a ng-href="{{link.register}}" class="color-cyan">注册</a></div><div class="menber-link" ng-show="currentUser.uid"><a href="" class="u-info" rel="member_link"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <span class="name" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></span> <i class="x-arrow-dowm">&gt;</i></a><div class="u-panel"><div class="tup-box"><div class="tup-info" rel="user_info_box"><div class="user-head" rel="user_face_box"><a ng-href="{{link.setting}}"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"></a></div><div class="user-identity"><p class="user-name text-of"><a href="" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></a></p><p class="attestation-un" ng-class="{\'attestation\':attestation==\'已认证\'}"><i class="image-attestation-yellow"></i> <span>{{attestation}}</span></p></div><div class="clear"></div></div><div class="tup-operate"><div class="card-sets"><a href="{{link.applySpaceUrl}}" class="key f-l"><i class="image-attestation"></i> <span class="text-4f">认证管理</span> </a><a href="{{link.setting}}" target="_blank" class="key f-l"><i class="image-settings"></i> <span class="text-4f">设置</span> </a><a href="" class="key f-r" ng-click="logout()"><i class="image-logout"></i> <span class="text-4f">退出</span></a></div><div class="card-links"><a ng-repeat="item in itemList" ng-href="{{item.href || \'\'}}" ng-class="item.name == \'...\' ? \'disabled key \'+item.icon : \'key \'+item.icon"><i></i> <span>{{item.name}}</span></a></div></div></div></div></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user"},controller:["$rootScope","$scope","$timeout","$location","service",function(t,e,i,a,o){e.$watch("itemList",function(t){if(t){var i=e.itemList.length,a=i%3;if(a)for(var o=3-i%3+i,n=i;o>n;n+=1)t.push({name:"..."})}},!0),e.logout=function(){var t=rcpAid.getUrl("首页");location.href=rcpAid.getUrl("退出",{url:encodeURIComponent(t)})},e.$on("login",function(t,i){i.uid&&e.loginInit()}),e.loginInit=function(){e.currentUser=t.currentUser,e.currentUser.certification&&(e.attestation="已认证")},e.init=function(){var t=rcpAid.getNoTokenUrl();e.link={login:rcpAid.getUrl("登录",{url:encodeURIComponent(t)}),register:rcpAid.getUrl("注册",{url:encodeURIComponent(t)}),applySpaceUrl:rcpAid.getUrl("实名认证"),setting:rcpAid.getUrl("个人设置",{url:window.location.href})},e.attestation="未认证"},e.init()}]}}),module.controller("categoriesCtrl",["$rootScope","$scope","service",function(t,e,i){function a(t){switch(t){case 2:e.categoriesListStyle2=o||[];break;default:e.categoriesListStyle1=o||[]}}e.service=i,e.hover={},e.catType=rcpAid.getCourseCat(),e.byCategories=function(){e.byCategoriesLoading=!0,a(e.catType)},e.listenerMember={byCategories:{node:"#by-categories",callback:e.byCategories}};var o;e.goToCategory=function(){var t=[].slice;return rcpAid.getUrl("分类",{tags:t.call(arguments,0).join(",")})}}]),module.directive("searchDir",function(){return{template:'<div class="h-sc"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-repeat="item in mcCategoryList track by $index" ng-if="$index < lMaxLen" ng-class="{hover: $index == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'类\')" ng-click="matchGoToCategory(item.tag,scText)"><div class="text-of"><a href="javascript:;">{{text}}</a> 在 <a href="javascript:;" class="item-name color-cyan">{{item.tag}}</a> 分类中搜索</div></li></ul><div style="margin:0 10px;border-top:1px solid #dfdfdf" ng-if="mcCourseList.length && mcCategoryList.length"></div><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'资源\')"><div class="text-of"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a href="javascript:;" class="item-name" ng-bind-html="item.name|titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a href="" class="mg-r20" ng-repeat="item in scHotWord" ng-click="goToSort(item.name)">{{item.name}}</a></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{hot:"="},controller:"headSearchCtrl"}}),module.controller("headSearchCtrl",["$rootScope","$scope","$document","$element","service","headSearch",function(t,e,i,a,o,n){function r(){e.scText="",d()}function s(){w=!0,e.KeyDownIndex=e.moveKeyIndex,h()}function c(){"number"!=typeof e.moveKeyIndex?e.moveKeyIndex=0:e.moveKeyIndex=(e.moveKeyIndex+1)%e.aMaxLen,s()}function l(){"number"!=typeof e.moveKeyIndex?e.moveKeyIndex=e.aMaxLen-1:e.moveKeyIndex=e.moveKeyIndex<0?e.aMaxLen-1:e.moveKeyIndex-1,s(),u(e.scText.length)}function h(){var t,i=e.KeyDownIndex,a=e.lMaxLen;return e.scTag=void 0,a>i&&(e.scText=e.text),i>=a&&(t=e.mcCourseList[i-e.lMaxLen],t&&(e.scText=t.name)),t}function d(t){e.matchReadyLock=!1,t&&(i.unbind("click"),e.$digest())}function p(){i.unbind("click").bind("click",function(){d("digest")}),e.matchReadyLock=!0}function g(){e.matchReadyLock&&(clearTimeout(y),y=setTimeout(function(){d("digest")},300))}function u(t){var e=a.find('input[ng-model="scText"]').get(0);if("selectionStart"in e&&(e.selectionStart=t,e.selectionEnd=t),"createTextRange"in e){var i=e.createTextRange();i.moveStart("character",t),i.collapse(!0),i.select()}}function m(t,i){e.inSort&&!angular.isArray(t)||angular.forEach(t,function(t){return e.inSort?!1:void(i(t)||angular.isArray(t.child)&&t.child.length&&(m(t.child,i),v("push",t.name)))})}function f(t,i){switch(e.inSort=!1,v("clear"),m(t,function(t){return e.inSort=t.name===i,e.inSort&&v("push",t.name),e.inSort}),e.inSort){case!0:v("splice",i);break;default:v("clear")}return e.categorySelect}function v(t,i){var a=e.categorySelect;switch(t){case"clear":a.splice(0,a.length);break;case"push":a.push(i);break;case"splice":a.splice(0,$.inArray(i,a))}}function b(t,e){o.dialog.alert(e),console[t](e)}function x(t){var e=[];if(t.length)for(var i=0,a=t.length;a>i;i++)e.push({id:t[i].hasOwnProperty("id")?t[i].id:"",name:t[i].hasOwnProperty("title")?t[i].title:"",t:t[i].hasOwnProperty("type")?t[i].type:""});return e}e.scHotWord=[],e.scSelect=[{name:"所有分类",value:"",fixLock:!0},{name:"课程",value:10},{name:"题库",value:20}],e.scSelectVal=e.scSelect[0],e.onkeydown=function(t){switch(t.stopPropagation(),t.keyCode){case 13:e.scText||(e.scText=$(".head-search-bar input").eq(0).val());var i=e.KeyDownIndex,a=e.lMaxLen;"number"==typeof i&&i>=0&&a>i&&e.scTag?e.matchGoToCategory(e.scTag,e.scText):i>=0&&e.matchReadyLock?location.href=rcpAid.getUrl("课程详情",{cid:e.mcCourseList[i].id}):e.goToSearch(e.scSelectVal.value,e.scText);break;case 38:l();break;case 40:c();break;default:w=!1,e.moveKeyIndex=void 0,e.KeyDownIndex=void 0,e.scTag=void 0}};var w,y;a.find('input[ng-model="scText"]').unbind("focus").bind("focus",p),a.find('input[ng-model="scText"]').unbind("blur").bind("blur",g),e.mouseenter=function(t,i){switch(i){case"类":e.moveKeyIndex=t;break;case"资源":e.moveKeyIndex=t+e.lMaxLen}},e.goToSearch=function(t,e){r(),location.href=rcpAid.getUrl("搜索",{type:t,query:e?encodeURIComponent(e):e})},e.goToSort=function(t){r(),location.href=rcpAid.getUrl("分类",{tags:t})},e.stopPropagation=function(t){t.stopPropagation()},e.matchChange=function(t,i){if(!w){if(d(),!i)return e.mcCategoryList=[],void(e.mcCourseList=[]);e.text=i,n.SearchIntelligent({key:i,courseType:t||null,limit:10}).then(function(t){e.scText&&(e.matchReadyLock=!0,e.mcCourseList=x(t.data.courses||[]),e.mcCategoryList=[],e.lMaxLen=e.mcCategoryList.length>3?3:e.mcCategoryList.length,e.cMaxLen=e.mcCourseList.length-e.lMaxLen,e.aMaxLen=e.lMaxLen+e.cMaxLen,e.mcCourseList.length||e.mcCategoryList.length||d())},function(t){b("错误代码："+t.data.data.code)})}},e.$watch("scSelectVal.value",function(){e.matchChange(e.scSelectVal.value,e.scText)}),e.matchGoToCategory=function(e,i){if(!t.allTagCategroy||!t.allTagCategroy.length)return void b("error","获取分类数据失败");var a=f(t.allTagCategroy,e).reverse().join(",");a?(r(),location.href=rcpAid.getUrl("分类",{tags:a,query:i})):b("error","找不到这个分类，请检查接口数据")},e.categorySelect=[],e.intoDetail=function(t){t.hasOwnProperty("id")&&(location.href=rcpAid.getUrl("课程详情",{cid:t.id}))}}]),module.directive("tailnav",function(){return{template:'<footer><section class="footer" id="footer"><div class="g-m-w"><div class="copyright"><p>广州市大洋信息技术股份有限公司 版权所有</p><p>Copyright © 2015 ITDAYANG. All Rights Reserved.</p><p>{{caseNumber}}</p></div><div class="footer-link"><a href="http://www.itdayang.com/about.html" target="_blank">关于我们</a> <span>- </span><a href="http://www.itdayang.com/contact.html" target="_blank">联系我们</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">法律条款</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">帮助中心</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">学校申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">机构申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">意见反馈</a></div><div class="clear"></div></div></section></footer>',restrict:"E",replace:!0,transclude:!0,scope:{data:"=data"},controller:["$scope","service",function(t,e){t.catType=rcpAid.getCourseCat();var i=DYCONFIG.domain||[];angular.forEach(i,function(e){e.domain===location.host&&(t.caseNumber=e.domainNum)}),t.atBuilding=function(){e.dialog.alert("正在建设中...")}}]}}),module.filter("titleMatchKw",["$sce",function(t){return function(e,i){var a="<b>"+i+"</b>",o=/([\[\]\(\)\{\}\*\?\+\^\$\.\|\\])/gi,n=i.replace(o,"\\$1");return e=e.replace(new RegExp(n,"ig"),a),t.trustAsHtml(e)}}]),function(){function t(){var o=document.getElementById("footer");if(o){var n=document.documentElement.scrollHeight-1||document.body.scrollHeight-1,r=document.documentElement.clientHeight||document.body.clientHeight;a=r>=n?1:2,a!==i&&(r>=n?(e(o.parentNode,{height:o.offsetHeight+"px"}),e(o,{position:"absolute",width:"100%",bottom:0,left:0})):(e(o.parentNode,{height:o.offsetHeight+"px"}),e(o,{position:"",width:"100%",bottom:0,left:0}))),i=r>=n?1:2}setTimeout(t)}if(!window.fixedFooterFlag){window.fixedFooterFlag=!0;var e=function(t,e){for(k in e)t.style[k]=e[k]},i=0,a=1;t()}}(),window.isUploadFinish=function(){for(var t=0;t<uer.files.length;t++)if("L"!==uer.files[t].Status&&"E"!==uer.files[t].Status&&"A"!==uer.files[t].Status)return!1;return!0},angular.module("RCP").directive("uploadImg",function(){return{restrict:"AE",scope:{selectFile:"=",upload:"=",onProcess:"=",onSuccess:"=",onErr:"="},template:'<input ng-show="isIe9==false" style="display:none;" type="file" multiple id="uploader-{{id}}" /><style type="text/css">.swf-up{position: absolute;top: 0;opacity: 0;filter:alpha(opacity=0);}.swf-up-71 {position: absolute;left: -71px;opacity: 0;filter:alpha(opacity=0);}.swf-up-35 {position: absolute;left: 35px;top: 0;opacity: 0;filter:alpha(opacity=0);} </style><div ng-show="isIe9==true" id="swfUploader-{{id}}"><a href="http://www.adobe.com/go/getflashplayer" ng-show="showMsg" style="background-color: #fff;opacity: 1;filter:alpha(opacity=1);">请先安装FLASH播放器！</a>',controller:["$scope","$timeout","service",function(t,e,i){var a=new jswf.Uer(DYCONFIG.fs.upload,{m:"C",pub:1,token:rcpAid.getToken()},!0);angular.isObject(t.upload)||(t.upload={}),t.upload.status="wait",t.upload.rate=0,t.upload.speed=0,t.upload.file=[],t.upload.img=[],t.upload.max=t.upload.max||6,t.isIe9=!1,isIE(9,9)&&(t.isIe9=!0,e(function(){t.showMsg=!0,SwfUpload("swfUploader-"+t.id,t,"swfUpCb")},1e3)),t.id=(new Date).getTime(),t.swfUpCb=function(e,a){if(0===a.code)try{var o=t.upload.max;if(o<t.upload.img.length+1)return i.dialog.alert("最多只能添加"+o+"张图片！"),!1;t.upload.img.push(a.data),t.$apply()}catch(n){}},t.selectFile=function(){setTimeout(function(){return t.isIe9?void $("#swfUploader-"+t.id).trigger("click"):void $("#uploader-"+t.id).trigger("click")},100),a.AddI("uploader-"+t.id,{},{}),a.OnProcess=function(e,i,a){t.upload.status="uploading",t.upload.rate=i,t.upload.speed=a,t.upload.file=e,t.onProcess&&"function"==typeof t.onProcess&&t.onProcess(e);try{t.$apply()}catch(o){}},a.OnSuccess=function(i,a){t.upload.status="success",t.upload.rate=0,t.upload.speed=0,t.upload.file=i,t.upload.img.push(a.data),e(function(){t.upload.status="wait"},2e3),rcpAid.clearFile("uploader-"+t.id),t.onSuccess&&"function"==typeof t.onSuccess&&t.onSuccess(i);try{t.$apply()}catch(o){}},a.OnErr=function(){t.upload.status="error",t.upload.rate=0,t.upload.speed=0,t.onErr&&"function"==typeof t.onErr&&t.onErr();try{t.$apply()}catch(e){}}},a.OnSelect=function(t){var e=n(t);return e};var o=["png","jpg","bmp","gif","jpeg"],n=function(e){var a=!0,n=0;return angular.forEach(e.files,function(e){var r=e.name.split(".").pop().toLowerCase();-1===$.inArray(r,o)&&(i.dialog.alert("只支持以下格式图片上传：png,jpg,bmp,gif,jpeg。"),a=!1,rcpAid.clearFile("uploader-"+t.id)),n++}),t.upload.max<n+t.upload.img.length&&(a=!1,i.dialog.alert("最多只能上传"+t.upload.max+"张图片！")),a?e.files:[]}}]}}),module.directive("uploadImgBase",function(){return{template:'<div id="upload-img-{{uploadConfig.id}}" ng-show="uploadConfig.showEdit"><div class="cropper-tool imgCropTool" ng-show="uploadConfig.mode===\'fixed\'"><div class="cropper-tool-a"><div class="cropper-tool-b"><div class="up-header jf-drag"><div class="f-l">上传图片</div><div class="f-r"><a ng-click="cancelImg()" href="" class="close-panel">×</a></div><div class="clear"></div></div><div class="up-body"><div class="show-tool f-l"><div class="cropper-img-fixed" ng-style="containerStyle"><img ng-src="{{newImg}}" alt="Picture" src=""></div><div id="img-view-{{uploadConfig.id}}" style="display:none" class="img-view"></div></div><div class="show-line"></div><div class="show-pre f-l"><div class="pd-20"><span class="name-img">预览：</span><div class="img-preview"></div></div></div><div class="clear"></div><div id="img-show-cover" class="loading" ng-show="upLoading"><div class="cover-img" style=""><img alt="loading..." src="../../rcp-common/imgs/loading1.gif" class="mg-r10"> 上传中...</div></div></div><div class="up-footer"><div class="btn-grp"><a ng-click="confirmImg()" class="confirm mg-r10">上传</a> <a ng-click="cancelImg()" class="cancel mg-l10">取消</a></div></div></div></div></div><div class="imgCropTool img-crop-tool" ng-show="uploadConfig.mode===\'course\'"><div ng-show="upLoading" class="loading-cover"><div class="cover-img"><img src="../../rcp-common/imgs/loading1.gif" class="mg-r10">上传中...</div></div><table><tr><td class="show-tool"><div class="cropper-img-course"><img ng-src="{{newImg}}" alt="Picture" src=""></div><div id="img-view-{{uploadConfig.id}}" style="display:none"></div></td><td class="show-pre"><span class="name-img">封面预览：</span><div class="img-preview"></div><div class="btn-grp"><a ng-click="confirmImg()" class="confirm">上传</a> <a ng-click="cancelImg()" class="cancel">取消</a></div></td></tr></table></div><input type="file" id="upload-input-{{uploadConfig.id}}" style="display:none"></div>',restrict:"E",replace:!0,transclude:!0,scope:{uploadConfig:"="},controller:["$scope","$timeout","$http","service",function(t,e,i,a){t.uploadConfig.scope=t,t.uploadConfig.aspectRatio=t.uploadConfig.ratio?t.uploadConfig.ratio[0]/t.uploadConfig.ratio[1]:16/9,t.containerStyle=t.uploadConfig.containerStyle||{width:"300px",height:"300px"},t.init=function(){var o=$("#upload-img-"+t.uploadConfig.id),n=$("#upload-input-"+t.uploadConfig.id),r=$("#img-view-"+t.uploadConfig.id);t.upLoading=!1,t.newImg="",t.selectImg=function(){n.trigger("click")},t.confirmImg=function(){if(t.upLoading!==!0){var i=s.cropper("getCroppedCanvas",{width:t.uploadConfig.width||550,style:"display:none",fillColor:"#FFFFFF"});i.id="canvas",i.display=!1,r.html(i),s.on({"zoom.cropper":function(t){}}),e(function(){var e=$("#canvas")[0].toDataURL("img/png"),i=e.split(",");return 2!==i.length?void a.dialog.alert("图片转换失败，请重试"):(t.upLoading=!0,void t.uploadBasePic({baseCode:i[1]}))})}},t.cancelImg=function(){t.upLoading=!1,"block"===o.get(0).style.display&&o.get(0).off(),t.uploadConfig.upCancel=!0,t.uploadConfig.showEdit=!1},t.uploadBasePic=function(e){var n={m:e.m||"C",pub:e.pub||"1",picType:e.picType||"1",fileName:e.fileName||"1.png",name:e.fileName||"1.png",base64:1,token:rcpAid.getToken()};i({method:"POST",url:DYCONFIG.fs.upload+"?"+$.param(n),data:e.baseCode||"",headers:{"Content-Type":"multipart/form-data"}}).success(function(e){t.upLoading=!1,t.uploadConfig.showEdit=!1,0===e.code?("block"===o.get(0).style.display&&o.get(0).off(),t.uploadConfig.cb(e.data)):a.dialog.alert(e.msg)}).error(function(e){t.upLoading=!1,t.uploadConfig.showEdit=!1,console.log(e)})};var s=$(".cropper-img-"+t.uploadConfig.mode+" > img");s.cropper({aspectRatio:t.uploadConfig.aspectRatio,autoCropArea:.85,preview:".img-preview",strict:!1,guides:!0,highlight:!0,dragCrop:!1,cropBoxMovable:!0,cropBoxResizable:!1});var c={URL:window.URL||window.webkitURL,blobURL:null,inputImage:n};c.inputImage.change(function(){var e,i=this.files;s.data("cropper")&&i&&i.length&&(console.log("step1"),e=i[0],/^image\/\w+$/.test(e.type)?(t.uploadConfig.showEdit=!0,c.blobURL=c.URL.createObjectURL(e),s.one("built.cropper",function(){c.URL.revokeObjectURL(c.blobURL)}).cropper("reset").cropper("replace",c.blobURL),c.inputImage.val(""),t.$apply()):(a.dialog.alert("只支持以下格式图片上传：png,jpg,bmp,gif,jpeg。"),c.blobURL=c.URL.createObjectURL(e),c.inputImage.val("")))})},e(function(){t.init()})}]}});