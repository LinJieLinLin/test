function isIE(){var e=window.navigator.userAgent.toLowerCase();if(-1!=e.indexOf("msie")){var t=e.match(/msie\s([0-9])/);return t[1]>6&&t[1]<9}return!1}function isIE6(){var e=window.navigator.userAgent.toLowerCase();if(-1!=e.indexOf("msie")){var t=e.match(/msie\s([0-9])/);return t[1]<7}return!1}function browseCheck(){var e,t={},n={},i=navigator.userAgent.toLowerCase();(e=i.match(/msie ([\d.]+)/))?n.ie=e[1]:(e=i.match(/firefox\/([\d.]+)/))?n.firefox=e[1]:(e=i.match(/chrome\/([\d.]+)/))?n.chrome=e[1]:(e=i.match(/opera.([\d.]+)/))?n.opera=e[1]:(e=i.match(/version\/([\d.]+).*safari/))?n.safari=e[1]:0;for(var a in n)t.edition=a+":"+n[a],t.name=a;return t}function detectOS(){var e={};return e.ua=navigator.userAgent,e.uaTLC=e.ua.toLowerCase(),e.platform=navigator.platform,e.isLinux=String(e.platform).indexOf("Linux")>-1,e.isWin="Win32"===e.platform,e.isMac="Mac68K"===e.platform,e.isUnix="X11"===e.platform&&!e.isWin&&!e.isMac,e.isSymbian="SymbianOS"===e.platform,e.bIsCE=e.uaTLC.match(/windows ce/i),e.bIsWM=e.uaTLC.match(/windows mobile/i),e.bIsAndroid=e.uaTLC.match(/android/i),e.bIsIpad=e.uaTLC.match(/ipad/i),e.bIsIphoneOs=e.uaTLC.match(/iphone os/i),e.bIsMidp=e.uaTLC.match(/midp/i),e.bIsUc7=e.uaTLC.match(/rv:1.2.3.4/i),e.bIsUc=e.uaTLC.match(/ucweb/i),e.mobile=!!(e.bIsIpad||e.bIsIphoneOs||e.bIsMidp||e.bIsUc7||e.bIsUc||e.bIsAndroid||e.bIsCE||e.bIsWM||e.isSymbian),e.pc=!e.mobile,e.name=e.bIsIpad?"iPad":e.bIsIphoneOs?"iPhone":e.bIsMidp?"midp":e.bIsUc7?"Uc7":e.bIsUc?"Ucweb":e.isMac?"Mac":e.isLinux?e.bIsAndroid?"Android":"Linux":e.isSymbian?"SymbianOS":e.bIsCE||e.bIsWM?"wm":"other",e.isWin&&(e.isWin2K=e.ua.indexOf("Windows NT 5.0")>-1||e.ua.indexOf("Windows 2000")>-1,e.isWinXP=e.ua.indexOf("Windows NT 5.1")>-1||e.ua.indexOf("Windows XP")>-1,e.isWin2003=e.ua.indexOf("Windows NT 5.2")>-1||e.ua.indexOf("Windows 2003")>-1,e.isWinVista=e.ua.indexOf("Windows NT 6.0")>-1||e.ua.indexOf("Windows Vista")>-1,e.isWin7=e.ua.indexOf("Windows NT 6.1")>-1||e.ua.indexOf("Windows 7")>-1,e.isWin8=e.ua.indexOf("Windows NT 6.2")>-1||e.ua.indexOf("Windows 8")>-1,e.name=e.isWin2K?"Win2000":e.isWinXP?"WinXP":e.isWin2003?"Win2003":e.isWinVista?"WinVista":e.isWin7?"Win7":e.isWin8?"Win8":"other"),e}function CSS3Check(){for(var e=document.createElement("div"),t=new String("webkitAnimation mozAnimation oAnimation msAnimation animation").split(" "),n=0;n<t.length;n++)if(t[n]in e.style)return!0;return!1}function css3AnimatedEnd(e,t){function n(){t();for(var a=0;a<i.length;a++)e.removeEventListener(i[a],n,!1)}for(var i=["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"],a=0;a<i.length;a++)e.addEventListener(i[a],n,!1)}function fixedMouse(e,t){var n,i=e.type.toLowerCase();if("mouseover"==i)n=e.relatedTarget||e.fromElement;else{if(!(i="mouseout"))return!0;n=e.relatedTarget||e.toElement}return n&&"xul"!=n.prefix&&!contains(t,n)&&n!==t}function contains(e,t){return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}function stopDefault(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1}function stopBubble(e){return e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,!1}function getElementsByClassName(e,t,n){for(var i=[],a=e.getElementsByTagName(n),o=0;o<a.length;o++)a[o].className.match(new RegExp("(\\s|^)"+t.replace(/(^\s*)|(\s*$)/g,"")+"(\\s|$)"),"g")&&i.push(a[o]);return i}function getStyle(e,t){return e.currentStyle?e.currentStyle[t]:getComputedStyle(e,!1)[t]}try{if("object"!=typeof module)var module=angular.module("directive",[])}catch(e){var module=angular.module("directive",[])}module.directive("placeholder",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){try{var a="<style>.placeholder-style{color: gray;};</style>";0===document.getElementsByClassName("placeholder-style").length&&angular.element(document).find("head").append(a);var o=function(e,t){var n,i=window.navigator.userAgent.toLowerCase();if(-1!==i.indexOf("msie")){var a=i.match(/msie\s([0-9]*)/);n=0===arguments.length?a[1]:1===arguments.length?parseInt(a[1])===e:a[1]>=e&&a[1]<=t?a[1]:!1}return n};if(o(8,9)){i.$modelValue||i.$modelValue===!1||0===i.$modelValue||(t.val(n.placeholder),t.addClass("placeholder-style"));try{i.$setViewValue()}catch(r){}if("password"===n.type){t.removeClass("placeholder-style");var s=(new Date).getTime(),c=n.style||"",l=n["class"]||"";t.after('<input id="'+s+'" type="text" value="'+n.placeholder+'" autocomplete="off" style="'+c+'" class="'+l+' placeholder-style" />');var d=t.next();d.css("display","inline-block"),t.css("display","none"),d.on("focus",function(){t.css("display","inline-block"),d.css("display","none"),t.on("focus",function(){})})}var u=!1;t.on("focus",function(){u=!0,"password"===n.type?i.$modelValue||t.val(""):(t.removeClass("placeholder-style"),t.val()!==n.placeholder||i.$modelValue&&i.$modelValue!==n.placeholder||t.val(""))}),t.on("blur",function(){u=!1,"password"===n.type?""===t.val()&&(d.css("display","inline-block"),t.css("display","none")):t.val()||i.$modelValue||(t.val(n.placeholder),t.addClass("placeholder-style"))}),e.$watch(function(){return i.$modelValue},function(e){e?t.removeClass("placeholder-style"):u===!1&&(t.val(n.placeholder),t.addClass("placeholder-style"))})}}catch(r){}}}});var _Tween={Linear:function(e,t,n,i){return n*e/i+t},Quad:{easeIn:function(e,t,n,i){return n*(e/=i)*e+t},easeOut:function(e,t,n,i){return-n*(e/=i)*(e-2)+t},easeInOut:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}},Cubic:{easeIn:function(e,t,n,i){return n*(e/=i)*e*e+t},easeOut:function(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t},easeInOut:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}},Quart:{easeIn:function(e,t,n,i){return n*(e/=i)*e*e*e+t},easeOut:function(e,t,n,i){return-n*((e=e/i-1)*e*e*e-1)+t},easeInOut:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t}},Quint:{easeIn:function(e,t,n,i){return n*(e/=i)*e*e*e*e+t},easeOut:function(e,t,n,i){return n*((e=e/i-1)*e*e*e*e+1)+t},easeInOut:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t}},Sine:{easeIn:function(e,t,n,i){return-n*Math.cos(e/i*(Math.PI/2))+n+t},easeOut:function(e,t,n,i){return n*Math.sin(e/i*(Math.PI/2))+t},easeInOut:function(e,t,n,i){return-n/2*(Math.cos(Math.PI*e/i)-1)+t}},Expo:{easeIn:function(e,t,n,i){return 0==e?t:n*Math.pow(2,10*(e/i-1))+t},easeOut:function(e,t,n,i){return e==i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},easeInOut:function(e,t,n,i){return 0==e?t:e==i?t+n:(e/=i/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t}},Circ:{easeIn:function(e,t,n,i){return-n*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOut:function(e,t,n,i){return n*Math.sqrt(1-(e=e/i-1)*e)+t},easeInOut:function(e,t,n,i){return(e/=i/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},Elastic:{easeIn:function(e,t,n,i,a,o){if(0==e)return t;if(1==(e/=i))return t+n;if(o||(o=.3*i),!a||a<Math.abs(n)){a=n;var r=o/4}else var r=o/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*i-r)*(2*Math.PI)/o))+t},easeOut:function(e,t,n,i,a,o){if(0==e)return t;if(1==(e/=i))return t+n;if(o||(o=.3*i),!a||a<Math.abs(n)){a=n;var r=o/4}else var r=o/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin((e*i-r)*(2*Math.PI)/o)+n+t},easeInOut:function(e,t,n,i,a,o){if(0==e)return t;if(2==(e/=i/2))return t+n;if(o||(o=i*(.3*1.5)),!a||a<Math.abs(n)){a=n;var r=o/4}else var r=o/(2*Math.PI)*Math.asin(n/a);return 1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*i-r)*(2*Math.PI)/o))+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*i-r)*(2*Math.PI)/o)*.5+n+t}},Back:{easeIn:function(e,t,n,i,a){return void 0==a&&(a=1.70158),n*(e/=i)*e*((a+1)*e-a)+t},easeOut:function(e,t,n,i,a){return void 0==a&&(a=1.70158),n*((e=e/i-1)*e*((a+1)*e+a)+1)+t},easeInOut:function(e,t,n,i,a){return void 0==a&&(a=1.70158),(e/=i/2)<1?n/2*(e*e*(((a*=1.525)+1)*e-a))+t:n/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+t}},Bounce:{easeIn:function(e,t,n,i){return n-_Tween.Bounce.easeOut(i-e,0,n,i)+t},easeOut:function(e,t,n,i){return(e/=i)<1/2.75?n*(7.5625*e*e)+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOut:function(e,t,n,i){return i/2>e?.5*_Tween.Bounce.easeIn(2*e,0,n,i)+t:.5*_Tween.Bounce.easeOut(2*e-i,0,n,i)+.5*n+t}}};window.binApp||(window.binApp={}),binApp.addEvent=function(e,t,n,i){e.$guid||(e.$guid=0),e.$events||(e.$events={}),e.$events[t]||(e.$events[t]={});for(var a in e.$events[t])if(e.$events[t][a].toString()==n.toString())return;e.$guid++,e.$events[t][e.$guid]=n,e["on"+t]=binApp.handleEvent},binApp.removeEvent=function(e,t,n){if(e.$events&&e.$events[t]&&!n)e.$events[t]={};else if(e.$events&&e.$events[t]&&n)for(var i in e.$events[t])e.$events[t][i].toString()==n.toString()&&delete e.$events[t][i]},binApp.handleEvent=function(e){e=e||window.event,e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0;var t=!0;for(var n in this.$events[e.type])this.$handleEvent=this.$events[e.type][n],this.$handleEvent(e)===!1&&(t=!1);return t},binApp.bind=function(e,t,n,i){if(e.eventQueue=e.eventQueue||{},e.eventQueue[t]=e.eventQueue[t]||{},e.handler=e.handler||{},!binApp.checkEvent(e,t,n).bool){if(i)e.eventQueue[t][i]=n;else{var a=e[t+"EventId"]?e[t+"EventId"]:0;a++,e[t+"EventId"]=a,e.eventQueue[t]["fnQueue"+a]=n}e.handler[t]||binApp.bindEvent(e,t)}},binApp.bindEvent=function(e,t){e.handler[t]=function(n){for(var i in e.eventQueue[t])"function"==typeof e.eventQueue[t][i]&&e.eventQueue[t][i].call(e,n)},window.addEventListener?e.addEventListener(t,e.handler[t],!1):e.attachEvent("on"+t,e.handler[t])},binApp.checkEvent=function(e,t,n){var i={};for(var a in e.eventQueue[t])if("function"==typeof e.eventQueue[t][a]&&e.eventQueue[t][a].toString()==n.toString()){i.bool=!0,i.guid=a;break}return i},binApp.unbind=function(e,t,n){var i=e.eventQueue&&e.eventQueue[t];if(i)if(n){switch(typeof n){case"function":var a=binApp.checkEvent(e,t,n);a.bool&&delete e.eventQueue[t][a.guid];break;case"string":delete e.eventQueue[t][n]}0==binApp.eventQueueLength(e,t)&&binApp.unBindEvent(e,t)}else binApp.unBindEvent(e,t)},binApp.unBindEvent=function(e,t){delete e.eventQueue[t]},binApp.eventQueueLength=function(e,t){var n=0;for(var i in e.eventQueue[t])n++;return n},binApp.getHandlerName=function(e){return null===e?!1:"object"==typeof e?/(\w+)\(/.exec(e.constructor.toString())[1]:"function"==typeof e?new String(e).replace(/^function(\s|\n)+(.+)\((.|\n)+$/,"$2"):void 0},binApp.getType=function(e){return"object"!=typeof e?typeof e:e instanceof Array||e.constructor==Array?"array":e instanceof Number||e.constructor==Number?"number":e instanceof String||e.constructor==String?"string":e instanceof Date||e.constructor==Date?"date":e instanceof Object||e.constructor==Object?"object":void 0},binApp.onload=function(e){binApp.addEvent(window,"load",e)},binApp.$=function(e,t){var n=null;switch(typeof e){case"function":binApp.addEvent(window,"load",e);break;case"string":switch(e.charAt(0)){case"#":"object"==t?n=document.getElementById(e.substring(1)):n.push(document.getElementById(e.substring(1)));break;case".":n=getElementsByClassName(document,e.substring(1),"*");break;default:n=document.getElementsByTagName(e)}break;case"object":n=e}return n},binApp.children=function(e,t){for(var n=e.children,i=[],a=0;a<n.length;a++)n[a].tagName.toLowerCase()==t.toLowerCase()?i.push(n[a]):null;return i},binApp.animate=function(e,t,n,i,a){clearInterval(e.timer);var o={};o.startTime=new Date,o.nowTime=new Date,o.mode=t.mode,o.effect=t.effect,o.t=0,o.d="fast"==i?300:"slow"==i?800:"normal"==i?500:i||500,o.b=[],o.c=[],o.tagVal=[],o.attr=[];for(key in n){var r="opacity"==key?100*parseFloat(getStyle(e,key)):parseFloat(getStyle(e,key));o.b.push(r),o.c.push(-(r-n[key])),o.tagVal.push(n[key]),o.attr.push(key)}o.offLen=o.attr.length;var s=function(t,n){var i=n?o.tagVal[t]:c(t);switch(o.attr[t]){case"opacity":e.style[o.attr[t]]=i/100,e.style.filter="alpha(opacity="+i+")";break;default:e.style[o.attr[t]]=i+"px"}},c=function(e){return Math.ceil(_Tween[o.mode][o.effect](o.t,o.b[e],o.c[e],o.d))},l=function(){o.nowTime=new Date,o.t=o.nowTime-o.startTime,o.t>=o.d?o.t=o.d:null;for(var t=0;t<o.offLen;t++)s(t);if(o.t>=o.d){clearInterval(e.timer);for(var n=0;n<o.offLen;n++)s(n,"end");o.t==o.d&&a&&a()}};e.timer=setInterval(l,1)},binApp.sildeDown=function(e,t,n){e.style.display="block",e.style.height="",e.style.overflow="hidden";var i=parseInt(e.clientHeight);e.style.height="0px",binApp.animate(e,{mode:"Quad",effect:"easeInOut"},{height:i,opacity:100},t?t:"normal",function(){e.style.overflow="visible",n&&n.call(e)})},binApp.sildeUp=function(e,t,n){e.style.overflow="hidden";parseInt(e.clientHeight);binApp.animate(e,{mode:"Quad",effect:"easeInOut"},{height:0,opacity:0},t?t:"normal",function(){e.style.display="none",n&&n.call(e)})},binApp.fadeIn=function(e,t,n){e.style.display="block",e.style.opacity="0",e.style.filter="alpha(opacity=0)",binApp.animate(e,{mode:"Quad",effect:"easeInOut"},{opacity:100},t?t:"normal",function(){n&&n.call(e)})},binApp.fadeOut=function(e,t,n){binApp.animate(e,{mode:"Quad",effect:"easeInOut"},{opacity:0},t?t:"normal",function(){e.style.display="none",n&&n.call(e)})},binApp.removeElement=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e].parentNode;t&&t.removeChild(arguments[e])}},binApp.clearAllNode=function(e){for(;e.firstChild;){var t=e.removeChild(e.firstChild);t=null}},binApp.showNode=function(){for(var e=0;e<arguments.length;e++)arguments[e].style.display="block"},binApp.hideNode=function(){for(var e=0;e<arguments.length;e++)arguments[e].style.display="none"},binApp.pageX=function(e){return e.getBoundingClientRect().left+(document.documentElement.scrollLeft||document.body.scrollLeft)},binApp.pageY=function(e){return e.getBoundingClientRect().top+(document.documentElement.scrollTop||document.body.scrollTop)},binApp.toTime=function(e){var t=Math.floor(e/3600),n=Math.floor(e/60);return e-=60*n,t>=1?(n-=60*t,binApp.fillZero(t,2)+":"+binApp.fillZero(n,2)+":"+binApp.fillZero(e,2)):binApp.fillZero(n,2)+":"+binApp.fillZero(e,2)},binApp.fillZero=function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},binApp.hasClass=function(e,t){return e?e.className.match(new RegExp("(\\b|^)"+t.replace(/(^\s*)|(\s*$)/g,"")+"(\\b|$)"),"g"):!1},binApp.addClass=function(e,t){return e?void(this.hasClass(e,t)||(e.className+=" "+t.replace(/(^\s*)|(\s*$)/g,""))):!1},binApp.removeClass=function(e,t){if(binApp.hasClass(e,t)){var n=new RegExp("(\\b|^)"+t.replace(/(^\s*)|(\s*$)/g,"")+"(\\b|$)","g");e.className=e.className.replace(n," ").replace(/\s+/g," ").replace(/(^\s*)|(\s*$)/g,"")}},binApp.each=function(e,t){for(var n=0;n<e.length;n++)e[n].index=n,t.call(e[n],n)},binApp.hover=function(e,t,n){binApp.addEvent(e,"mouseover",function(n){n=n||window.event,fixedMouse(n,e)&&t.call(e)}),n&&binApp.addEvent(e,"mouseout",function(t){t=t||window.event,fixedMouse(t,e)&&n.call(e)})},binApp.css=function(e,t){for(key in t)e.style[key]="number"==typeof t[key]?t[key]+="px":t[key]},binApp.domElemBit=function(e,t,n){function i(){d=new Date,o=d-l,o>=r?o=r:null,document.documentElement.scrollTop=document.body.scrollTop=Math.ceil(_Tween[t.mode][t.effect](o,s,c,r)),o>=r&&clearInterval(e.domElemBitTimer)}clearInterval(e.domElemBitTimer);var a=binApp.pageY(e)-("negNum"in t?t.negNum:0),o=0,r=n,s=document.documentElement.scrollTop||document.body.scrollTop,c=-(s-a),l=new Date,d=new Date;e.domElemBitTimer=setInterval(i,1)},binApp.getParentNode=function(e,t){return e.parentNode||alert("抱歉！找不到对应的父级对象！"),e.tagName.toLowerCase()==t?e:binApp.getParentNode(e.parentNode,t)},binApp.getQueryString=function(e){var t=new RegExp(e+"=([^&]*)"),n=window.location.href.match(t);return null!=n?decodeURI(n[1]):null},binApp.jsonExtend=function(e,t,n){if(t instanceof Array)for(var i=0,a=t.length;a>i;i++)binApp.jsonExtend(e,t[i],n);for(var i in t)!n&&i in e||(e[i]=t[i]);return e},binApp.setCookie=function(e,t,n){var i=new Date;i.setDate(i.getDate()+n),document.cookie=e+"="+t+";expires="+i},binApp.getCookie=function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}return""},binApp.removeCookie=function(e){setCookie(e,"",-1)},binApp.winScaleData=function(){var e={},t=detectOS();return e.sT=document.documentElement.scrollTop||document.body.scrollTop,e.sL=document.documentElement.scrollLeft||document.body.scrollLeft,e.sH=document.documentElement.scrollHeight||document.body.scrollHeight,e.cH=document.documentElement.clientHeight||document.body.clientHeight,e.sW=document.documentElement.scrollWidth||document.body.scrollWidth,e.cW=document.documentElement.clientWidth||document.body.clientWidth,e.minW=t.mobile?parseInt(getStyle(document.body,"minWidth")):e.cW,e.minH=t.mobile?Math.ceil(e.cH+-(e.cW-e.minW)/e.cW*e.cH):e.cH,e.scale=e.cW/e.minW,e},binApp.confirm=function(e,t,n){t=t?t:{},t.confirmFlag=!0,binApp.alert(e,t,n)},binApp.alert=function(e,t,n){binPP.guid++,binPP.$events[binPP.guid]={},binPP.$events[binPP.guid].str=e,binPP.$events[binPP.guid].opts=t,binPP.$events[binPP.guid].callback=n,binPP.handler(binPP.guid,n)},window.binPP||(window.binPP={},binPP.$events={},binPP.guid=0,binPP.passFlag=!0),binPP.handler=function(e,t){binPP.forEvent(binPP.$events[e].str,binPP.$events[e].opts,function(){delete binPP.$events[e],binPP.passFlag=!0,e+1 in binPP.$events&&binPP.handler(e+1,binPP.$events[e+1].callback)},function(){},t)},binPP.forEvent=function(e,t,n,i,a){if(binPP.passFlag){binPP.passFlag=!1,i&&i(),clearTimeout(binPP.offTimer),clearTimeout(binPP.comeInTimer),binPP.oMask&&clearTimeout(binPP.oMask.timer),binPP.oInfo&&clearTimeout(binPP.oInfo.timer),binPP.oMask&&binApp.removeElement(binPP.oMask),binPP.oInfo&&binApp.removeElement(binPP.oInfo);var o=document.createElement("div");t=t?t:{},t.confirmHdStr="confirmHdStr"in t?t.confirmHdStr:"操作确认",o.callback=n?n:!1,o.iMS=binApp.winScaleData(),o.init=function(){binPP.oInfo=o,document.body.appendChild(o),o.innerHTML="<div class='binPP_mBg'></div><div class='binPP_info'>"+e+"</div>",t.confirmFlag&&(o.innerHTML+="<div class='binPP_ft_bar'><a href='javascript:void(0);' class='define'>确定</a><a href='javascript:void(0);' class='close'>取消</a></div>",o.innerHTML+="<div class='binPP_hd_bar binDrag'><b>"+t.confirmHdStr+"</b><a class='close close-btn'>X</a></div>","top"!==t.action&&(o.style.paddingTop="30px")),o.effect={},o.effect["static"]="static"==t.action||""==t.action||void 0==t.action,o.effect.top="top"==t.action,o.effect.middle="middle"==t.action,o.effect.scale="scale"==t.action,o.maskFlag=!o.effect.top,t.confirmFlag?o.maskFlag=!0:null,o.className=o.effect.top?"binPP_top":"binPP_middle",o.thisH=o.offsetHeight,o.thisW=o.offsetWidth,o.wClientH=o.iMS.cH,o.wClientW=o.iMS.minW,o.startT=1.6*-o.thisH,o.targetL=o.wClientW/2-o.thisW/2,o.effect.top?(o.targetT=-100,o.offT=o.startT):(o.targetT=o.wClientH/2-o.thisH/2,o.offT=o.wClientH+Math.abs(o.startT)),isIE6()&&(o.targetL+=document.documentElement.scrollLeft,o.targetT+=document.documentElement.scrollTop,o.startT=document.documentElement.scrollTop-Math.abs(o.startT),o.offT+=document.documentElement.scrollTop),o.style.width=o.thisW+"px",o.style.left=o.targetL+"px",o.style.top=o.startT+"px",o.children[0].style.height=o.thisH+"px",binApp.drag(o)},o.comeIn=function(){return o.init(),o.effect["static"]||o.effect.scale?(o.effect.scale&&CSS3Check()&&binApp.scaleIn(o),o.maskFlag&&binApp.winMask(binPP,{css:{backgroundColor:"top"==t.action||"white"==t.maskColor?"white":"black",opacity:.3,filter:"alpha(opacity=30)"},animate:!1}),o.style.top=o.targetT+"px"):(o.maskFlag&&binApp.winMask(binPP,{css:{backgroundColor:"top"==t.action||"white"==t.maskColor?"white":"black"},animate:{tween:{mode:"Quint",effect:"easeOut"},css:{opacity:30},speed:"fast"}}),binApp.animate(o,{mode:"Back",effect:"easeOut"},{top:o.targetT},"normal")),t.confirmFlag?void o.forBtnFN():void(binPP.offTimer=setTimeout(o.off,1500))},o.off=function(){return binApp.removeEvent(document,"keydown",o.keydown),o.effect["static"]||o.effect.scale?void(o.effect.scale?binApp.scaleOut(o,function(){o.forOffAfter()}):o.forOffAfter()):(o.maskFlag&&binApp.animate(binPP.oMask,{mode:"Quint",effect:"easeIn"},{opacity:0},"normal"),void binApp.animate(o,{mode:"Back",effect:"easeIn"},{top:o.offT},"normal",o.forOffAfter))},o.forOffAfter=function(){binApp.removeElement(o),o.maskFlag&&binApp.removeElement(binPP.oMask),o.confirmCallback&&o.confirmCallback(),o.callback&&o.callback()},o.keydown=function(e){13==(e||window.event).keyCode?o.forDefineFN():null},o.forDefineFN=function(){o.confirmCallback=a,o.off()},o.forCloseFN=function(){o.confirmCallback=!1,o.off()},o.forBtnFN=function(){o.oClose=getElementsByClassName(o,"close","a"),binApp.each(o.oClose,function(){binApp.addEvent(this,"click",o.forCloseFN)}),o.oDefine=getElementsByClassName(o,"define","a"),binApp.each(o.oDefine,function(){binApp.addEvent(this,"click",o.forDefineFN)}),binApp.addEvent(document,"keydown",o.keydown)},binPP.comeInTimer=setTimeout(o.comeIn,168)}},binApp.drag=function(e,t){e.isTouchPad=/hp-tablet/gi.test(navigator.appVersion),e.hasTouch="ontouchstart"in window&&!e.isTouchPad,e.touchDown=e.hasTouch?"touchstart":"mousedown",e.touchMove=e.hasTouch?"touchmove":"mousemove",e.touchUp=e.hasTouch?"touchend":"mouseup",e.oDrags=getElementsByClassName(e,"binDrag","*"),e.dDb={},t=t?t:{},e.dDb.mDown=function(t){t=t||window.event,e.event=e.hasTouch?t.touches[0]:t,e.dDb.sX=e.event.clientX-parseInt(getStyle(e,"left")),e.dDb.sY=e.event.clientY-parseInt(getStyle(e,"top")),binApp.addEvent(document,e.touchMove,e.dDb.mMove),binApp.addEvent(document,e.touchUp,e.dDb.mUp),document.body.onselectstart=function(){return!1}},e.dDb.mMove=function(n){return n=n||window.event,e.event=e.hasTouch?n.touches[0]:n,e.dDb.nX=e.event.clientX-e.dDb.sX,e.dDb.nY=e.event.clientY-e.dDb.sY,e.iMS=binApp.winScaleData(),t.range&&(e.dDb.minX="minX"in t?t.minX:0,e.dDb.maxX="maxX"in t?t.maxX:e.iMS.minW-e.offsetWidth,e.dDb.minY="minY"in t?t.minY:0,e.dDb.maxY="maxY"in t?t.maxY:e.iMS.cH-e.offsetHeight,e.dDb.nX=new Number(e.dDb.nX)._range(e.dDb.minX,e.dDb.maxX),e.dDb.nY=new Number(e.dDb.nY)._range(e.dDb.minY,e.dDb.maxY)),e.style.left=e.dDb.nX+"px",e.style.top=e.dDb.nY+"px",!1},e.dDb.mUp=function(){binApp.removeEvent(document,e.touchMove,e.dDb.mMove),binApp.removeEvent(document,e.touchUp,e.dDb.mUp),document.body.onselectstart=function(){return!0}};for(var n=0;n<e.oDrags.length;n++)binApp.addEvent(e.oDrags[n],e.touchDown,e.dDb.mDown)},window.binJDCSS||(binJDCSS={},binJDCSS.oStyle=document.createElement("style"),binJDCSS.oStyle.type="text/css",document.getElementsByTagName("head")[0].appendChild(binJDCSS.oStyle),binJDCSS.oCss=document.styleSheets[document.styleSheets.length-1],binApp.insertCssRule=function(e){if(binJDCSS.oCss.cssRules)for(var t=0;t<e.length;t++)binJDCSS.oCss.insertRule(e[t].name+"{"+e[t].cssText+"}",binJDCSS.oCss.cssRules.length);else for(var t=0;t<e.length;t++)binJDCSS.oCss.addRule(e[t].name,e[t].cssText)},binApp.insertCssRule([{name:".binWinMask",cssText:"position:fixed;width:100%;height:100%;left:0;top:0;background:black;opacity:0;filter:alpha(opacity=0);z-index:9898;_position:absolute;_width:expression(document.documentElement.clientWidth+'px');_height:expression(document.documentElement.scrollHeight+'px');"},{name:".binPP_mBg",cssText:"width:100%;height:100%;opacity:1;filter:alpha(opacity=100);position:absolute;left:-5px;top:-5px;box-shadow:1px 1px 0 white,-1px -1px 0 white,0 2px 15px rgba(35,35,35,.5);text-shadow:#fff 1px 1px 2px;border-radius:5px;background:#fff;border: 5px solid #eaeaea;"},{name:".binPP_middle",cssText:"position:fixed;z-index:98168;left: 50%;top:0;margin:0;min-width:280px;max-width:98%;height:auto;line-height:21px;text-align: center;color:#606060;font-size:14px;font-weight: normal;_position:absolute;_width:expression(this.offsetWidth<280?280+'px':true);"},{name:".binPP_info",cssText:"position:relative;z-index:168;padding:35px 25px;line-height:21px;"},{name:".binPP_top",cssText:"position:fixed;z-index:98168;left: 50%;top:0;margin:0;min-width:280px;max-width:98%;height:auto;line-height:21px;text-align: center;color:#606060;font-size:14px;font-weight: normal;_position:absolute;_width:expression(this.offsetWidth<280?280+'px':true);"},{name:".binPP_top .binPP_mBg",cssText:"border-radius:0 0 10px 10px;"},{name:".binPP_top .binPP_info",cssText:"padding:135px 25px 15px;"},{name:".binPP_ft_bar",cssText:"padding:5px 5px 0;position:relative;z-index:10;min-width:358px;background-color: #eaeaea;border-top:1px solid #ccc;box-shadow:0 1px 0 #fff inset;"},{name:".binPP_ft_bar a",cssText:"margin:0 8px;border:1px solid #c1c1c1;display:inline-block;color:#606060;line-height:100%;padding:4px 20px 5px;border-radius:3px;background:white;background: -webkit-linear-gradient(90deg, #ebebeb , white);background: -moz-linear-gradient(90deg, #ebebeb, white);background: -o-linear-gradient(90deg, #ebebeb, white);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='white', endColorstr='#ebebeb', GradientType='0');"},{name:".binPP_ft_bar a:hover",cssText:"text-decoration: none;border-color:#90d2ed;color:#007fb0;background:#dff4fc;background:-webkit-linear-gradient(90deg, #dff4fc, white);background:-moz-linear-gradient(90deg, #dff4fc, white);background:-o-linear-gradient(90deg, #dff4fc, white);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='white', endColorstr='#dff4fc', GradientType='0');text-shadow:1px 1px 0 white;"},{name:".binPP_hd_bar",cssText:"text-indent:10px;text-align:left;height:30px;line-height:22px;position:absolute;left:0;top:0;width:100%;z-index:100;background-color: #eaeaea;border-bottom:1px solid #ccc;box-shadow:0 -1px 0 #fff inset;color:#333;cursor:move;"},{name:".binPP_hd_bar .close-btn",cssText:"text-indent:0;position:absolute;right:5px;top:2px;line-height:100%;padding:3px 5px;display:block;border-radius:3px;color:#b1b1b1;font:12px/1 'lucida Grande',Verdana,Arial;"},{name:".binPP_hd_bar .close-btn:hover",cssText:"text-decoration: none;background:#ccc;color:white;text-shadow:-1px -1px 0 #c1c1c1;"},{name:".binDrag",cssText:"cursor: move;"},{name:".oFullScreenLoading",cssText:"position:fixed;z-index:9999;width:68px;height:68px;margin:-34px 0 0 -34px;left:50%;top:50%;background:#101010 url(imgs/loading.gif) no-repeat center center;border-radius:8px;_position:absolute;_top:expression(document.documentElement.scrollHeight+document.documentElement.clientHeight/2+'px');"}])),binApp.scaleIn=function(e,t){CSS3Check()?(binApp.addClass(e,"scaleIn animated"),css3AnimatedEnd(e,function(){binApp.removeClass(e,"scaleIn animated"),t&&t()})):t&&t()},binApp.scaleOut=function(e,t){function n(){t&&t(),binApp.removeElement(e)}CSS3Check()?(binApp.addClass(e,"scaleOut animated"),css3AnimatedEnd(e,function(){binApp.removeClass(e,"scaleOut animated"),n()})):n()},binApp.winMask=function(e,t){if(e.oMask=document.createElement("div"),document.body.appendChild(e.oMask),e.oMask.className="binWinMask",t=t?t:{},t.animate="animate"in t?t.animate:{},"css"in t)for(var n in t.css)e.oMask.style[n]=t.css[n];t.animate&&binApp.animate(e.oMask,"tween"in t.animate?t.animate.tween:{mode:"Quint",effect:"easeOut"},"css"in t.animate?t.animate.css:{opacity:30},"speed"in t.animate?t.animate.speed:"fast")},binApp.loadingIn=function(e,t){if(window.binLD?null:window.binLD={},!binLD.oFSLD){if(binLD.oFSLD=document.createElement("div"),binLD.oFSLD.className="oFullScreenLoading",document.body.appendChild(binLD.oFSLD),e=e?e:{},binApp.winMask(binLD.oFSLD,"maskCss"in e?e.maskCss:{}),"css"in e)for(var n in e.css)binLD.oFSLD.style[n]=e.css[n];e.innerHTML&&(binLD.oFSLD.innerHTML=e.innerHTML),binApp.scaleIn(binLD.oFSLD,function(){t&&t()})}},binApp.loadingOut=function(e){binLD.oFSLD&&(binApp.scaleOut(binLD.oFSLD),binApp.animate(binLD.oFSLD.oMask,{mode:"Quint",effect:"easeIn"},{opacity:0},300,function(){binApp.removeElement(binLD.oFSLD.oMask),delete binLD.oFSLD,e&&e()}))},String.prototype._trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype._resetBlank=function(){var e=/\s+/g;return this.replace(e," ")},String.prototype._getNum=function(){var e=/[^\d]/g;return this.replace(e,"")},String.prototype._getCN=function(){var e=/[^\u4e00-\u9fa5\uf900-\ufa2d]/g;return this.replace(e,"")},String.prototype._toInt=function(){return isNaN(parseInt(this))?this.toString():parseInt(this)},String.prototype._getLen=function(){var e=/^[\u4e00-\u9fa5\uf900-\ufa2d]+$/;if(e.test(this))return 2*this.length;var t=this.match(/[\x00-\xff]/g),n=2*this.length-t.length;return n},String.prototype._limitLen=function(e,t){if(this._getLen()<e)return this.toString();for(var n="",i=0,a=/^[\u4e00-\u9fa5\uf900-\ufa2d]+$/,o=0;o<this.length&&(i+=a.test(this.charAt(o))?2:1,n+=this.charAt(o),!(i>=e));o++);return(n+(t?t:"...")).toString()},String.prototype._getFileName=function(){var e=/^.*\/([^\/\?]*).*$/;return this.replace(e,"$1")},String.prototype._getExtensionName=function(){var e=/^.*\/[^\/]*(\.[^\.\?]*).*$/;return this.replace(e,"$1")},String.prototype._replaceAll=function(e,t,n){return RegExp.prototype.isPrototypeOf(e)?this.replace(e,t):this.replace(new RegExp(e,n?"gi":"g"),t)},String.Format=function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];var e=/{(\d+)?}/g,t=arguments,n=arguments[0].replace(e,function(e,n){return t[parseInt(n)+1]});return n},Number.prototype._range=function(e,t){return parseFloat(this)>t?t:parseFloat(this)<e?e:parseFloat(this)},Number.prototype._lenWithZero=function(e){for(var t=this.toString();t.length<e;)t="0"+t;return t},Number.prototype._chrW=function(){return String.fromCharCode(this)},Array.prototype._minToMax=function(){for(var e,t=0;t<this.length;t++)for(var n=0;t>=n;n++)this[t]<this[n]&&(e=this[t],this[t]=this[n],this[n]=e);return this},Array.prototype._maxToMin=function(){for(var e,t=0;t<this.length;t++)for(var n=0;t>=n;n++)this[t]>this[n]&&(e=this[t],this[t]=this[n],this[n]=e);return this},Array.prototype._getMax=function(){for(var e,t=0;t<this.length;t++)e=1>t?this[t]:this[t]>e?this[t]:e;return e},Array.prototype._getMin=function(){for(var e,t=0;t<this.length;t++)e=1>t?this[t]:this[t]<e?this[t]:e;return e},Array.prototype._indexOf=function(e){for(var t,n=0;n<this.length;n++)e==this[n]&&(t=n);return t},Date.prototype._getCNDate=function(){var e="";return e+=this.getFullYear()._lenWithZero(4)+new Number(24180)._chrW(),e+=this.getMonth()._lenWithZero(2)+new Number(26376)._chrW(),e+=this.getDate()._lenWithZero(2)+new Number(26085)._chrW(),e+=this.getHours()._lenWithZero(2)+new Number(26102)._chrW(),e+=this.getMinutes()._lenWithZero(2)+new Number(20998)._chrW(),e+=this.getSeconds()._lenWithZero(2)+new Number(31186)._chrW(),e+=new Number(32)._chrW()+new Number(32)._chrW()+new Number(26143)._chrW()+new Number(26399)._chrW()+new String("26085199682010819977222352011620845").substr(5*this.getDay(),5)._toInt()._chrW()},Date.prototype._format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},Date.prototype._diff=function(e,t){if(!(arguments.length<2||t.constructor!=Date))switch(e){case"s":return parseInt((t-this)/1e3);case"n":return parseInt((t-this)/6e4);case"h":return parseInt((t-this)/36e5);case"d":return parseInt((t-this)/864e5);case"w":return parseInt((t-this)/6048e5);case"m":return t.getMonth()+1+12*(t.getFullYear()-this.getFullYear())-(this.getMonth()+1);case"y":return t.getFullYear()-this.getFullYear();default:return}},function(e){e.ssoC=function(){if(e.ssoC)return e.ssoC;var t=function(){},n=[],i=n.slice;return t.fn=t.prototype,t.fn.queryString=function(e){var t=window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));return t?decodeURIComponent(decodeURI(t[1])):""},t.fn.getToken=function(){
return UINFO.token||this.queryString("token")},t.fn.getCookie=function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n+=1){var i=t[n].split("=");if(e===i[0])return unescape(i[1]||"")}return null},t.fn.getPage=function(e){if("string"!=typeof e)return"";var t="";switch(e){case"登录":t="/sso/index.html";break;case"退出":t="/logout";break;case"注册":t="/sso/register.html";break;case"个人中心":t="/sso/my.html";break;case"审核页面":t="/sso/approve-detail.html";break;case"审核列表":t="/sso/approve.html"}return t},t.fn.getUrl=function(t,n){var i=e.ssoC,a=i.getPage(t),o=typeof n;switch(o){case"object":a+="?"+$.param(n);break;case"string":a+=n}return a},t.fn.redirect=function(e){var t=i.call(arguments,1),n=this.getUrl.apply(this,t);e?window.open(n):window.location=n},t.fn.importHead=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];switch(n.type){case"script":document.write('<script type="text/javascript" src="'+n.src+'"></script>');break;case"link":document.write('<link rel="stylesheet" href="'+n.href+'" />')}}},t.fn.readConfig=function(e){var t={};try{t=DYCONFIG[e]}catch(n){}return t.rUrl&&"/"!==t.rUrl[t.rUrl.length-1]&&(t.rUrl+="/"),t},t.fn.clearLocalStorage=function(){localStorage.step="",localStorage.applySpacePage=""},t.fn.checkAdmin=function(e){try{"UCS_ADMIN"!==e.usr.attrs.role.type&&ssoC.redirect(!1,"个人中心")}catch(t){ssoC.redirect(!1,"个人中心")}},new t}()}(window),function(e){function t(t){for(var n=0;n<t.length;n+=1){var i=t[n];switch(i.type){case"script":e.write('<script type="text/javascript" src="'+i.src+'"></script>');break;case"link":e.write('<link rel="stylesheet" href="'+i.href+'" />')}}}var n=[],i=DYCONFIG.sso.rUrl;n.push({type:"script",src:i+"sso/api/uinfo.js?user=1&selector=bandc"}),t(n)}(document);var module=angular.module("RCP",["ngCookies","ngRoute"]);if(module.controller("registerCtrl",["$scope","request","$rootScope",function(e,t,n){var i={};e.initUrl=function(){e.requestUrl={checkLogin:i.rUrl+"sso/api/uinfo",logout:i.rUrl+"sso/api/logout",eg:i.rUrl+"api"}},e.init=function(){i=ssoC.readConfig("sso"),e.headerConfig={rUrl:i.rUrl},e.loginConfig={rUrl:i.rUrl},e.registerConfig={rUrl:i.rUrl},e.initUrl(),e.checkLogin(UINFO)},e.checkLogin=function(e){var t="";if(e.uid){if(console.log("login!"),"/sso/"===location.pathname||"/sso/index.html"===location.pathname||"/context.html"===location.pathname){if(t=ssoC.queryString("url"),""===t)return void(window.location.href="my.html?token="+ssoC.getToken());var n=t.split("#");t=n[0];var i=n[1]?"#"+n[1]:"";t.match("^.*\\?.*$")?window.location.href=t+"&token="+ssoC.getToken()+i:window.location.href=t+"?token="+ssoC.getToken()+i}}else if("/sso/my.html"===location.pathname)return t=location.origin+location.pathname,void ssoC.redirect(!1,"登录",{url:encodeURIComponent(t)})},e.logout=function(){var n={method:"GET",url:e.requestUrl.logout,params:{}};t(n).then(function(e){"OK"===e.data&&(ssoC.clearLocalStorage(),location.href="/sso",UINFO={})},function(e){console.log("logout error")})},e.init()}]),module.factory("request",["$http","$q",function(e,t){return function(n){return e(n).then(function(e){var n=t.defer();return angular.isUndefined(e.data.code)?n.reject({type:-1,data:e}):0!==e.data.code?n.reject({type:1,data:e}):n.resolve(e.data),n.promise},function(e){throw{type:-1,data:e}})}}]),module.config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate",function(e){return function(t,n){e(t,n),console.error({origin:"AngularJS Error",msg:t.message,stack:t.stack}),document.runErrorCallUpgrade()}}])}]),module.controller("mainCtrl",["$scope","$rootScope","$http","service","$cookies","$timeout",function(e,t,n,i,a,o){function r(){var e=localStorage.getItem("anonymousLoginUsr");return e&&"error"!==e?(t.anonymousUser=JSON.parse(e),void(a.stoken=t.anonymousUser.token)):void n({method:"GET",url:"http://"+g_conf.SSO+"/sso/api/anonymousLogin"}).then(function(e){if(0!==e.data.code)return console.error(e.data.msg,"匿名登录失败"),void localStorage.setItem("anonymousLoginUsr","error");var n=e.data.data;n.usr.token=n.token,localStorage.setItem("anonymousLoginToken",n.token),delete n.usr.BAttr,delete n.usr.attrs,localStorage.setItem("anonymousLoginUsr",JSON.stringify(n.usr)),t.anonymousUser=n.usr,a.stoken=n.usr.token},function(e){localStorage.setItem("anonymousLoginUsr","error"),console.error(e,"匿名登录失败")})}function s(n){u.token=rcpAid.getToken(),e.setUserData(UINFO),l(t.currentUser.role),console.log("checkLogin by token")}function c(e){console.log("未登陆",e),rcpAid.isLogin=0,l({}),o(function(){t.$broadcast("login","")},0)}function l(t){function n(t){angular.forEach(t,function(t){var n=!1;angular.forEach(e.itemList,function(e){t.name===e.name&&(n=!0)}),n||e.itemList.push(t)})}function i(){var e=rcpAid.getUrl,t=[];return angular.forEach(arguments,function(n){switch(n){case"学习中心":t.push({ic:"L2",name:n,href:e(n)});break;case"教学中心":t.push({ic:"L2",name:n,href:e(n)});break;case"助学中心":"undefined"==typeof isIE||isIE(9,9)||t.push({ic:"L2",name:n,href:e(n)});break;case"管理中心":t.push({ic:"L1",name:n,href:e(n)});break;case"创建新课程":t.push({ic:"L4",name:n,href:e("创建课程",{type:10})})}}),t}e.itemList=[],angular.forEach(t,function(t,a){switch(a){case"default":break;case"student":e.user.schoolId&&n(i("学校空间")),e.user.classId&&n(i("班级空间"));break;case"parent":n(i("家长空间"));break;case"teacher":e.user.schoolId&&n(i("学校空间")),e.user.classId&&n(i("班级空间"));break;case"help":n(i("助学中心"));break;case"class":n(i("班级空间","学校空间"));break;case"school":n(i("学校空间"));break;case"UCS_ADMIN":n(i("管理中心"));break;case"COURSE_VERIFY_ADMIN":n(i("管理中心"));break;case"PAGE_EDIT_ADMIN":n(i("管理中心"))}}),n(i("学习中心","教学中心","创建新课程","创建新题库"))}function d(){return t.currentUser={},$("body").show(),i.common.checkLogin(s,c),rcpAid.isLogin?void 0:(console.log("未登陆"),void r())}$("body").show();var u={};try{u=new ars.ARS,u.args={},u.delay=1e3,u.pushDelay=1e4,u.url=DYCONFIG.ars.rUrl+"pub/api/record",u.token=rcpAid.getToken(),u.start()}catch(p){u={}}e.setUserData=function(e){try{if(console.log(e),!e.uid)return;t.currentUser={uid:e.usr.id,nickName:e.usr.attrs.basic.nickName,avatar:e.usr.attrs.basic.avatar,desc:e.usr.attrs.basic.desc,role:e.usr.attrs.role||""},e.usr.attrs.pass&&(t.currentUser.certification=e.usr.attrs.pass.certification),console.log("发广播",t.currentUser),o(function(){t.$broadcast("login",t.currentUser)},0)}catch(n){console.log(n)}},d()}]),!module)var module=angular.module("RCP",[]);module.directive("registerSso",function(){return{template:'<section class="register-sso" ng-keydown="keydown($event)"><style type="text/css">@charset "UTF-8";.register-sso{margin:30px auto;width:500px;min-height:300px}.register-sso .b-gray,.register-sso .input-div{border:1px solid #ccc}.register-sso .b-red{border:1px solid red}.register-sso .b-blue{border:1px solid #57a2d8}.register-sso .b-err,.register-sso .tip.tip-err-1{border:1px solid #ffb2b2}.register-sso .title{color:#fff;text-align:center;background:url(registration-process-bg.png) center 0 no-repeat;line-height:40px;height:40px;font-size:16px;text-shadow:1px 1px 1px #2F9FCA;margin-bottom:30px}.register-sso .input-icon .icon-err,.register-sso .input-icon .icon-su{background-image:url(/sso/imgs/common_icon.png);background-repeat:no-repeat}.register-sso form{margin-bottom:30px}.register-sso label{display:block;margin-top:8px;margin-bottom:32px}.register-sso label>div{vertical-align:middle;display:inline-block;position:relative}.register-sso label>div:first-child{text-align:right;width:100px;margin-right:10px}.register-sso label>div:first-child>span{color:#ff3f3f}.register-sso label input{width:200px;font-size:15px;border:0;padding:0;position:absolute;left:20px;top:0;outline:0}.register-sso .input,.register-sso label input,.register-sso label>div{line-height:40px;height:40px;box-shadow:none}.register-sso .input-div{width:300px;border-radius:4px}.register-sso .input-div.input-code{width:162px}.register-sso .input-div.input-code input{width:140px}.register-sso .input-div .get-code{position:absolute;top:0;right:-20px;height:100%}.register-sso .btn{color:#fff;box-shadow:none;text-decoration:none;border-radius:4px;text-align:center;cursor:pointer;border:none}.register-sso .btn:focus{outline:0}.register-sso .btn-code{position:absolute;top:10%;left:0;min-width:120px;height:80%;line-height:100%;background-color:#20aafc}.register-sso .btn-code:hover{background-color:#2aaefc}.register-sso .send-code,.register-sso .send-code:hover{background-color:#d1e6ef}.register-sso .btn-reg{background-color:#02c0b9;width:300px;display:inline-block;height:55px;font-size:23px;line-height:55px}.register-sso .btn-reg:hover{background-color:#02cac3}.register-sso .center{text-align:center;margin-left:30px}.register-sso .mg-l20{margin-left:20px}.register-sso .tip{left:0;position:absolute;top:100%;height:85%;margin-left:-1px;width:100%;white-space:normal;z-index:10}.register-sso .tip span{position:absolute;top:50%;left:0;-webkit-transform:translate(0,-50%);-moz-transform:translate(0,-50%);-ms-transform:translate(0,-50%);-o-transform:translate(0,-50%);transform:translate(0,-50%)}.register-sso .tip.tip-top{left:0;top:-85%}.register-sso .tip.tip-right{left:103%;top:-1px;height:100%}.register-sso .tip.tip-bottom{left:0;top:100%}.register-sso .tip.tip-left{left:-103%;top:0;height:100%}.register-sso .input-icon,.register-sso .input-icon em{width:18px;height:18px;overflow:hidden;display:block}.register-sso .tip.tip-left span{left:initial;right:0}.register-sso .tip.tip-err,.register-sso .tip.tip-err-1{color:#f33}.register-sso .tip.tip-err-1{background-color:#fff2f2}.register-sso .input-icon{position:absolute;right:7px;top:50%;-webkit-transform:translate(0,-50%);-moz-transform:translate(0,-50%);-ms-transform:translate(0,-50%);-o-transform:translate(0,-50%);transform:translate(0,-50%);z-index:20}.register-sso .input-icon .icon-su{background-position:0 -1168px}.register-sso .input-icon .icon-err{background-position:0 -1209px}.register-sso .agreement{margin-bottom:20px}.register-sso .agreement label{display:inline-block;margin:0}</style><div><form name="register"><label for="account"><div><span>*</span>手机号码:</div><div class="input-div" ng-class="{\'b-blue\':focus.account==1,\'b-red\':msg.account&&!focus.account}"><input type="text" placeholder="请输入手机号" id="account" maxlength="11" ng-model="rData.account" ng-focus="checkFocus(\'account\')" ng-blur="checkRegisterSso(rData,\'account\')" autofocus required><div class="tip tip-err tip-bottom" ng-class="c.tip.class" ng-show="msg.account&&!focus.account"><span class="mg-l20">{{msg.account}}</span></div><div class="input-icon" ng-show="!msg.account&&!focus.account&&rData.account"><em class="icon-su" alt="正确"></em></div><div class="input-icon" ng-show="msg.account&&!focus.account"><em class="icon-err" alt="错误"></em></div></div></label><label for="code"><div><span>*</span>验证码:</div><div class="input-div input-code" ng-class="{\'b-blue\':focus.code==1,\'b-red\':msg.code&&!focus.code}"><input type="text" placeholder="手机验证码" id="code" maxlength="20" ng-model="rData.code" ng-focus="checkFocus(\'code\')" ng-blur="checkRegisterSso(rData,\'code\')" ng-mouseleave="checkRegisterSso(data,\'code\')" required><div class="get-code"><button class="btn btn-code" ng-class="{\'send-code\':countTime<60&&countTime>0}" type="button" ng-mouseover="checkAccount()" ng-click="getCode()" ng-bind="codeMsg"></button></div><div class="tip tip-err tip-bottom" ng-class="c.tip.class" ng-show="msg.code&&!focus.code"><span class="mg-l20">{{msg.code}}</span></div><div class="input-icon" ng-show="!msg.code&&!focus.code&&rData.code"><em class="icon-su" alt="正确"></em></div><div class="input-icon" ng-show="msg.code&&!focus.code"><em class="icon-err" alt="错误"></em></div></div></label><label for="pwd"><div><span>*</span>设置密码:</div><div class="input-div" ng-class="{\'b-blue\':focus.password==1,\'b-red\':msg.password&&!focus.password}"><input type="password" placeholder="6-20位字母、数字或符号" id="pwd" maxlength="20" ng-model="rData.password" ng-focus="checkFocus(\'password\')" ng-blur="checkRegisterSso(rData,\'password\')" ng-keydown="passwordChange($event)" required><div class="tip tip-err tip-bottom" ng-class="c.tip.class" ng-show="msg.password&&!focus.password"><span class="mg-l20">{{msg.password}}</span></div><div class="input-icon" ng-show="!msg.password&&rData.password.length>5"><em class="icon-su" alt="正确"></em></div><div class="input-icon" ng-show="msg.password&&!focus.password"><em class="icon-err" alt="错误"></em></div></div></label><label for="repwd"><div><span>*</span>确认密码:</div><div class="input-div" ng-class="{\'b-blue\':focus.rePassword==1,\'b-red\':msg.rePassword&&!focus.rePassword}"><input type="password" placeholder="重复密码" id="repwd" maxlength="{{rData.password.length||0}}" ng-model="rData.rePassword" ng-focus="checkFocus(\'rePassword\')" ng-blur="checkRegisterSso(rData,\'rePassword\')" required><div class="tip tip-err tip-bottom" ng-class="c.tip.class" ng-show="msg.rePassword&&!focus.rePassword"><span class="mg-l20">{{msg.rePassword}}</span></div><div class="input-icon" ng-show="!msg.rePassword&&rData.rePassword.length>5"><em class="icon-su" alt="正确"></em></div><div class="input-icon" ng-show="msg.rePassword&&!focus.rePassword"><em class="icon-err" alt="错误"></em></div></div></label></form><div class="center"><div class="agreement"><input type="checkbox" ng-model="rData.agree" id="agree" value="false"><label for="agree">我已阅读并同意</label><a href="agreement.html" target="_blank">《酷校注册协议》</a></div><a class="btn btn-reg" id="login" ng-mouseover="checkRegisterSso(rData,\'rePassword\')" ng-click="registerSso()">{{registerText}}</a></div></div></section>',restrict:"E",replace:!0,transclude:!0,scope:{c:"="},controller:["$scope","$timeout","$http","$rootScope","request","$interval","service",function(t,n,i,a,o,r,s){var c="http://localhost:7700/";t.rData={},t.msg={},t.focus={},t.regExp={account:/^[a-zA-Z0-9_\u4e00-\u9fa5]{2,50}$/,email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,tel:/^1[3|4|5|7|8][0-9]\d{8}$/,number:/^[0-9]{1,10}$/,id:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/};var l=60;t.countTime=+sessionStorage.countTime||l,t.codeMsg="点击获取",t.readConfig=function(e){var n={};if(t.c)n=t.c;else try{n=DYCONFIG[e]}catch(i){}n&&(c=n.rUrl)},t.init=function(){t.currentUser=a.currentUser,t.$on("login",function(e,t){t.uid&&n(function(){location.href=rcpAid.getUrl("登录",{url:DYCONFIG.rcp.rUrl})},0)}),t.readConfig("sso"),"/"!==c[c.length-1]&&(c+="/"),t.registerText="注册",localStorage.rAccount&&(t.rData.account=localStorage.rAccount),t.countTime<l&&t.countTime>0&&t.countCodeTime(),t.requestUrl={register:c+"sso/api/create",checkExist:c+"sso/api/exist",getCode:c+"tlogin/api/sendMessage",eg:c+"api"},t.req={getCode:function(e,n){var i={method:"POST",url:t.requestUrl.getCode,params:e};return o(angular.extend(i,n||{}))},checkAccount:function(e,n){var i={method:"GET",url:t.requestUrl.checkExist,params:e};return o(angular.extend(i,n||{}))},registerSso:function(e,n){var i={method:"POST",url:t.requestUrl.register,params:e};return o(angular.extend(i,n||{}))}}},t.keydown=function(n){e=n?n:window.event?window.event:null,13==e.keyCode&&t.registerSso()},t.checkFocus=function(e){t.focus[e]=1},t.checkAccount=function(){var e={usrs:t.rData.account};t.req.checkAccount(e,{option:{loading:!1}}).then(function(e){e.data&&1===e.data[t.rData.account]&&(t.msg.account="用户名已存在")},function(e){console.log(e)})},t.checkFunc={account:function(e){try{e.account=$("#account").val()}catch(n){}if(!e.account)return t.msg.account="请输入手机号",-1;if(t.msg.account)return-1;var i="请输入正确的手机号";return t.regExp.tel.test(e.account)&&(e.tel=e.account,i=""),t.msg.account=i,t.msg.account?-1:(localStorage.rAccount=t.rData.account,t.checkAccount(),0)},code:function(e){try{e.code=$("#code").val()}catch(n){}if(!e.code)return t.msg.code="请输入验证码",-1;var i="请输入正确的验证码";return t.regExp.number.test(e.code)&&(i=""),t.msg.code=i,t.msg.code?-1:t.msg.code?-1:0},password:function(e){return e.password?e.password.length<6?(t.msg.password="密码至少6位",-1):(t.msg.password="",0):(t.msg.password="请输入密码",-1)},rePassword:function(e){return e.password!==e.rePassword?(t.msg.rePassword="两次密码不一致！",-1):(t.msg.rePassword="",0)},agree:function(e){return e.agree?0:(t.msg.agree="请先同意注册协议",t.msg.agree)}},t.checkRegisterSso=function(e,n){t.focus={},n&&(t.msg[n]="");if(!n){for(var i in t.checkFunc){var a=t.checkFunc[i](e);if(a)return a}return 0}try{return t.checkFunc[n](e)}catch(o){return 0}};var d=function(e){var t=window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));return t?decodeURIComponent(t[1]):""};t.getCode=function(){var e=t.checkFunc.account(t.rData);if(0!==e){if(-1===e)return;return void s.dialog.alert(e)}t.countTime===l&&"点击获取"===t.codeMsg&&t.countCodeTime();var n={mobile:t.rData.account,types:"register"};t.req.getCode(n).then(function(e){console.log(e)},function(e){r.cancel(t.intervalTime),t.countTime=l,t.codeMsg="点击获取",sessionStorage.countTime=l;try{s.dialog.alert(e.data.data.msg||"请重试")}catch(n){s.dialog.alert("请重试")}})},t.countCodeTime=function(){r.cancel(t.intervalTime),t.countTime--,t.codeMsg="重发验证码("+t.countTime+")",t.intervalTime=r(function(){return t.countTime--,sessionStorage.countTime=t.countTime,t.countTime<=0?(r.cancel(t.intervalTime),t.countTime=l,void(t.codeMsg="点击获取")):void(t.codeMsg="重发验证码("+t.countTime+")")},1e3)},t.registerSso=function(){if("注册"===t.registerText&&!t.msg.account){var e=t.checkRegisterSso(t.rData);if(0!==e){if(-1===e)return;return void s.dialog.alert(e)}if(!angular.isNumber(+t.rData.code))return e="验证码不正确",void s.dialog.alert(e);var i={usr:[t.rData.account],pwd:t.rData.password,attrs:{basic:{email:t.rData.email||"",phone:t.rData.tel||""}}};t.registerText="正在注册...",t.req.registerSso({login:1,pcode:t.rData.code},{data:angular.toJson(i)}).then(function(e){e.data.token||(e.data.token=e.msg),t.registerText="注册",localStorage.account=t.rData.account,localStorage.rAccount="";d("url"),e.data.usr;n(function(){location.href=rcpAid.getUrl("首页",{token:e.data.token})},0)},function(e){switch(t.registerText="注册",e.data.data.code){case 1:e.data.data.dmsg="参数错误";break;case 5:e.data.data.dmsg="验证码不正确";break;case 3:localStorage.rAccount="",e.data.data.dmsg="用户已存在";break;default:e.data.data.dmsg="参数错误"}5!=e.data.data.code&&(t.rData.password="",t.rData.rePassword="");try{s.dialog.alert(e.data.data.dmsg||"请重试")}catch(n){s.dialog.alert("请重试")}})}},t.passwordChange=function(e){if(32===e.keyCode){var n="密码不能包含空格,请重新输入!";t.rData.password="",s.dialog.alert(n)}},t.init()}]}}),module.factory("request",["$http","$q",function(e,t){return function(n){return e(n).then(function(e){var n=t.defer();return angular.isUndefined(e.data.code)?n.reject({type:-1,data:e}):0!==e.data.code?n.reject({type:1,data:e}):n.resolve(e.data),n.promise},function(e){throw{type:-1,data:e}})}}]),module.factory("headSearch",["request",function(e){var t=g_conf.pes.rUrl;return{SearchIntelligent:function(n,i){var a={method:"GET",url:t+"pub/api/SearchIntelligent",params:n,option:{loading:!1}};return e(angular.extend(a,i||{}))}}}]),module.run(["service","headSearch",function(e,t){e.expand("headSearch",function(){return t})}]),module.directive("headnav",function(){return{template:'<header><div ng-class="headMaximizeLock ? \'head-maximize\' : \'head-minimize\'"><div ng-class="param.style"><div class="image-head-rainbow decoration-ic"></div><section class="g-m-w header-area"><div class="minimize-logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.small}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><nav class="minimize-nav"><ul><li ng-repeat="item in navList track by $index" ng-class="item.class"><a ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}">{{item.name}}</a><div ng-if="item.child.length"><ul><li ng-repeat="c in item.child"><a ng-href="{{c.href || \'\'}}" target="{{c.target || \'_self\'}}">{{c.name}}</a></li></ul></div></li></ul></nav><div class="logo"><a ng-href="{{param.logo.href||\'/\'}}"><img ng-src="{{param.logo.large}}" alt="{{param.logo.msg}}" title="{{param.logo.msg}}"></a></div><div class="top-user-menu-bar" ng-class="{clearminw: user.account}"><top-user-menu user="user" item-list="itemList"></top-user-menu></div><div class="h-sc" ng-controller="headSearchCtrl"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index, \'资源\')"><div class="text-of pd-r10"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a class="item-name" ng-bind-html="item.name | titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a ng-href="javascript:void(0);" ng-click="goToSort(item.name)" class="mg-r20" ng-repeat="item in scHotWord">{{item.name}}</a></div></div></section><section class="nav-area"><div class="g-m-w"><div class="n-categories" ng-controller="categoriesCtrl" ng-mouseenter="service.mouseenter(hover)" ng-mouseleave="service.mouseleave(hover)"><div class="dt">全部课程</div><div class="dd" id="by-categories" ng-show="categoriesUnfoldLock || hover.mouseEnterLock"><div class="image-giraffe giraffe-icon"></div><div class="dd-inner"><div class="item" ng-repeat="item in categoriesListStyle1 track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)" ng-show="$index<5 || hover.mouseEnterLock"><div class="layer"><h3><a ng-href="goToCategory(item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><div class="hot-word"><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="text-of" ng-repeat="child in item.child track by $index" ng-show="$index<3" title="{{child.name}}">{{child.name}}</a></div><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<3"><dt><a ng-href="goToCategory(item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<15" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>3"><a ng-href="goToCategory(item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div><div ng-repeat="list in categoriesListStyle2 track by $index"><div class="big-sort"><a ng-href="goToCategory(item.name)" target="_blank" title="{{list.name}}">{{list.name}}</a></div><div class="item" ng-repeat="item in list.child track by $index" ng-mouseenter="service.mouseenter(item)" ng-mouseleave="service.mouseleave(item)"><div class="layer"><h3><a ng-href="goToCategory(list.name,item.name)" target="_blank" title="{{item.name}}">{{item.name}}</a></h3><i>&gt;</i></div><div class="sub" ng-show="item.mouseEnterLock"><div class="inner"><dl class="card" ng-repeat="child in item.child track by $index" ng-show="$index<4"><dt><a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" class="f-r">更多&gt;&gt;</a> <a ng-href="goToCategory(list.name,item.name,child.name)" target="_blank" title="{{child.name}}">{{child.name}}</a></dt><dd><a ng-href="goToCategory(list.name,item.name,child.name,unit.name)" target="_blank" class="text-of" ng-repeat="unit in child.child track by $index" ng-show="$index<10" title="{{unit.name}}">{{unit.name}}</a></dd></dl><div class="more-srot" ng-show="item.child.length>4"><a ng-href="goToCategory(list.name,item.name)" target="_blank" class="f-r">更多分类&gt;&gt;</a>. . .</div></div></div></div></div></div></div></div><nav class="nav"><a ng-repeat="item in navList track by $index" ng-href="{{item.href || \'\'}}" target="{{item.target || \'_self\'}}" ng-class="item.class">{{item.name}}</a></nav><div class="extra" ng-show=""><a href="javascript:void(0);" class="icf t-icf">名师认证</a> <a href="javascript:void(0);" class="icf e-icf">真实评价</a> <a href="javascript:void(0);" class="icf r-icf">随时退</a></div></div></section></div></div></header>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user",nav:"="},controller:["$rootScope","$scope","$element","$attrs","service",function(e,t,n,i,a){t.service=a,t.catType=parseInt(rcpAid.getCourseCat()),e.$watch("headMaximizeLock",function(e){e&&(t.headMaximizeLock=e)}),e.$watch("categoriesUnfoldLock",function(e){e&&(t.categoriesUnfoldLock=e)}),e.$watch("catDomain",function(e){if(e)switch(e){case"aikexue.com":t.init(2)}}),t.$on("login",function(e,n){n&&t.loginInit()}),t.loginInit=function(){3===t.catType&&(t.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:t.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}])},t.init=function(e){if("order"===t.nav)return t.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"个人空间",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],void(t.param={logo:{small:"/rcp-common/imgs/order/head-icon.png",large:"/rcp-common/imgs/icon/head-icon.png",href:"/my-order.html",msg:"我的酷校"},style:""});switch(t.catType){case 3:t.isLogin?t.navList=[{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"教学中心",href:rcpAid.getUrl("教学中心",{uid:t.user.tid}),"class":"key",target:"_blank"},{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}]:t.navList=[{name:"高等教育",href:rcpAid.getUrl("分类",{category:"高等教育"}),"class":"key",target:"_blank"}],t.param={logo:{small:"/rcp-common/imgs/icon/gzmooc-logo.png",large:"/rcp-common/imgs/icon/gzmooc-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校 - 首页"},style:""};break;case 2:t.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"全部课程",href:rcpAid.getUrl("分类"),"class":"key",target:"_blank"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"}],t.param={logo:{small:"/rcp-common/imgs/icon/aikexue-logo-2.png",large:"/rcp-common/imgs/icon/aikexue-logo.png",href:DYCONFIG.rcp.rUrl,msg:"爱科学"},style:"aikexue-head"};break;default:t.navList=[{name:"首页",href:rcpAid.getUrl("首页"),"class":"key"},{name:"学习中心",href:rcpAid.getUrl("学习中心"),"class":"key",target:"_blank"},{name:"我要吐槽",href:rcpAid.getUrl("我要吐槽"),"class":"key",target:"_blank"}],t.param={logo:{small:"/rcp-common/imgs/icon/book-logo-2.png",large:"/rcp-common/imgs/icon/book-logo.png",href:DYCONFIG.rcp.rUrl,msg:"酷校LOGO·让学习更Cool"},style:""}}},t.init()}]}}),module.directive("topUserMenu",function(){return{template:'<div class="top-user-menu"><div style="font-size:14px;line-height:40px" ng-show="!currentUser.uid"><a ng-href="{{link.login}}" id="login" class="color-cyan pd-l20"><i class="image-login-user-ic"></i>马上登录 </a><span style="color:#ececec;margin:0 8px">| </span><a ng-href="{{link.register}}" class="color-cyan">注册</a></div><div class="menber-link" ng-show="currentUser.uid"><a href="" class="u-info" rel="member_link"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" class="face-img" width="40" height="40" rel="user_face" alt="{{currentUser.nickName}}"> <span class="name" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></span> <i class="x-arrow-dowm">&gt;</i></a><div class="u-panel"><div class="tup-box"><div class="tup-info" rel="user_info_box"><div class="user-head" rel="user_face_box"><a ng-href="{{link.setting}}"><img ng-hide="currentUser.avatar" src="/rcp-common/imgs/face/d-face-1.png" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"> <img ng-show="currentUser.avatar" ng-src="{{currentUser.avatar}}" width="96" height="96" class="face-img" rel="user_face" alt="{{currentUser.nickName}}"></a></div><div class="user-identity"><p class="user-name text-of"><a href="" rel="user_name" title="{{currentUser.nickName}}" ng-bind="currentUser.nickName"></a></p><p class="attestation-un" ng-class="{\'attestation\':attestation==\'已认证\'}"><i class="image-attestation-yellow"></i> <span>{{attestation}}</span></p></div><div class="clear"></div></div><div class="tup-operate"><div class="card-sets"><a href="{{link.applySpaceUrl}}" class="key f-l"><i class="image-attestation"></i> <span class="text-4f">认证管理</span> </a><a href="{{link.setting}}" target="_blank" class="key f-l"><i class="image-settings"></i> <span class="text-4f">设置</span> </a><a href="" class="key f-r" ng-click="logout()"><i class="image-logout"></i> <span class="text-4f">退出</span></a></div><div class="card-links"><a ng-repeat="item in itemList" ng-href="{{item.href || \'\'}}" ng-class="item.name == \'...\' ? \'disabled key \'+item.icon : \'key \'+item.icon"><i></i> <span>{{item.name}}</span></a></div></div></div></div></div></div>',restrict:"E",replace:!0,transclude:!0,scope:{itemList:"=itemList",user:"=user"},controller:["$rootScope","$scope","$timeout","$location","service",function(e,t,n,i,a){t.$watch("itemList",function(e){if(e){var n=t.itemList.length,i=n%3;if(i)for(var a=3-n%3+n,o=n;a>o;o+=1)e.push({name:"..."})}},!0),t.logout=function(){var e=rcpAid.getUrl("首页");location.href=rcpAid.getUrl("退出",{url:encodeURIComponent(e)})},t.$on("login",function(e,n){n.uid&&t.loginInit()}),t.loginInit=function(){t.currentUser=e.currentUser,t.currentUser.certification&&(t.attestation="已认证")},t.init=function(){var e=rcpAid.getNoTokenUrl();t.link={login:rcpAid.getUrl("登录",{url:encodeURIComponent(e)}),register:rcpAid.getUrl("注册",{url:encodeURIComponent(e)}),applySpaceUrl:rcpAid.getUrl("实名认证"),setting:rcpAid.getUrl("个人设置",{url:window.location.href})},t.attestation="未认证"},t.init()}]}}),module.controller("categoriesCtrl",["$rootScope","$scope","service",function(e,t,n){function i(e){switch(e){case 2:t.categoriesListStyle2=a||[];break;default:t.categoriesListStyle1=a||[]}}t.service=n,t.hover={},t.catType=rcpAid.getCourseCat(),t.byCategories=function(){t.byCategoriesLoading=!0,i(t.catType)},t.listenerMember={byCategories:{node:"#by-categories",callback:t.byCategories}};var a;t.goToCategory=function(){var e=[].slice;return rcpAid.getUrl("分类",{tags:e.call(arguments,0).join(",")})}}]),module.directive("searchDir",function(){return{template:'<div class="h-sc"><div class="head-search-bar"><div class="enter" ng-click="stopPropagation($event)"><input type="text" class="input" ng-model="scText" ng-keydown="onkeydown($event)" ng-change="matchChange(scSelectVal.value,scText)" placeholder="请输入关键词搜索"><div class="match-kw-v" ng-show="matchReadyLock"><div class="mc-list"><ul><li ng-repeat="item in mcCategoryList track by $index" ng-if="$index < lMaxLen" ng-class="{hover: $index == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'类\')" ng-click="matchGoToCategory(item.tag,scText)"><div class="text-of"><a href="javascript:;">{{text}}</a> 在 <a href="javascript:;" class="item-name color-cyan">{{item.tag}}</a> 分类中搜索</div></li></ul><div style="margin:0 10px;border-top:1px solid #dfdfdf" ng-if="mcCourseList.length && mcCategoryList.length"></div><ul><li ng-if="!mcCourseList || !mcCourseList.length">暂无相关内容</li><li ng-repeat="item in mcCourseList track by $index" ng-click="intoDetail(item)" ng-if="$index < cMaxLen" ng-class="{hover: $index + lMaxLen == moveKeyIndex}" ng-mouseenter="mouseenter($index,\'资源\')"><div class="text-of"><span class="lab" ng-if="item.t == 10">课程</span> <span class="lab" ng-if="item.t == 20">题库</span> <a href="javascript:;" class="item-name" ng-bind-html="item.name|titleMatchKw:scText"></a></div></li></ul></div></div></div><a ng-click="goToSearch(scSelectVal.value,scText)" class="submit" title="提交"><i class="fa fa-search" aria-hidden="true"></i></a></div><div class="hot-word"><a href="" class="mg-r20" ng-repeat="item in scHotWord" ng-click="goToSort(item.name)">{{item.name}}</a></div></div>',
restrict:"E",replace:!0,transclude:!0,scope:{hot:"="},controller:"headSearchCtrl"}}),module.controller("headSearchCtrl",["$rootScope","$scope","$document","$element","service","headSearch",function(e,t,n,i,a,o){function r(){t.scText="",u()}function s(){w=!0,t.KeyDownIndex=t.moveKeyIndex,d()}function c(){"number"!=typeof t.moveKeyIndex?t.moveKeyIndex=0:t.moveKeyIndex=(t.moveKeyIndex+1)%t.aMaxLen,s()}function l(){"number"!=typeof t.moveKeyIndex?t.moveKeyIndex=t.aMaxLen-1:t.moveKeyIndex=t.moveKeyIndex<0?t.aMaxLen-1:t.moveKeyIndex-1,s(),m(t.scText.length)}function d(){var e,n=t.KeyDownIndex,i=t.lMaxLen;return t.scTag=void 0,i>n&&(t.scText=t.text),n>=i&&(e=t.mcCourseList[n-t.lMaxLen],e&&(t.scText=e.name)),e}function u(e){t.matchReadyLock=!1,e&&(n.unbind("click"),t.$digest())}function p(){n.unbind("click").bind("click",function(){u("digest")}),t.matchReadyLock=!0}function g(){t.matchReadyLock&&(clearTimeout(x),x=setTimeout(function(){u("digest")},300))}function m(e){var t=i.find('input[ng-model="scText"]').get(0);if("selectionStart"in t&&(t.selectionStart=e,t.selectionEnd=e),"createTextRange"in t){var n=t.createTextRange();n.moveStart("character",e),n.collapse(!0),n.select()}}function f(e,n){t.inSort&&!angular.isArray(e)||angular.forEach(e,function(e){return t.inSort?!1:void(n(e)||angular.isArray(e.child)&&e.child.length&&(f(e.child,n),b("push",e.name)))})}function h(e,n){switch(t.inSort=!1,b("clear"),f(e,function(e){return t.inSort=e.name===n,t.inSort&&b("push",e.name),t.inSort}),t.inSort){case!0:b("splice",n);break;default:b("clear")}return t.categorySelect}function b(e,n){var i=t.categorySelect;switch(e){case"clear":i.splice(0,i.length);break;case"push":i.push(n);break;case"splice":i.splice(0,$.inArray(n,i))}}function v(e,t){a.dialog.alert(t),console[e](t)}function y(e){var t=[];if(e.length)for(var n=0,i=e.length;i>n;n++)t.push({id:e[n].hasOwnProperty("id")?e[n].id:"",name:e[n].hasOwnProperty("title")?e[n].title:"",t:e[n].hasOwnProperty("type")?e[n].type:""});return t}t.scHotWord=[],t.scSelect=[{name:"所有分类",value:"",fixLock:!0},{name:"课程",value:10},{name:"题库",value:20}],t.scSelectVal=t.scSelect[0],t.onkeydown=function(e){switch(e.stopPropagation(),e.keyCode){case 13:t.scText||(t.scText=$(".head-search-bar input").eq(0).val());var n=t.KeyDownIndex,i=t.lMaxLen;"number"==typeof n&&n>=0&&i>n&&t.scTag?t.matchGoToCategory(t.scTag,t.scText):n>=0&&t.matchReadyLock?location.href=rcpAid.getUrl("课程详情",{cid:t.mcCourseList[n].id}):t.goToSearch(t.scSelectVal.value,t.scText);break;case 38:l();break;case 40:c();break;default:w=!1,t.moveKeyIndex=void 0,t.KeyDownIndex=void 0,t.scTag=void 0}};var w,x;i.find('input[ng-model="scText"]').unbind("focus").bind("focus",p),i.find('input[ng-model="scText"]').unbind("blur").bind("blur",g),t.mouseenter=function(e,n){switch(n){case"类":t.moveKeyIndex=e;break;case"资源":t.moveKeyIndex=e+t.lMaxLen}},t.goToSearch=function(e,t){r(),location.href=rcpAid.getUrl("搜索",{type:e,query:t?encodeURIComponent(t):t})},t.goToSort=function(e){r(),location.href=rcpAid.getUrl("分类",{tags:e})},t.stopPropagation=function(e){e.stopPropagation()},t.matchChange=function(e,n){if(!w){if(u(),!n)return t.mcCategoryList=[],void(t.mcCourseList=[]);t.text=n,o.SearchIntelligent({key:n,courseType:e||null,limit:10}).then(function(e){t.scText&&(t.matchReadyLock=!0,t.mcCourseList=y(e.data.courses||[]),t.mcCategoryList=[],t.lMaxLen=t.mcCategoryList.length>3?3:t.mcCategoryList.length,t.cMaxLen=t.mcCourseList.length-t.lMaxLen,t.aMaxLen=t.lMaxLen+t.cMaxLen,t.mcCourseList.length||t.mcCategoryList.length||u())},function(e){v("错误代码："+e.data.data.code)})}},t.$watch("scSelectVal.value",function(){t.matchChange(t.scSelectVal.value,t.scText)}),t.matchGoToCategory=function(t,n){if(!e.allTagCategroy||!e.allTagCategroy.length)return void v("error","获取分类数据失败");var i=h(e.allTagCategroy,t).reverse().join(",");i?(r(),location.href=rcpAid.getUrl("分类",{tags:i,query:n})):v("error","找不到这个分类，请检查接口数据")},t.categorySelect=[],t.intoDetail=function(e){e.hasOwnProperty("id")&&(location.href=rcpAid.getUrl("课程详情",{cid:e.id}))}}]),module.directive("tailnav",function(){return{template:'<footer><section class="footer" id="footer"><div class="g-m-w"><div class="copyright"><p>广州市大洋信息技术股份有限公司 版权所有</p><p>Copyright © 2015 ITDAYANG. All Rights Reserved.</p><p>{{caseNumber}}</p></div><div class="footer-link"><a href="http://www.itdayang.com/about.html" target="_blank">关于我们</a> <span>- </span><a href="http://www.itdayang.com/contact.html" target="_blank">联系我们</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">法律条款</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">帮助中心</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">学校申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">机构申请加入</a> <span>- </span><a href="javascript:;" ng-click="atBuilding()">意见反馈</a></div><div class="clear"></div></div></section></footer>',restrict:"E",replace:!0,transclude:!0,scope:{data:"=data"},controller:["$scope","service",function(e,t){e.catType=rcpAid.getCourseCat();var n=DYCONFIG.domain||[];angular.forEach(n,function(t){t.domain===location.host&&(e.caseNumber=t.domainNum)}),e.atBuilding=function(){t.dialog.alert("正在建设中...")}}]}}),module.filter("titleMatchKw",["$sce",function(e){return function(t,n){var i="<b>"+n+"</b>",a=/([\[\]\(\)\{\}\*\?\+\^\$\.\|\\])/gi,o=n.replace(a,"\\$1");return t=t.replace(new RegExp(o,"ig"),i),e.trustAsHtml(t)}}]),function(){function e(){var a=document.getElementById("footer");if(a){var o=document.documentElement.scrollHeight-1||document.body.scrollHeight-1,r=document.documentElement.clientHeight||document.body.clientHeight;i=r>=o?1:2,i!==n&&(r>=o?(t(a.parentNode,{height:a.offsetHeight+"px"}),t(a,{position:"absolute",width:"100%",bottom:0,left:0})):(t(a.parentNode,{height:a.offsetHeight+"px"}),t(a,{position:"",width:"100%",bottom:0,left:0}))),n=r>=o?1:2}setTimeout(e)}if(!window.fixedFooterFlag){window.fixedFooterFlag=!0;var t=function(e,t){for(k in t)e.style[k]=t[k]},n=0,i=1;e()}}();